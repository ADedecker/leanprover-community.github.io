---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/35577DivisibilityArgument.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html">Divisibility Argument</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="189204588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189204588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189204588">Shing Tak Lam (Feb 27 2020 at 11:15)</a>:</h4>
<p>Say I wanted to prove <code>n^2 ∣ 3 -&gt; n ∣ 3</code>,</p>
<p>what I'd do would be to <code>intro h</code>, giving me <code>h : n^2 ∣ 3</code> and requiring me to prove <code>n ∣ 3</code>. The way I'd do it would be by contradiction, (say <code>n = 3*m + 1</code> and <code>n = 3*m + 2</code>), then <code>rw at h</code> and reaching a contradiction.</p>
<p>However I'm not sure how I can generate those cases in Lean, ie <code>¬n ∣ 3 -&gt; ∃ m, n = 3*m + 1 ∨ n = 3*m + 2</code>. I could define that as a lemma but then I don't know how to prove it.</p>
<p>(Should it be <code>∃ m, n = 3*m + 1 ∨ n = 3*m + 2</code> or <code>(∃ m, n = 3*m + 1) ∨ (∃ m, n = 3*m + 2)</code>?)</p>
<p>Also how do you enter <code>∣</code> in VSCode, since it's not <code>|</code>, and I've just been copy and pasting it.</p>
<p>(Also if there is a more straightforward way to prove the original statement that'd be welcome as well. I'm still in Sixth Form so I haven't properly done any University Mathematics before)</p>
<p>Thank you,</p>

<a name="189206028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189206028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189206028">Kenny Lau (Feb 27 2020 at 11:41)</a>:</h4>
<p>do you mean <code>3 \| n^2</code>?</p>

<a name="189206079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189206079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189206079">Kenny Lau (Feb 27 2020 at 11:42)</a>:</h4>
<p>you can use <code>%</code> (<code>nat.mod</code>)</p>

<a name="189206920"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189206920" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189206920">Shing Tak Lam (Feb 27 2020 at 11:58)</a>:</h4>
<p>Yes. Apologies I do mean <code>3 \| n^2</code>. </p>
<p>I'm not sure what you mean about using <code>%</code> here, do you mean to use <code>n^2 % 3 == 0</code> instead of <code>3 \| n^2</code>?</p>

<a name="189207053"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189207053" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189207053">Shing Tak Lam (Feb 27 2020 at 12:00)</a>:</h4>
<p>Also, does <code>Ctrl-P</code> <code>#</code> only search in files that have been imported? or is it all of <code>mathlib</code>?</p>

<a name="189211799"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189211799" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189211799">Shing Tak Lam (Feb 27 2020 at 13:07)</a>:</h4>
<p>Ok, so I have the proof complete except one thing, which is that I can't seem to find any definitions that can prove <code>1 &lt; 3</code>.</p>

<a name="189211910"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189211910" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189211910">Anne Baanen (Feb 27 2020 at 13:09)</a>:</h4>
<p>If tactics are also ok, then <code>by norm_num</code> is perfect for this</p>

<a name="189212334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189212334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189212334">Shing Tak Lam (Feb 27 2020 at 13:14)</a>:</h4>
<p>Alright. Thank you very much.</p>

<a name="189228290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189228290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189228290">Kevin Buzzard (Feb 27 2020 at 16:16)</a>:</h4>
<p><span class="user-mention" data-user-id="266440">@Shing Tak Lam</span> Here's my attempt at your question (I put in lots of comments so it looks longer than it could be):</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hn2</span> <span class="o">:</span> <span class="mi">3</span> <span class="err">∣</span> <span class="n">n</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="o">:</span> <span class="mi">3</span> <span class="err">∣</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- Let q be floor of n/3 and let r be the remainder when dividing n by 3</span>
  <span class="n">set</span> <span class="n">q</span> <span class="o">:=</span> <span class="n">n</span> <span class="bp">/</span> <span class="mi">3</span> <span class="k">with</span> <span class="n">hq</span><span class="o">,</span>
  <span class="n">set</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">n</span> <span class="err">%</span> <span class="mi">3</span> <span class="k">with</span> <span class="n">hr</span><span class="o">,</span>
  <span class="c1">-- Then n=3q+r</span>
  <span class="k">have</span> <span class="n">hn</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">=</span> <span class="n">n</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">hr</span><span class="o">,</span> <span class="n">hq</span><span class="o">,</span> <span class="n">mod_add_div</span><span class="o">],</span>
  <span class="c1">-- and r&lt;3</span>
  <span class="k">have</span> <span class="n">hr3</span> <span class="o">:</span> <span class="n">r</span> <span class="bp">&lt;</span> <span class="mi">3</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">hr</span><span class="o">,</span>
    <span class="n">apply</span> <span class="n">mod_lt</span><span class="o">,</span>
    <span class="n">norm_num</span><span class="o">,</span>
  <span class="c1">-- There are only three cases for r so let&#39;s split into those cases.</span>
  <span class="n">set</span> <span class="n">i</span> <span class="o">:</span> <span class="n">fin</span> <span class="mi">3</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">r</span><span class="o">,</span> <span class="n">hr3</span><span class="bp">⟩</span> <span class="k">with</span> <span class="n">hi</span><span class="o">,</span>
  <span class="n">fin_cases</span> <span class="n">i</span><span class="bp">;</span> <span class="n">rw</span> <span class="n">hi</span> <span class="n">at</span> <span class="n">h</span><span class="bp">;</span> <span class="n">replace</span> <span class="n">h</span> <span class="o">:=</span> <span class="o">(</span><span class="n">fin</span><span class="bp">.</span><span class="n">ext_iff</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span> <span class="n">h</span><span class="bp">;</span> <span class="n">dsimp</span> <span class="n">at</span> <span class="n">h</span><span class="bp">;</span> <span class="n">rw</span> <span class="n">h</span> <span class="n">at</span> <span class="n">hn</span><span class="o">,</span>
  <span class="o">{</span> <span class="c1">-- First r = 0</span>
    <span class="c1">-- In this case n is a multiple of 3 because it&#39;s 3q</span>
    <span class="n">use</span> <span class="n">q</span><span class="o">,</span>
    <span class="n">rw</span> <span class="err">←</span><span class="n">hn</span><span class="o">,</span>
    <span class="n">simp</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- Next r = 1</span>
    <span class="c1">-- I claim this contradicts 3|n^2</span>
    <span class="n">exfalso</span><span class="o">,</span>
    <span class="c1">-- because here 3 | 1+3(2q+3q^2)</span>
    <span class="k">have</span> <span class="n">hbad</span> <span class="o">:</span> <span class="mi">3</span> <span class="err">∣</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">3</span><span class="bp">*</span><span class="o">(</span><span class="mi">2</span><span class="bp">*</span><span class="n">q</span><span class="bp">+</span><span class="mi">3</span><span class="bp">*</span><span class="n">q</span><span class="err">^</span><span class="mi">2</span><span class="o">),</span>
      <span class="n">convert</span> <span class="n">hn2</span><span class="o">,</span>
      <span class="n">rw</span> <span class="err">←</span><span class="n">hn</span><span class="o">,</span>
      <span class="n">ring</span><span class="o">,</span>
    <span class="c1">-- and hence 1 mod 3 = 0</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">dvd_iff_mod_eq_zero</span><span class="o">,</span> <span class="n">add_mul_mod_self_left</span><span class="o">,</span> <span class="n">mod_eq_of_lt</span><span class="o">]</span> <span class="n">at</span> <span class="n">hbad</span><span class="o">,</span>
    <span class="c1">-- which is nonsense</span>
    <span class="n">cases</span> <span class="n">hbad</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span>
  <span class="o">},</span>
  <span class="o">{</span> <span class="c1">-- Finally r = 2; the argument is pretty much the same</span>
    <span class="n">exfalso</span><span class="o">,</span>
    <span class="k">have</span> <span class="n">hbad</span> <span class="o">:</span> <span class="mi">3</span> <span class="err">∣</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="mi">4</span> <span class="bp">*</span> <span class="n">q</span> <span class="bp">+</span> <span class="mi">3</span> <span class="bp">*</span> <span class="n">q</span> <span class="err">^</span> <span class="mi">2</span><span class="o">),</span>
      <span class="n">convert</span> <span class="n">hn2</span><span class="o">,</span> <span class="n">rw</span> <span class="err">←</span><span class="n">hn</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">dvd_iff_mod_eq_zero</span><span class="o">,</span> <span class="n">add_mul_mod_self_left</span><span class="o">,</span> <span class="n">mod_eq_of_lt</span><span class="o">]</span> <span class="n">at</span> <span class="n">hbad</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">hbad</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span>
  <span class="o">}</span>
<span class="kn">end</span>
</pre></div>


<p>When I was a beginner I also wrote a proof of this result: you can still see it <a href="https://github.com/kbuzzard/xena/blob/master/M1F/2017-18/Example_Sheet_02/solutions.lean#L286-L361" target="_blank" title="https://github.com/kbuzzard/xena/blob/master/M1F/2017-18/Example_Sheet_02/solutions.lean#L286-L361">here</a>. It's nice to see that I've got a bit better since then; that was just over 2 years ago.  When I had finished I proved that no rational number squared was 3, and then I looked at the Lean term I had generated using the <code>#print</code> command. I emailed the resulting text file to my son who imported it into blender, coloured it and twisted it around a lot, and we sent the result to the London Mathematical Society who put it on the front page of their newsletter <a href="https://www.lms.ac.uk/sites/lms.ac.uk/files/files/NLMS_484-forweb2.pdf" target="_blank" title="https://www.lms.ac.uk/sites/lms.ac.uk/files/files/NLMS_484-forweb2.pdf">here</a>.</p>

<a name="189229250"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189229250" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189229250">Kenny Lau (Feb 27 2020 at 16:27)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">zmod</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="mi">3</span> <span class="err">∣</span> <span class="n">n</span> <span class="bp">*</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="mi">3</span> <span class="err">∣</span> <span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="k">have</span> <span class="o">:</span> <span class="n">nat</span><span class="bp">.</span><span class="n">prime</span> <span class="mi">3</span><span class="o">,</span> <span class="n">norm_num</span><span class="o">,</span>
  <span class="n">rw</span> <span class="err">←</span> <span class="n">zmodp</span><span class="bp">.</span><span class="n">eq_zero_iff_dvd_nat</span> <span class="n">this</span> <span class="n">at</span> <span class="n">h</span> <span class="err">⊢</span><span class="o">,</span>
  <span class="n">rwa</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">cast_mul</span><span class="o">,</span> <span class="n">mul_self_eq_zero</span><span class="o">]</span> <span class="n">at</span> <span class="n">h</span>
<span class="kn">end</span>
</pre></div>

<a name="189229257"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189229257" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189229257">Kenny Lau (Feb 27 2020 at 16:27)</a>:</h4>
<p>Cunningham's Law is in full effect</p>

<a name="189275976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Divisibility%20Argument/near/189275976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/35577DivisibilityArgument.html#189275976">Shing Tak Lam (Feb 28 2020 at 01:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> </p>
<p>That's great. Mine is <em>much</em> longer than yours (over 100 lines!), but it's nice to see the different approaches and the <em>mistakes</em> (I suppose you can call them that) I made along the way.</p>
<ul>
<li>I didn't know <code>set ... := ...</code>, so my goal was full of <code>(n / 3)</code>. This sucked for readability, but the result was the same.</li>
<li>I didn't know about <code>fin</code> and <code>fin_cases</code>, so I wrote my own lemmas that did <code>n % 3 = 0 ∨ n % 3 = 1 ∨ n % 3 = 2</code>.</li>
<li>In retrospect, using case analysis made more sense than what I did, which was proof by contradiction from the beginning (although this is what I would do if I was doing this on paper). So I wrote a lemma that gave me <code>n % 3 ≠ 0 -&gt; n % 3 = 1 ∨ n % 3 = 2</code> and then <code>cases</code> on that by getting <code>1 = 0</code> in two separate goals.</li>
<li>I tried to expand <code>(3*m + 1)</code> and <code>(3*m + 2)</code> to get it in the form <code>3*k + 1</code>(for some k), which took a lot of <code>rw</code>s (12 for <code>3*m+1</code>,  18 for <code>3*m + 2</code>), which once again, in retrospect is not the simplest route to take.</li>
<li>I guess this is more down to my lack of familiarity with University Maths (the little time that I had to explore Maths is now taken up by revision for my A Levels), but I replaced all <code>n ∣ m</code> with <code>m % n = 0</code>, where I was more familiar with <code>%</code> due to the programming that I've done before.</li>
</ul>
<p>I guess these are all beginner mistakes, and more practice would be better, and hopefully I'd be better at actually doing proofs when I start uni at October, which would hopefully translate into better Lean.</p>


{% endraw %}

{% include archive_update.html %}