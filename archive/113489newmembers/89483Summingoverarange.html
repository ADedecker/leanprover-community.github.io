---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/89483Summingoverarange.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html">Summing over a range</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="182550286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182550286" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182550286">Bhavik Mehta (Dec 04 2019 at 12:20)</a>:</h4>
<p>Is there something somewhat between <code>list.sum</code> and <code>finset.sum</code> - I'm looking to work with a sum over <code>[0..k]</code> (and ideally induct on k). I know I could use <code>list.sum (list.map f) (range n)</code>, but since <code>finset.sum</code> takes an extra mapping parameter I was wondering if there's a version of <code>list.sum</code> with this extra parameter as well</p>

<a name="182550332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182550332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182550332">Johan Commelin (Dec 04 2019 at 12:22)</a>:</h4>
<p>Why would <code>finset.sum</code> not work?</p>

<a name="182550401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182550401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182550401">Bhavik Mehta (Dec 04 2019 at 12:22)</a>:</h4>
<p>Oh. That's a good point. Thanks!</p>

<a name="182610445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182610445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182610445">Luis O'Shea (Dec 04 2019 at 23:10)</a>:</h4>
<p>When working with finite sums I have used <code>list.sum</code> and <code>list.range</code>. However it seems that <code>finset</code> is the preferred way (e.g., <a href="https://github.com/leanprover-community/mathlib/blob/9607bbf808b80ccdb7ce1254a5b4b28950fc180e/src/algebra/big_operators.lean#L737" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/9607bbf808b80ccdb7ce1254a5b4b28950fc180e/src/algebra/big_operators.lean#L737">Gauss' summation formula in mathlib</a>). What are the advantages of <code>finset</code> over <code>list</code> for this use?</p>

<a name="182610577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182610577" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182610577">Bhavik Mehta (Dec 04 2019 at 23:12)</a>:</h4>
<p>One advantage is the use-case I mentioned above, where we want to sum a function over a range, rather than just sum over a set (without the indirection of <code>map</code>)</p>

<a name="182611240"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182611240" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182611240">Bryan Gin-ge Chen (Dec 04 2019 at 23:22)</a>:</h4>
<p>I think the main advantage is just that <code>finset.sum</code> has a lot more theorems proved about it. I don't know (but would like to know) whether it would be possible / desirable to prove them all for <code>multiset.sum</code> and <code>list.sum</code>.</p>

<a name="182612701"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182612701" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182612701">Luis O'Shea (Dec 04 2019 at 23:45)</a>:</h4>
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span> that makes sense. However I now have a very basic question. It took me a long time to find <code>finset.sum</code> (by trial and error <code>import data.fintype</code> worked; in particular <code>import data.finset</code> is not enough). Is there a better way than trial and error?</p>

<a name="182613210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182613210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182613210">Bryan Gin-ge Chen (Dec 04 2019 at 23:52)</a>:</h4>
<p>Good question. For some reason all those definitions are in <code>algebra.big_operators</code>. I'm not sure of the best way of finding that out if you're new.</p>

<a name="182614241"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182614241" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182614241">Mario Carneiro (Dec 05 2019 at 00:06)</a>:</h4>
<p>The reason <code>list.sum</code> doesn't have a function argument is exactly because you can apply <code>list.map</code> first. You can't do this for <code>finset.sum</code> because mapping a finset to another finset will cause duplicates to be removed</p>

<a name="182614542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182614542" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182614542">Mario Carneiro (Dec 05 2019 at 00:11)</a>:</h4>
<p><code>algebra.big_operators</code> is kind of in a weird position because it is the dependency sup of <code>finset</code> and the <code>algebra</code> collection. We don't really want either of those to import the other, but then stuff depending on both gets orphaned</p>

<a name="182614936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182614936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182614936">Luis O'Shea (Dec 05 2019 at 00:17)</a>:</h4>
<p>From a practical perspective I suspect that <span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span>'s point ("a lot more theorems") makes <code>finset.sum</code> the natural choice. However, philosophically is <code>list.sum</code> closer to what mathematicians mean? For example it would not be particularly strange to see something like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>3</mn></mrow></msub><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{i=1,2,2,3,3,3} f(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.185818em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16195399999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span> in a mathematical paper. (Perhaps I should take a look at those theorems and see whether they apply to <code>list</code>.)</p>

<a name="182615216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182615216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182615216">Mario Carneiro (Dec 05 2019 at 00:22)</a>:</h4>
<blockquote>
<p>For example it would not be particularly strange to see something like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>3</mn></mrow></msub><mi>f</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sum_{i=1,2,2,3,3,3} f(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.185818em;vertical-align:-0.43581800000000004em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16195399999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight">2</span><span class="mpunct mtight">,</span><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord mtight">3</span><span class="mpunct mtight">,</span><span class="mord mtight">3</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.43581800000000004em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span> in a mathematical paper.</p>
</blockquote>
<p>I would find that very strange, but perhaps that's another matter.</p>

<a name="182615261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182615261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182615261">Mario Carneiro (Dec 05 2019 at 00:23)</a>:</h4>
<p>I would think <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mn>2</mn><mi>f</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><mo>+</mo><mn>3</mn><mi>f</mi><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(1)+2f(2)+3f(3)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span> would be more likely</p>

<a name="182616270"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Summing%20over%20a%20range/near/182616270" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/89483Summingoverarange.html#182616270">Bhavik Mehta (Dec 05 2019 at 00:40)</a>:</h4>
<p>I agree that <code>list.sum</code> feels closer to what's intended, which was the idea behind the original question here</p>


{% endraw %}

{% include archive_update.html %}