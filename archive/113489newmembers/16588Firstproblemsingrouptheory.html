---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/16588Firstproblemsingrouptheory.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html">First problems in group theory</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="187916327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187916327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187916327">Laurent Bartholdi (Feb 11 2020 at 14:30)</a>:</h4>
<p>Hello world!<br>
I played enough of the "number game" that I thought I should try something a bit different -- more in my area, and more advanced.</p>
<p>I checked that Lean has the concepts of group, and in particular finite groups, built-in. I was thinking about proving the following theorems, in order of difficulty:<br>
-- The group generated by x-&gt;x+1 acting on the reals is the free group &lt;a|&gt;<br>
-- The group generated by x-&gt;x+1 and x-&gt;2x has as presentation &lt;a,b|ab=ba^2&gt;<br>
-- The group generated by x-&gt;x+1 and x-&gt;x^3 is the free group &lt;a,b|&gt;</p>
<p>Any opinions on whether this is a sensible task for a newbie?</p>
<p>TIA, Laurent</p>

<a name="187917115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187917115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187917115">Johan Commelin (Feb 11 2020 at 14:36)</a>:</h4>
<p><span class="user-mention" data-user-id="263407">@Laurent Bartholdi</span> What exactly do you mean with "the group generated by x -&gt; x+1 and x -&gt; x^3"?</p>

<a name="187917152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187917152" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187917152">Johan Commelin (Feb 11 2020 at 14:37)</a>:</h4>
<p>Are you fixing a real number, and then taking the closure under those functions?</p>

<a name="187917287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187917287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187917287">Johan Commelin (Feb 11 2020 at 14:38)</a>:</h4>
<p>Anyway, I think such statements can be done in Lean, although there might be some annoying technicalities.</p>

<a name="187917849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187917849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187917849">Laurent Bartholdi (Feb 11 2020 at 14:45)</a>:</h4>
<blockquote>
<p>Are you fixing a real number, and then taking the closure under those functions?</p>
</blockquote>
<p>There are two options. I could think about maps on the reals, and this is my preferred choice. I could also think of the orbit of \pi under these operations (assuming lean knows that \pi is transcendental, of course).</p>

<a name="187921238"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187921238" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187921238">Johan Commelin (Feb 11 2020 at 15:23)</a>:</h4>
<p>It doesn't know that <code>pi</code> is transcendental</p>

<a name="187921317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187921317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187921317">Johan Commelin (Feb 11 2020 at 15:24)</a>:</h4>
<p>Aha, so you want to look at subgroups of <code>Aut(R)</code>, sorry, I was being dense.</p>

<a name="187921391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187921391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187921391">Johan Commelin (Feb 11 2020 at 15:25)</a>:</h4>
<p>There is something called <code>\R \equiv \R</code>, which is all bijections from R to itself.</p>

<a name="187921399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187921399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187921399">Johan Commelin (Feb 11 2020 at 15:25)</a>:</h4>
<p>Lean knows that it is a group.</p>

<a name="187921406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187921406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187921406">Johan Commelin (Feb 11 2020 at 15:25)</a>:</h4>
<p>Lean also knows how to generate a subgroup from a set.</p>

<a name="187921462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187921462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187921462">Johan Commelin (Feb 11 2020 at 15:26)</a>:</h4>
<p>So you could start by building the bijections that you stated in your post. That would be task 0.1 I guess</p>

<a name="187921534"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187921534" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187921534">Johan Commelin (Feb 11 2020 at 15:27)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">add_one</span> <span class="o">:</span> <span class="err">\</span><span class="n">R</span> <span class="err">\</span><span class="n">equiv</span> <span class="err">\</span><span class="n">R</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="n">sorry</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="n">sorry</span> <span class="o">}</span>

<span class="n">def</span> <span class="n">double</span> <span class="o">:</span> <span class="err">\</span><span class="n">R</span> <span class="err">\</span><span class="n">equiv</span> <span class="err">\</span><span class="n">R</span> <span class="o">:=</span> <span class="n">sorry</span>

<span class="n">def</span> <span class="n">pow_three</span> <span class="o">:</span> <span class="err">\</span><span class="n">R</span> <span class="err">\</span><span class="n">equiv</span> <span class="err">\</span><span class="n">R</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="187921548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187921548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187921548">Johan Commelin (Feb 11 2020 at 15:27)</a>:</h4>
<p>(Sorry, no unicode nearby...)</p>

<a name="187929480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187929480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187929480">Kevin Buzzard (Feb 11 2020 at 16:48)</a>:</h4>
<p>It will be no problem proving that the group generated by <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>↦</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x\mapsto x+1</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.522em;vertical-align:-0.011em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">↦</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> is isomorphic to the free group.</p>

<a name="187930395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187930395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187930395">Kevin Buzzard (Feb 11 2020 at 16:58)</a>:</h4>
<p>For the others, I don't know a formal maths proof but it wouldn't surprise me if it were straightforward for an expert to formalise, although it might be long for a beginner.</p>

<a name="187934442"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187934442" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187934442">Patrick Massot (Feb 11 2020 at 17:40)</a>:</h4>
<p>Laurent, the honest answer is: everything is hard, but it's a lot of fun.</p>

<a name="187934728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187934728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187934728">Patrick Massot (Feb 11 2020 at 17:44)</a>:</h4>
<p>What Johan wrote is probably not enough to get you started. The first point is that, for computer science related reasons, a lot of things in mathlib are setup in terms of this <code>equiv</code> structure which packages a map, its inverse and proofs that the inverse is indeed a left and right inverse. Of course from a mathematics perspective, it has no additional content compared to a map and a proof of bijectivity, but from a computational perspective it's different. This is slightly painful but it would be much worse if you wanted to use Coq whose community is full of people who care about computations.</p>

<a name="187934804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187934804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187934804">Patrick Massot (Feb 11 2020 at 17:45)</a>:</h4>
<p>We also have an abbreviation for self-equiv called <code>perm</code>. So the map <code>x+1</code> seen as a permutation of reals is defined as:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">T</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">ℝ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">-</span><span class="mi">1</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">}</span>
</pre></div>


<p>The last two lines are the proofs, they are crushed by the simplifier.</p>

<a name="187935099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187935099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187935099">Patrick Massot (Feb 11 2020 at 17:48)</a>:</h4>
<p>Then the subgroup spanned by <code>T</code> is: <code>group.closure ({T} : set (perm ℝ))</code>. Note that it should be enough to write <code>group.closure {T}</code> but Lean3's elaborator is failing badly here (this is a known bug) so we need to tell it explicitly that this singleton <code>{T}</code> is a set of permutations of ℝ.</p>

<a name="187935281"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187935281" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187935281">Patrick Massot (Feb 11 2020 at 17:49)</a>:</h4>
<p>Question <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> and <span class="user-mention" data-user-id="110596">@Rob Lewis</span>  who seem to be around. Do you have any idea why Lean doesn't immediately get a subgroup instance on that group closure?</p>

<a name="187935370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187935370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187935370">Patrick Massot (Feb 11 2020 at 17:50)</a>:</h4>
<p>Minimal example here:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">free_group</span>
<span class="kn">open</span> <span class="n">equiv</span> <span class="n">function</span>
<span class="n">open_locale</span> <span class="n">classical</span>
<span class="n">noncomputable</span> <span class="n">theory</span>

<span class="n">def</span> <span class="n">T</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">ℝ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">-</span><span class="mi">1</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">}</span>

<span class="kn">namespace</span> <span class="n">LB1</span>
<span class="c1">-- The subgroup generated by T</span>
<span class="n">def</span> <span class="n">LB1</span> <span class="o">:=</span> <span class="n">group</span><span class="bp">.</span><span class="n">closure</span> <span class="o">({</span><span class="n">T</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">perm</span> <span class="n">ℝ</span><span class="o">))</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">is_subgroup</span> <span class="n">LB1</span> <span class="o">:=</span> <span class="n">group</span><span class="bp">.</span><span class="n">closure</span><span class="bp">.</span><span class="n">is_subgroup</span> <span class="bp">_</span>  <span class="c1">-- by apply_instance fails</span>
</pre></div>

<a name="187935557"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187935557" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187935557">Patrick Massot (Feb 11 2020 at 17:52)</a>:</h4>
<p>Next trap for Laurent. You may think that <code>T</code> belongs to <code>LB1</code>. But elements of <code>LB1</code> are packages containing a permutation <em>and</em> a proof that it belongs to the subgroup spanned by <code>T</code>. So you need something like <code>def t : LB1 := ⟨T, group.in_closure.basic (by simp)</code> to define <code>t</code> which is <code>T</code> seen as an element of <code>LB1</code> (we could probably write a nice helper function here).</p>

<a name="187935794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187935794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187935794">Patrick Massot (Feb 11 2020 at 17:54)</a>:</h4>
<p>Then you need to start reading <a href="https://leanprover-community.github.io/mathlib_docs/group_theory/free_group.html" target="_blank" title="https://leanprover-community.github.io/mathlib_docs/group_theory/free_group.html">https://leanprover-community.github.io/mathlib_docs/group_theory/free_group.html</a> or the corresponding Lean file. Unfortunately this was written before we enforced nice documentation requirements. I you like documenting what you understand, you could take this as a challenge to contribute documentation to mathlib.</p>

<a name="187935825"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187935825" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187935825">Patrick Massot (Feb 11 2020 at 17:55)</a>:</h4>
<p>Same applies to <a href="https://leanprover-community.github.io/mathlib_docs/group_theory/presented_group.html" target="_blank" title="https://leanprover-community.github.io/mathlib_docs/group_theory/presented_group.html">https://leanprover-community.github.io/mathlib_docs/group_theory/presented_group.html</a></p>

<a name="187935994"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187935994" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187935994">Patrick Massot (Feb 11 2020 at 17:56)</a>:</h4>
<p>One possible way to state your first two challenges would then be:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">free_group</span>
<span class="kn">open</span> <span class="n">equiv</span> <span class="n">function</span>
<span class="n">open_locale</span> <span class="n">classical</span>
<span class="n">noncomputable</span> <span class="n">theory</span>

<span class="n">def</span> <span class="n">T</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">ℝ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">-</span><span class="mi">1</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">}</span>

<span class="kn">namespace</span> <span class="n">LB1</span>
<span class="c1">-- The subgroup generated by T</span>
<span class="n">def</span> <span class="n">LB1</span> <span class="o">:=</span> <span class="n">group</span><span class="bp">.</span><span class="n">closure</span> <span class="o">({</span><span class="n">T</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">perm</span> <span class="n">ℝ</span><span class="o">))</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">is_subgroup</span> <span class="n">LB1</span> <span class="o">:=</span> <span class="n">group</span><span class="bp">.</span><span class="n">closure</span><span class="bp">.</span><span class="n">is_subgroup</span> <span class="bp">_</span>

<span class="c1">-- The transformation T seen as an element of the subgroup it generates.</span>
<span class="n">def</span> <span class="n">t</span> <span class="o">:</span> <span class="n">LB1</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">T</span><span class="o">,</span> <span class="n">group</span><span class="bp">.</span><span class="n">in_closure</span><span class="bp">.</span><span class="n">basic</span> <span class="o">(</span><span class="k">by</span> <span class="n">simp</span><span class="o">)</span><span class="bp">⟩</span>


<span class="c1">-- Free group on one generator denoted by ()</span>
<span class="bp">@</span><span class="o">[</span><span class="n">derive</span> <span class="n">group</span><span class="o">]</span>
<span class="n">def</span> <span class="n">F₁</span> <span class="o">:=</span> <span class="n">free_group</span> <span class="n">unit</span>

<span class="c1">-- Laurent&#39;s first map</span>
<span class="n">def</span> <span class="n">LB1_map</span> <span class="o">:</span> <span class="n">F₁</span> <span class="bp">→</span> <span class="n">LB1</span> <span class="o">:=</span> <span class="n">free_group</span><span class="bp">.</span><span class="n">to_group</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">u</span> <span class="o">:</span> <span class="n">unit</span><span class="o">,</span> <span class="n">t</span><span class="o">)</span>

<span class="kn">lemma</span> <span class="n">LB1_iso</span> <span class="o">:</span> <span class="n">bijective</span> <span class="n">LB1_map</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kn">end</span> <span class="n">LB1</span>

<span class="n">def</span> <span class="n">S</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">ℝ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="mi">2</span><span class="bp">*</span><span class="n">x</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">/</span><span class="mi">2</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="bp">;</span> <span class="n">ring</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="bp">;</span> <span class="n">ring</span> <span class="o">}</span>

<span class="kn">namespace</span> <span class="n">LB2</span>
<span class="n">def</span> <span class="n">LB2</span> <span class="o">:=</span> <span class="n">group</span><span class="bp">.</span><span class="n">closure</span> <span class="o">({</span><span class="n">T</span><span class="o">,</span> <span class="n">S</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">perm</span> <span class="n">ℝ</span><span class="o">))</span>
<span class="kn">instance</span> <span class="o">:</span> <span class="n">is_subgroup</span> <span class="n">LB2</span> <span class="o">:=</span> <span class="n">group</span><span class="bp">.</span><span class="n">closure</span><span class="bp">.</span><span class="n">is_subgroup</span> <span class="bp">_</span>

<span class="n">def</span> <span class="n">t</span> <span class="o">:</span> <span class="n">LB2</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">T</span><span class="o">,</span> <span class="n">group</span><span class="bp">.</span><span class="n">in_closure</span><span class="bp">.</span><span class="n">basic</span> <span class="o">(</span><span class="k">by</span> <span class="n">simp</span><span class="o">)</span><span class="bp">⟩</span>
<span class="n">def</span> <span class="n">s</span> <span class="o">:</span> <span class="n">LB2</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="n">S</span><span class="o">,</span> <span class="n">group</span><span class="bp">.</span><span class="n">in_closure</span><span class="bp">.</span><span class="n">basic</span> <span class="o">(</span><span class="k">by</span> <span class="n">simp</span><span class="o">)</span><span class="bp">⟩</span>

<span class="c1">-- The free group generated by booleans tt and ff</span>
<span class="bp">@</span><span class="o">[</span><span class="n">derive</span> <span class="n">group</span><span class="o">]</span>
<span class="n">def</span> <span class="n">F₂</span> <span class="o">:=</span> <span class="n">free_group</span> <span class="n">bool</span>

<span class="c1">-- First generator of F</span>
<span class="n">def</span> <span class="n">a</span> <span class="o">:</span> <span class="n">F₂</span> <span class="o">:=</span> <span class="n">free_group</span><span class="bp">.</span><span class="n">mk</span> <span class="o">[(</span><span class="n">tt</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span>
<span class="n">def</span> <span class="n">b</span> <span class="o">:</span> <span class="n">F₂</span> <span class="o">:=</span> <span class="n">free_group</span><span class="bp">.</span><span class="n">mk</span> <span class="o">[(</span><span class="n">ff</span><span class="o">,</span> <span class="n">tt</span><span class="o">)]</span>

<span class="c1">-- Laurent&#39;s second map</span>
<span class="n">def</span> <span class="n">LB2_map</span> <span class="o">:</span> <span class="n">F₂</span> <span class="bp">→</span> <span class="n">LB2</span> <span class="o">:=</span> <span class="n">free_group</span><span class="bp">.</span><span class="n">to_group</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">b</span><span class="o">,</span> <span class="k">if</span> <span class="n">b</span> <span class="k">then</span> <span class="n">t</span> <span class="k">else</span> <span class="n">s</span><span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">is_group_hom</span> <span class="n">LB2_map</span> <span class="o">:=</span> <span class="n">free_group</span><span class="bp">.</span><span class="n">to_group</span><span class="bp">.</span><span class="n">is_group_hom</span>

<span class="kn">lemma</span> <span class="n">surj</span> <span class="o">:</span> <span class="n">surjective</span> <span class="n">LB2_map</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kn">lemma</span> <span class="n">ker</span> <span class="o">:</span> <span class="n">is_group_hom</span><span class="bp">.</span><span class="n">ker</span> <span class="n">LB2_map</span> <span class="bp">=</span> <span class="n">group</span><span class="bp">.</span><span class="n">normal_closure</span> <span class="o">{</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="bp">*</span><span class="o">(</span><span class="n">b</span><span class="bp">*</span><span class="n">a</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span><span class="bp">⁻¹</span><span class="o">}</span> <span class="o">:=</span>
<span class="n">sorry</span>
<span class="kn">end</span> <span class="n">LB2</span>
</pre></div>

<a name="187936064"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187936064" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187936064">Patrick Massot (Feb 11 2020 at 17:57)</a>:</h4>
<p>Understanding that piece should already give you plenty of questions to ask here. For everybody else: note there is another mysterious instance that type class instance resolution is not finding.</p>

<a name="187936103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/First%20problems%20in%20group%20theory/near/187936103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/16588Firstproblemsingrouptheory.html#187936103">Rob Lewis (Feb 11 2020 at 17:58)</a>:</h4>
<blockquote>
<p>Question <span class="user-mention silent" data-user-id="110049">Mario Carneiro</span> and <span class="user-mention silent" data-user-id="110596">Rob Lewis</span>  who seem to be around. Do you have any idea why Lean doesn't immediately get a subgroup instance on that group closure?</p>
</blockquote>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">group_theory</span><span class="bp">.</span><span class="n">perm</span><span class="bp">.</span><span class="n">all</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">open</span> <span class="n">tactic</span> <span class="n">equiv</span>

<span class="n">def</span> <span class="n">T</span> <span class="o">:</span> <span class="n">perm</span> <span class="n">ℝ</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">+</span><span class="mi">1</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span><span class="bp">-</span><span class="mi">1</span><span class="o">,</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="o">}</span>

<span class="kn">example</span> <span class="o">:</span> <span class="n">is_subgroup</span> <span class="o">(</span><span class="n">group</span><span class="bp">.</span><span class="n">closure</span> <span class="o">({</span><span class="n">T</span><span class="o">}</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">perm</span> <span class="n">ℝ</span><span class="o">)))</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">apply_instance</span>
</pre></div>


<p>seems fine?</p>


{% endraw %}

{% include archive_update.html %}