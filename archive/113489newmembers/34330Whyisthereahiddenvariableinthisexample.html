---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html">Why is there a hidden variable in this example?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="179209828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Why%20is%20there%20a%20hidden%20variable%20in%20this%20example%3F/near/179209828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html#179209828">Marko Grdinić (Oct 28 2019 at 08:16)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">rat</span>

<span class="kn">inductive</span> <span class="n">InfosetedGame</span> <span class="o">(</span><span class="n">players</span> <span class="o">:</span> <span class="n">list</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span><span class="n">infoset_count</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">(</span><span class="n">infoset_sizes</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">infoset_count</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">Terminal</span> <span class="o">(</span><span class="n">player</span> <span class="o">:</span> <span class="o">{</span><span class="n">i</span> <span class="bp">//</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">players</span><span class="o">})</span> <span class="o">(</span><span class="n">reward</span> <span class="o">:</span> <span class="n">rat</span><span class="o">)</span> <span class="o">:</span> <span class="n">InfosetedGame</span>

<span class="n">def</span> <span class="n">utility</span> <span class="o">(</span><span class="n">infoset_count</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">infoset_sizes</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">infoset_count</span> <span class="bp">→</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">InfosetedGame</span> <span class="o">[</span><span class="s2">&quot;One&quot;</span><span class="o">,</span> <span class="s2">&quot;Two&quot;</span><span class="o">]</span> <span class="n">infoset_sizes</span> <span class="bp">→</span> <span class="n">rat</span>
    <span class="bp">|</span> <span class="o">(</span><span class="n">InfosetedGame</span><span class="bp">.</span><span class="n">Terminal</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="n">a</span>
</pre></div>


<div class="codehilite"><pre><span></span>equation type mismatch, term
  infoset_sizes
has type
  fin infoset_count → ℕ
but is expected to have type
  ℚ
</pre></div>


<p>And furthermore if I replace <code>a</code> with <code>by {}</code>...</p>
<div class="codehilite"><pre><span></span>Tactic State
1 goal
infoset_count : ℕ,
infoset_sizes : fin infoset_count → ℕ,
utility : InfosetedGame [&quot;One&quot;, &quot;Two&quot;] infoset_sizes → ℚ,
b : {i // i ∈ [&quot;One&quot;, &quot;Two&quot;]},
c : ℚ
⊢ ℚ
</pre></div>


<p>For some reason <code>a</code> is not even there. This definitely seems like some kind of compiler bug to me.</p>

<a name="179218908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Why%20is%20there%20a%20hidden%20variable%20in%20this%20example%3F/near/179218908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html#179218908">Kevin Buzzard (Oct 28 2019 at 10:35)</a>:</h4>
<p>I didn't look carefully at this question but yes, there is an <code>a</code> bug in 3.4.2. Try changing the name of your variable?</p>

<a name="179224810"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Why%20is%20there%20a%20hidden%20variable%20in%20this%20example%3F/near/179224810" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html#179224810">Marko Grdinić (Oct 28 2019 at 12:11)</a>:</h4>
<p>It makes no difference, either in the error message for the first example or the goal state for the second.</p>

<a name="179225683"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Why%20is%20there%20a%20hidden%20variable%20in%20this%20example%3F/near/179225683" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html#179225683">Chris Hughes (Oct 28 2019 at 12:26)</a>:</h4>
<p>In this code <code>a</code> has to be equal to <code>infoset_sizes</code> in order for <code>Terminal a b c</code> to have the right type. The equation compiler seems to have replaced <code>a</code> with <code>infoset_sizes</code> for this reason.</p>

<a name="179227082"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Why%20is%20there%20a%20hidden%20variable%20in%20this%20example%3F/near/179227082" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html#179227082">Marko Grdinić (Oct 28 2019 at 12:48)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> <br>
Yeah, but that is besides the point as that binding should not even be there in the first place. <code>Terminal</code> should only have two fields as far as I can see.</p>

<a name="179227439"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Why%20is%20there%20a%20hidden%20variable%20in%20this%20example%3F/near/179227439" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html#179227439">Mario Carneiro (Oct 28 2019 at 12:54)</a>:</h4>
<p>It has three explicit args; the first is <code>infoset_sizes</code></p>

<a name="179227465"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Why%20is%20there%20a%20hidden%20variable%20in%20this%20example%3F/near/179227465" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html#179227465">Mario Carneiro (Oct 28 2019 at 12:54)</a>:</h4>
<p>parameters are arguments to the constructors too</p>

<a name="179227591"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Why%20is%20there%20a%20hidden%20variable%20in%20this%20example%3F/near/179227591" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html#179227591">Mario Carneiro (Oct 28 2019 at 12:56)</a>:</h4>
<p>you should just leave the first argument as <code>_</code> since it is forced</p>


{% endraw %}

{% include archive_update.html %}