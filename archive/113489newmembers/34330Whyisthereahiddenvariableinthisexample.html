---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html">Why is there a hidden variable in this example?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="179209828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Why%20is%20there%20a%20hidden%20variable%20in%20this%20example%3F/near/179209828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html#179209828">Marko Grdinić (Oct 28 2019 at 08:16)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">rat</span>

<span class="kn">inductive</span> <span class="n">InfosetedGame</span> <span class="o">(</span><span class="n">players</span> <span class="o">:</span> <span class="n">list</span> <span class="n">string</span><span class="o">)</span> <span class="o">{</span><span class="n">infoset_count</span> <span class="o">:</span> <span class="n">nat</span><span class="o">}</span> <span class="o">(</span><span class="n">infoset_sizes</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">infoset_count</span> <span class="bp">→</span> <span class="bp">ℕ</span><span class="o">)</span>
<span class="bp">|</span> <span class="n">Terminal</span> <span class="o">(</span><span class="n">player</span> <span class="o">:</span> <span class="o">{</span><span class="n">i</span> <span class="bp">//</span> <span class="n">i</span> <span class="err">∈</span> <span class="n">players</span><span class="o">})</span> <span class="o">(</span><span class="n">reward</span> <span class="o">:</span> <span class="n">rat</span><span class="o">)</span> <span class="o">:</span> <span class="n">InfosetedGame</span>

<span class="n">def</span> <span class="n">utility</span> <span class="o">(</span><span class="n">infoset_count</span> <span class="o">:</span> <span class="n">nat</span><span class="o">)</span> <span class="o">(</span><span class="n">infoset_sizes</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">infoset_count</span> <span class="bp">→</span> <span class="n">nat</span><span class="o">)</span> <span class="o">:</span> <span class="n">InfosetedGame</span> <span class="o">[</span><span class="s2">&quot;One&quot;</span><span class="o">,</span> <span class="s2">&quot;Two&quot;</span><span class="o">]</span> <span class="n">infoset_sizes</span> <span class="bp">→</span> <span class="n">rat</span>
    <span class="bp">|</span> <span class="o">(</span><span class="n">InfosetedGame</span><span class="bp">.</span><span class="n">Terminal</span> <span class="n">a</span> <span class="n">b</span> <span class="n">c</span><span class="o">)</span> <span class="o">:=</span> <span class="n">a</span>
</pre></div>


<div class="codehilite"><pre><span></span>equation type mismatch, term
  infoset_sizes
has type
  fin infoset_count → ℕ
but is expected to have type
  ℚ
</pre></div>


<p>And furthermore if I replace <code>a</code> with <code>by {}</code>...</p>
<div class="codehilite"><pre><span></span>Tactic State
1 goal
infoset_count : ℕ,
infoset_sizes : fin infoset_count → ℕ,
utility : InfosetedGame [&quot;One&quot;, &quot;Two&quot;] infoset_sizes → ℚ,
b : {i // i ∈ [&quot;One&quot;, &quot;Two&quot;]},
c : ℚ
⊢ ℚ
</pre></div>


<p>For some reason <code>a</code> is not even there. This definitely seems like some kind of compiler bug to me.</p>

<a name="179218908"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Why%20is%20there%20a%20hidden%20variable%20in%20this%20example%3F/near/179218908" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/34330Whyisthereahiddenvariableinthisexample.html#179218908">Kevin Buzzard (Oct 28 2019 at 10:35)</a>:</h4>
<p>I didn't look carefully at this question but yes, there is an <code>a</code> bug in 3.4.2. Try changing the name of your variable?</p>


{% endraw %}

{% include archive_update.html %}