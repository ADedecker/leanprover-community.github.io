---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/67748WSLubuntuerror.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/67748WSLubuntuerror.html">WSL ubuntu error</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="182132062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/WSL%20ubuntu%20error/near/182132062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/67748WSLubuntuerror.html#182132062">Jason KY. (Nov 28 2019 at 19:39)</a>:</h4>
<p>Hi! <br>
I'm trying to install mathlib on Ubuntu running in a WSL (in order to use format lean) but this happens,</p>
<div class="codehilite"><pre><span></span>curl https://raw.githubusercontent.com/leanprover-community/mathlib-tools/master/scripts/remote-install-update-mathlib.sh -sSf | bash
Installing python dependencies (at user level)
/home/jasonky/.virtualenvs/format_lean/bin/pip3
ERROR: Can not perform a &#39;--user&#39; install. User site-packages are not visible in this virtualenv.
</pre></div>


<p>Thanks in advance for any help!</p>

<a name="182133916"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/WSL%20ubuntu%20error/near/182133916" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/67748WSLubuntuerror.html#182133916">Andrew Ashworth (Nov 28 2019 at 20:20)</a>:</h4>
<p>This is a bit non-standard. You will need to install mathlib the standard way via leanpkg, and then compile it. The problem is with your use of a virtual environment, and a conflict with pip.</p>

<a name="182134025"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/WSL%20ubuntu%20error/near/182134025" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/67748WSLubuntuerror.html#182134025">Jason KY. (Nov 28 2019 at 20:23)</a>:</h4>
<p>I see... Sadly format lean requires the virtual environment to work :( But I guess I can always compile the LEAN code individually and then compile (and it works!)</p>

<a name="182134167"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/WSL%20ubuntu%20error/near/182134167" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/67748WSLubuntuerror.html#182134167">Andrew Ashworth (Nov 28 2019 at 20:26)</a>:</h4>
<p>I don't think it would be a big deal if you have some shell scripting experience to fix <code>remote-install-update-mathlib</code>? I can't help you there, though, since I personally do not use the community mathlib update scripts.</p>

<a name="182134981"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/WSL%20ubuntu%20error/near/182134981" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/67748WSLubuntuerror.html#182134981">Jason KY. (Nov 28 2019 at 20:46)</a>:</h4>
<p>Ahh.. I'll see if I can make something happen! Thanks for the help!</p>

<a name="182233000"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/WSL%20ubuntu%20error/near/182233000" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/67748WSLubuntuerror.html#182233000">Patrick Massot (Nov 30 2019 at 10:09)</a>:</h4>
<p><span class="user-mention" data-user-id="243312">@Jason KY.</span>  Why do you say <code>format_lean</code> <em>needs</em> a virtual env? The documentation may recommend it, but there is nothing preventing you to install it in your global user space or even system-wide.</p>

<a name="182233280"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/WSL%20ubuntu%20error/near/182233280" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/67748WSLubuntuerror.html#182233280">Patrick Massot (Nov 30 2019 at 10:18)</a>:</h4>
<p>It's tricky to support all kinds of setup. We really need to write more levels of instructions. We need both simpler instructions for people who want Lean+precompiled mathlib without all the tooling and more detailed instructions. However the ultimate documentation for those mathlib tools are the bash scripts and python source code. That <code>remote-install-update-mathlib</code> actually does very little, especially if you want only <code>update-mathlib</code>, which is by far the most useful tool here. In the end, you want to be able to run the python program <code>https://github.com/leanprover-community/mathlib-tools/blob/master/scripts/update-mathlib.py</code>. So it needs to be found by your system, and its python dependencies need to be found. Every trick to make that happen in any given setup is allowed.</p>
<p>The external dependencies are listed <a href="https://github.com/leanprover-community/mathlib-tools/blob/3a5af79dde17b20296c58863ac234f9945e11e36/scripts/remote-install-update-mathlib.sh#L5" target="_blank" title="https://github.com/leanprover-community/mathlib-tools/blob/3a5af79dde17b20296c58863ac234f9945e11e36/scripts/remote-install-update-mathlib.sh#L5">here</a> as they appear on <a href="https://pypi.org" target="_blank" title="https://pypi.org">PyPi</a> and can be fetched by the python package installer <code>pip</code>. I think the only internal dependency is <a href="https://github.com/leanprover-community/mathlib-tools/blob/master/scripts/auth_github.py" target="_blank" title="https://github.com/leanprover-community/mathlib-tools/blob/master/scripts/auth_github.py">https://github.com/leanprover-community/mathlib-tools/blob/master/scripts/auth_github.py</a>.</p>


{% endraw %}

{% include archive_update.html %}