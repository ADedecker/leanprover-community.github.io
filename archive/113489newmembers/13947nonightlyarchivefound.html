---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/13947nonightlyarchivefound.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html">no nightly archive found</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="180974655"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/180974655" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#180974655">Luis O'Shea (Nov 17 2019 at 22:01)</a>:</h4>
<p>Downloading a local copy of KB's <a href="https://github.com/ImperialCollegeLondon/M1F_example_sheets" target="_blank" title="https://github.com/ImperialCollegeLondon/M1F_example_sheets">M1F Example Sheets</a> repo I ran into a small problem when running <code>update-mathlib</code> which errored out saying "Error: no nightly archive found". I believe this is benign; at any rate I was able to run <code>leanpkg build</code> successfully, and the lean files seemed to open in VS Code without errors. Assuming this is as expected, I'm mostly reporting this for other beginners (like me).</p>
<p>Below is what I did and its output:</p>
<div class="codehilite"><pre><span></span>$ git clone https://github.com/ImperialCollegeLondon/M1F_example_sheets.git
Cloning into <span class="s1">&#39;M1F_example_sheets&#39;</span>...
remote: Enumerating objects: <span class="m">12</span>, <span class="k">done</span>.
remote: Counting objects: <span class="m">100</span>% <span class="o">(</span><span class="m">12</span>/12<span class="o">)</span>, <span class="k">done</span>.
remote: Compressing objects: <span class="m">100</span>% <span class="o">(</span><span class="m">12</span>/12<span class="o">)</span>, <span class="k">done</span>.
remote: Total <span class="m">942</span> <span class="o">(</span>delta <span class="m">4</span><span class="o">)</span>, reused <span class="m">0</span> <span class="o">(</span>delta <span class="m">0</span><span class="o">)</span>, pack-reused <span class="m">930</span>
Receiving objects: <span class="m">100</span>% <span class="o">(</span><span class="m">942</span>/942<span class="o">)</span>, <span class="m">1</span>.30 MiB <span class="p">|</span> <span class="m">7</span>.42 MiB/s, <span class="k">done</span>.
Resolving deltas: <span class="m">100</span>% <span class="o">(</span><span class="m">514</span>/514<span class="o">)</span>, <span class="k">done</span>.

$ <span class="nb">cd</span> M1F_example_sheets/

$ leanpkg configure
info: downloading component <span class="s1">&#39;lean&#39;</span>
info: installing component <span class="s1">&#39;lean&#39;</span>
configuring M1F_2018-19 <span class="m">0</span>.1
mathlib: cloning https://github.com/leanprover/mathlib to _target/deps/mathlib
&gt; mkdir -p _target/deps/mathlib
&gt; git clone https://github.com/leanprover/mathlib _target/deps/mathlib
Cloning into <span class="s1">&#39;_target/deps/mathlib&#39;</span>...
remote: Enumerating objects: <span class="m">13</span>, <span class="k">done</span>.
remote: Counting objects: <span class="m">100</span>% <span class="o">(</span><span class="m">13</span>/13<span class="o">)</span>, <span class="k">done</span>.
remote: Compressing objects: <span class="m">100</span>% <span class="o">(</span><span class="m">13</span>/13<span class="o">)</span>, <span class="k">done</span>.
remote: Total <span class="m">27510</span> <span class="o">(</span>delta <span class="m">3</span><span class="o">)</span>, reused <span class="m">1</span> <span class="o">(</span>delta <span class="m">0</span><span class="o">)</span>, pack-reused <span class="m">27497</span>
Receiving objects: <span class="m">100</span>% <span class="o">(</span><span class="m">27510</span>/27510<span class="o">)</span>, <span class="m">13</span>.64 MiB <span class="p">|</span> <span class="m">11</span>.51 MiB/s, <span class="k">done</span>.
Resolving deltas: <span class="m">100</span>% <span class="o">(</span><span class="m">20453</span>/20453<span class="o">)</span>, <span class="k">done</span>.
&gt; git checkout --detach 2a86b06b1853493ab4fb381514e7d1a3f4dfc54b    <span class="c1"># in directory _target/deps/mathlib</span>
HEAD is now at 2a86b06b fix<span class="o">(</span>order/filter<span class="o">)</span>: tendsto_at_top only requires preorder not partial_order

$ update-mathlib
Info: No github section found in <span class="s1">&#39;git config&#39;</span>, we will use GitHub with no authentication
Querying GitHub...
Error: no nightly archive found

$ leanpkg build
configuring M1F_2018-19 <span class="m">0</span>.1
mathlib: trying to update _target/deps/mathlib to revision 2a86b06b1853493ab4fb381514e7d1a3f4dfc54b
&gt; git checkout --detach 2a86b06b1853493ab4fb381514e7d1a3f4dfc54b    <span class="c1"># in directory _target/deps/mathlib</span>
HEAD is now at 2a86b06b fix<span class="o">(</span>order/filter<span class="o">)</span>: tendsto_at_top only requires preorder not partial_order
&gt; lean --make src
<span class="c1"># Lots of warnings from files in src/ about declarations that use sorry.  No errors.</span>
</pre></div>

<a name="180976538"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/180976538" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#180976538">Kevin Buzzard (Nov 17 2019 at 22:58)</a>:</h4>
<p>I can quite believe that that repo is older than the update-mathlib set-up.</p>

<a name="180976551"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/180976551" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#180976551">Kevin Buzzard (Nov 17 2019 at 22:59)</a>:</h4>
<p>Just do leanpkg upgrade or update or whatever it is that gets new mathlib. Then it might work</p>

<a name="180987399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/180987399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#180987399">Luis O'Shea (Nov 18 2019 at 04:27)</a>:</h4>
<p>I did a <code>leanpkg upgrade</code> (with no problems) and among other things it generated the following diff to  <code>leanpkg.toml</code>:</p>
<div class="codehilite"><pre><span></span><span class="gd">-mathlib = {git = &quot;https://github.com/leanprover/mathlib&quot;, rev = &quot;2a86b06b1853493ab4fb381514e7d1a3f4dfc54b&quot;}</span>
<span class="gi">+mathlib = {git = &quot;https://github.com/leanprover/mathlib&quot;, rev = &quot;7c5f282dcfe1e0f20050f4aae3b6bdf77a652a13&quot;}</span>
</pre></div>


<p>However <code>update-mathlib</code> continued to complain about "Error: no nightly archive found". Also <code>leanpkg build</code> errored out. So I think the right recipe for this repo is to do as I did the first time (which at the end of the day seems to work).</p>

<a name="180989743"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/180989743" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#180989743">Simon Hudon (Nov 18 2019 at 05:33)</a>:</h4>
<p>What is the rest of your <code>leanpkg.toml</code> file?</p>

<a name="181072536"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/181072536" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#181072536">Luis O'Shea (Nov 19 2019 at 00:55)</a>:</h4>
<p>My <code>leanpkg.toml</code> is</p>
<div class="codehilite"><pre><span></span>[package]
name = &quot;M1F_2018-19&quot;
version = &quot;0.1&quot;
lean_version = &quot;nightly-2018-06-21&quot;
path = &quot;src&quot;

[dependencies]
mathlib = {git = &quot;https://github.com/leanprover/mathlib&quot;, rev = &quot;7c5f282dcfe1e0f20050f4aae3b6bdf77a652a13&quot;}
</pre></div>

<a name="181072823"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/181072823" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#181072823">Bryan Gin-ge Chen (Nov 19 2019 at 01:01)</a>:</h4>
<p>This is probably the offending line:</p>
<blockquote>
<p><code>lean_version = "nightly-2018-06-21"</code></p>
</blockquote>
<p>This is a really old version of Lean. Currently <code>update-mathlib</code> can only supply Lean binaries for Lean 3.4.2.</p>

<a name="181073018"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/no%20nightly%20archive%20found/near/181073018" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/13947nonightlyarchivefound.html#181073018">Bryan Gin-ge Chen (Nov 19 2019 at 01:05)</a>:</h4>
<p>Furthermore, the reason that <code>leanpkg build</code> errored out after <code>leanpkg upgrade</code> is that recent versions of mathlib are not compatible with versions of Lean before 3.4.2. So, if you change that line to this:</p>
<blockquote>
<p><code>lean_version = "3.4.2"</code></p>
</blockquote>
<p>Then both <code>leanpkg build</code> and <code>update-mathlib</code> should both work again.</p>


{% endraw %}

{% include archive_update.html %}