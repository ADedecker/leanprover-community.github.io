---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/93401Proofreview.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html">Proof review</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="179674330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179674330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179674330">Bhavik Mehta (Nov 01 2019 at 23:31)</a>:</h4>
<p>I finally finished my first proper proof in lean (other than the natural numbers game): <a href="https://github.com/b-mehta/lean-experiments/blob/master/number_theory_q5.lean" target="_blank" title="https://github.com/b-mehta/lean-experiments/blob/master/number_theory_q5.lean">https://github.com/b-mehta/lean-experiments/blob/master/number_theory_q5.lean</a>. Any reviews/improvements/comments appreciated!</p>

<a name="179677949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179677949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179677949">Kevin Buzzard (Nov 02 2019 at 01:05)</a>:</h4>
<p>Hey that is great! If it compiles I'm happy :D</p>

<a name="179679078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179679078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179679078">Kevin Buzzard (Nov 02 2019 at 01:38)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="n">prime</span> <span class="mi">11</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">norm_num</span>
<span class="kn">example</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">prime</span> <span class="o">(</span><span class="mi">2</span><span class="err">^</span><span class="mi">11</span><span class="bp">-</span><span class="mi">1</span><span class="o">))</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">norm_num</span>
</pre></div>

<a name="179679085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179679085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179679085">Kevin Buzzard (Nov 02 2019 at 01:39)</a>:</h4>
<p>[spoiler alert]</p>

<a name="179679143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179679143" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179679143">Kevin Buzzard (Nov 02 2019 at 01:40)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">prime</span> <span class="n">n</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">prime</span> <span class="o">(</span><span class="mi">2</span><span class="err">^</span><span class="n">n</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">use</span> <span class="mi">11</span><span class="bp">;</span> <span class="n">norm_num</span>
</pre></div>

<a name="179680008"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179680008" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179680008">Kevin Buzzard (Nov 02 2019 at 02:05)</a>:</h4>
<p><a href="https://github.com/b-mehta/lean-experiments/blob/669f0d464167db055836768d94af88f30da88ed9/number_theory_q5.lean#L10" target="_blank" title="https://github.com/b-mehta/lean-experiments/blob/669f0d464167db055836768d94af88f30da88ed9/number_theory_q5.lean#L10">https://github.com/b-mehta/lean-experiments/blob/669f0d464167db055836768d94af88f30da88ed9/number_theory_q5.lean#L10</a> is your proof of </p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">division_lemma</span> <span class="o">{</span> <span class="n">a</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">}</span> <span class="o">(</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span> <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="err">∣</span> <span class="n">a</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span>
</pre></div>


<p>I want to do this using <code>ring</code> but stupid natural number subtraction gets in the way. Is there a one-line command nowadays which fills in this sorry nowadays?</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">division_lemma</span> <span class="o">{</span> <span class="n">a</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">}</span> <span class="o">(</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span> <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="err">∣</span> <span class="n">a</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
    <span class="n">use</span> <span class="mi">0</span><span class="o">,</span> <span class="n">refl</span><span class="o">,</span>
  <span class="n">cases</span> <span class="n">hd</span> <span class="k">with</span> <span class="n">q</span> <span class="n">hq</span><span class="o">,</span>
  <span class="n">use</span> <span class="n">q</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span>
  <span class="c1">-- need some extra tidying because need to use IH as we don&#39;t have Groebner bases</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">,</span> <span class="err">←</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="err">←</span><span class="n">hq</span><span class="o">],</span>
  <span class="c1">-- ⊢ a ^ d * a - 1 = (a ^ d - 1) * a + (a - 1) * 1</span>
  <span class="c1">-- ring doesn&#39;t work I think because of natural number subtraction,</span>
  <span class="n">suffices</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="o">(</span><span class="n">e</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">(</span><span class="n">hb</span> <span class="o">:</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="bp">ℤ</span><span class="o">)</span> <span class="bp">≤</span> <span class="n">b</span><span class="o">),</span>
    <span class="n">b</span> <span class="err">^</span> <span class="n">e</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">=</span> <span class="o">(</span><span class="n">b</span> <span class="err">^</span> <span class="n">e</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="n">b</span> <span class="bp">+</span> <span class="o">(</span><span class="n">b</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">,</span>
    <span class="n">sorry</span><span class="o">,</span>
  <span class="n">intros</span><span class="o">,</span> <span class="n">ring</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="179681218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179681218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179681218">Mario Carneiro (Nov 02 2019 at 02:44)</a>:</h4>
<p>did you try casting the equation to int, using norm_cast, then ring?</p>

<a name="179681333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179681333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179681333">Mario Carneiro (Nov 02 2019 at 02:48)</a>:</h4>
<blockquote>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">prime</span> <span class="n">n</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">prime</span> <span class="o">(</span><span class="mi">2</span><span class="err">^</span><span class="n">n</span><span class="bp">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">use</span> <span class="mi">11</span><span class="bp">;</span> <span class="n">norm_num</span>
</pre></div>


</blockquote>
<p>I just want to say how happy I am that this kind of thing is basically a solved problem today. I have a paper about how much of a struggle this was in 2015: <a href="https://arxiv.org/abs/1503.02349" target="_blank" title="https://arxiv.org/abs/1503.02349">https://arxiv.org/abs/1503.02349</a></p>

<a name="179681512"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179681512" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179681512">Kevin Buzzard (Nov 02 2019 at 02:54)</a>:</h4>
<p>By the way <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> don't use <code>a ≥ 1</code>, always use<code>1 ≤ a</code> or you're asking for trouble. Unfold this layer of abstraction yourself.</p>

<a name="179681721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179681721" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179681721">Kevin Buzzard (Nov 02 2019 at 02:59)</a>:</h4>
<blockquote>
<p>did you try casting the equation to int, using norm_cast, then ring?</p>
</blockquote>
<p>I can't figure out how to make <code>norm_cast</code> do it because there is stupid natural number subtraction. I realise now that  my sorry is perhaps harder than it looks. I am not sure we can get away without proving that b^e*b-1 really is one less if b&gt;=1.</p>

<a name="179681805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179681805" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179681805">Mario Carneiro (Nov 02 2019 at 03:00)</a>:</h4>
<p>If you apply <code>int.coe_nat_inj</code> and then simp and rw with <code>int.coe_nat_sub</code>, you should get the requisite side conditions</p>

<a name="179681907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179681907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179681907">Mario Carneiro (Nov 02 2019 at 03:04)</a>:</h4>
<p>For some reason the <code>use q * a + 1,</code> line takes forever</p>

<a name="179681948"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179681948" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179681948">Mario Carneiro (Nov 02 2019 at 03:04)</a>:</h4>
<p><code>existsi q * a + 1</code> is way faster</p>

<a name="179681958"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179681958" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179681958">Kevin Buzzard (Nov 02 2019 at 03:04)</a>:</h4>
<p>?!</p>

<a name="179682037"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682037" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682037">Kevin Buzzard (Nov 02 2019 at 03:06)</a>:</h4>
<div class="codehilite"><pre><span></span>  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">mul_sub_right_distrib</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">],</span>
  <span class="n">apply</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_sub</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_sub</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_sub</span><span class="o">,</span>
  <span class="n">simp</span><span class="o">,</span>
  <span class="n">ring</span><span class="o">,</span>
</pre></div>


<p>Killed it. Is this OK for mathlib by the way?</p>

<a name="179682059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682059">Kevin Buzzard (Nov 02 2019 at 03:07)</a>:</h4>
<div class="codehilite"><pre><span></span>3 goals
a : ℕ,
ha : 1 ≤ a,
d q : ℕ,
hq : a ^ d - 1 = (a - 1) * q
⊢ a ≤ a ^ d * a

a : ℕ,
ha : 1 ≤ a,
d q : ℕ,
hq : a ^ d - 1 = (a - 1) * q
⊢ 1 ≤ a

a : ℕ,
ha : 1 ≤ a,
d q : ℕ,
hq : a ^ d - 1 = (a - 1) * q
⊢ 1 ≤ a ^ d * a
</pre></div>


<p><em>sigh</em></p>

<a name="179682136"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682136" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682136">Mario Carneiro (Nov 02 2019 at 03:09)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">division_lemma</span> <span class="o">{</span> <span class="n">a</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">}</span> <span class="o">(</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span> <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="err">∣</span> <span class="n">a</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">d</span> <span class="n">hd</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">use</span> <span class="mi">0</span><span class="o">,</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="n">cases</span> <span class="n">hd</span> <span class="k">with</span> <span class="n">q</span> <span class="n">hq</span><span class="o">,</span>
  <span class="n">existsi</span> <span class="n">q</span> <span class="bp">*</span> <span class="n">a</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">,</span> <span class="err">←</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="err">←</span><span class="n">hq</span><span class="o">,</span> <span class="err">←</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_inj&#39;</span><span class="o">],</span>
  <span class="k">have</span> <span class="n">hp</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">a</span> <span class="err">^</span> <span class="n">d</span> <span class="o">:=</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_pos</span> <span class="n">ha</span> <span class="bp">_</span><span class="o">,</span>
  <span class="k">have</span> <span class="n">hpa</span> <span class="o">:</span> <span class="mi">1</span> <span class="bp">≤</span> <span class="n">a</span> <span class="err">^</span> <span class="n">d</span> <span class="bp">*</span> <span class="n">a</span> <span class="o">:=</span> <span class="bp">@</span><span class="n">mul_pos</span> <span class="bp">ℕ</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="n">hp</span> <span class="n">ha</span><span class="o">,</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_sub</span> <span class="n">ha</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_sub</span> <span class="n">hp</span><span class="o">,</span> <span class="n">int</span><span class="bp">.</span><span class="n">coe_nat_sub</span> <span class="n">hpa</span><span class="o">],</span>
  <span class="n">ring</span>
<span class="kn">end</span>
</pre></div>

<a name="179682195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682195">Kevin Buzzard (Nov 02 2019 at 03:10)</a>:</h4>
<p><span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> 's proof is shorter ;-)</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">division_lemma</span> <span class="o">{</span> <span class="n">a</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">}</span> <span class="o">(</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span> <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="err">∣</span> <span class="n">a</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">dvd_of_mod_eq_zero</span><span class="o">,</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span>
  <span class="n">suffices</span><span class="o">:</span> <span class="o">(</span><span class="n">a</span><span class="err">^</span><span class="n">n</span> <span class="bp">*</span> <span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="err">%</span> <span class="o">(</span><span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span>
    <span class="k">by</span> <span class="n">rwa</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_add_cancel</span> <span class="n">ha</span> <span class="n">at</span> <span class="n">this</span><span class="o">,</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">mul_add</span><span class="o">,</span> <span class="n">mul_one</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">add_sub_assoc</span> <span class="o">(</span><span class="n">pow_pos</span> <span class="n">ha</span> <span class="bp">_</span><span class="o">)],</span> <span class="n">simpa</span>
<span class="kn">end</span>
</pre></div>

<a name="179682210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682210">Mario Carneiro (Nov 02 2019 at 03:11)</a>:</h4>
<p>I'm not competing, I'm showing how to complete your <code>sorry</code></p>

<a name="179682267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682267">Kevin Buzzard (Nov 02 2019 at 03:12)</a>:</h4>
<p>and only one non-terminal <code>simp</code> ;-)</p>

<a name="179682286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682286" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682286">Mario Carneiro (Nov 02 2019 at 03:13)</a>:</h4>
<p>oh, I can get rid of the <code>rw</code> in this version</p>

<a name="179682289"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682289" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682289">Mario Carneiro (Nov 02 2019 at 03:13)</a>:</h4>
<p>so no more nonterminal simp (<code>simp, ring</code> doesn't count :P)</p>

<a name="179682441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682441">Bryan Gin-ge Chen (Nov 02 2019 at 03:16)</a>:</h4>
<p><span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> 's first simp is terminal too, since it kills off the base case of the induction.</p>

<a name="179682546"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682546" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682546">Mario Carneiro (Nov 02 2019 at 03:18)</a>:</h4>
<p>That should go in braces though, as a style matter</p>

<a name="179682593"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682593" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682593">Kenny Lau (Nov 02 2019 at 03:19)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">division_lemma</span> <span class="o">{</span> <span class="n">a</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">}</span> <span class="o">(</span> <span class="n">ha</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">≥</span> <span class="mi">1</span> <span class="o">)</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">-</span> <span class="mi">1</span> <span class="err">∣</span> <span class="n">a</span> <span class="err">^</span> <span class="n">n</span> <span class="bp">-</span> <span class="mi">1</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">ih</span><span class="o">,</span> <span class="o">{</span> <span class="n">exact</span> <span class="n">dvd_zero</span> <span class="bp">_</span> <span class="o">},</span>
  <span class="n">convert</span> <span class="n">dvd_add</span> <span class="o">(</span><span class="n">dvd_mul_of_dvd_left</span> <span class="n">ih</span> <span class="n">a</span><span class="o">)</span> <span class="o">(</span><span class="n">dvd_refl</span> <span class="bp">_</span><span class="o">),</span>
  <span class="n">conv_lhs</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">[</span><span class="n">nat</span><span class="bp">.</span><span class="n">pow_succ</span><span class="o">,</span> <span class="err">←</span> <span class="n">nat</span><span class="bp">.</span><span class="n">sub_add_cancel</span> <span class="o">(</span><span class="n">pow_pos</span> <span class="n">ha</span> <span class="n">n</span><span class="o">),</span> <span class="n">add_mul</span><span class="o">,</span> <span class="n">one_mul</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">add_sub_assoc</span> <span class="n">ha</span><span class="o">]</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="179682594"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682594" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682594">Kenny Lau (Nov 02 2019 at 03:19)</a>:</h4>
<p>no simp</p>

<a name="179682892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Proof%20review/near/179682892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/93401Proofreview.html#179682892">Kevin Buzzard (Nov 02 2019 at 03:27)</a>:</h4>
<p>There might be more of those French brackets in Bhavik's code than there is in all of mathlib :D</p>


{% endraw %}

{% include archive_update.html %}