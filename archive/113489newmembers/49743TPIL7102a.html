---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/49743TPIL7102a.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/49743TPIL7102a.html">TPIL 7.10.2.a</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="183520868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/TPIL%207.10.2.a/near/183520868" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/49743TPIL7102a.html#183520868">Eduardo Cavazos (Dec 16 2019 at 05:28)</a>:</h4>
<p>TPIL exercise 7.10.2.a says to prove the following:</p>
<div class="codehilite"><pre><span></span>Length (s ++ t) = Length s + Length t
</pre></div>


<p>(Note, <code>List</code> and <code>Length</code> and others below are capitalized so as not to clash with the ones provided by Lean. Their definitions are from earlier in chapter 7.)</p>
<p>Here's what I have so far:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">s</span> <span class="n">t</span> <span class="o">:</span> <span class="n">List</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">Length</span> <span class="o">(</span><span class="n">s</span> <span class="bp">++</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Length</span> <span class="n">s</span> <span class="bp">+</span> <span class="n">Length</span> <span class="n">t</span> <span class="o">:=</span>

    <span class="n">List</span><span class="bp">.</span><span class="n">rec_on</span> <span class="n">s</span>

        <span class="o">(</span><span class="k">show</span> <span class="n">Length</span> <span class="o">(</span><span class="n">Nil</span> <span class="bp">++</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Length</span> <span class="n">Nil</span> <span class="bp">+</span> <span class="n">Length</span> <span class="n">t</span><span class="o">,</span> <span class="k">from</span>
            <span class="k">calc</span>
                <span class="n">Length</span> <span class="o">(</span><span class="n">Nil</span> <span class="bp">++</span> <span class="n">t</span><span class="o">)</span>   <span class="bp">=</span> <span class="n">Length</span> <span class="o">(</span><span class="n">t</span><span class="o">)</span>    <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">nil_append</span><span class="o">]</span>
                <span class="bp">...</span>                 <span class="bp">=</span> <span class="mi">0</span> <span class="bp">+</span> <span class="n">Length</span><span class="o">(</span><span class="n">t</span><span class="o">)</span> <span class="o">:</span> <span class="n">eq</span><span class="bp">.</span><span class="n">symm</span><span class="o">(</span><span class="n">zero_add</span> <span class="o">(</span><span class="n">Length</span> <span class="n">t</span><span class="o">)))</span>

        <span class="o">(</span><span class="bp">λ</span>  <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span>
            <span class="o">(</span><span class="n">a_1</span> <span class="o">:</span> <span class="n">List</span> <span class="n">α</span><span class="o">)</span>
            <span class="o">(</span><span class="n">ih</span> <span class="o">:</span> <span class="n">Length</span> <span class="o">(</span><span class="n">a_1</span> <span class="bp">++</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Length</span> <span class="n">a_1</span> <span class="bp">+</span> <span class="n">Length</span> <span class="n">t</span><span class="o">),</span>

            <span class="k">show</span> <span class="n">Length</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">a_1</span> <span class="bp">++</span> <span class="n">t</span><span class="o">)</span> <span class="bp">=</span> <span class="n">Length</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">a_1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">Length</span> <span class="n">t</span><span class="o">,</span> <span class="k">from</span>

                <span class="k">calc</span>

                    <span class="n">Length</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">a_1</span> <span class="bp">++</span> <span class="n">t</span><span class="o">)</span>  <span class="bp">=</span> <span class="n">Length</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="o">(</span><span class="n">a_1</span> <span class="bp">++</span> <span class="n">t</span><span class="o">))</span>              <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">cons_append</span><span class="o">]</span>
                    <span class="bp">...</span>                     <span class="bp">=</span> <span class="n">Length</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">+</span> <span class="n">Length</span> <span class="o">(</span><span class="n">a_1</span> <span class="bp">++</span> <span class="n">t</span><span class="o">)</span>        <span class="o">:</span> <span class="n">length_cons</span>
                    <span class="bp">...</span>                     <span class="bp">=</span> <span class="n">Length</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">+</span> <span class="o">(</span><span class="n">Length</span> <span class="n">a_1</span> <span class="bp">+</span> <span class="n">Length</span> <span class="n">t</span><span class="o">)</span>  <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">ih</span><span class="o">]</span>
                    <span class="bp">...</span>                     <span class="bp">=</span> <span class="n">Length</span> <span class="o">[</span><span class="n">a</span><span class="o">]</span> <span class="bp">+</span> <span class="n">Length</span> <span class="n">a_1</span> <span class="bp">+</span> <span class="n">Length</span> <span class="n">t</span>    <span class="o">:</span> <span class="k">by</span> <span class="n">rw</span> <span class="n">add_assoc</span>
                    <span class="bp">...</span>                     <span class="bp">=</span> <span class="n">Length</span> <span class="o">(</span><span class="n">a</span> <span class="bp">::</span> <span class="n">a_1</span><span class="o">)</span> <span class="bp">+</span> <span class="n">Length</span> <span class="n">t</span>          <span class="o">:</span> <span class="n">length_cons</span><span class="o">)</span>
</pre></div>


<p>Note that <code>length_cons</code> that's referenced in the <code>calc</code> expression does not exist. Lean seem to be OK with the rest of the proof (there are no other red squiggles).</p>
<p>As you can see, I sketched out an approach that assumes the existence of something like this:</p>
<div class="codehilite"><pre><span></span>theorem length_cons (a : α) (s : List α) : Length (a :: s) = Length [a] + Length s
</pre></div>


<p>Is this a good approach? Should I continue on in proving <code>length_cons</code> and use that? Or would you recommend another approach?</p>
<p>Thanks for any suggestions!</p>


{% endraw %}

{% include archive_update.html %}