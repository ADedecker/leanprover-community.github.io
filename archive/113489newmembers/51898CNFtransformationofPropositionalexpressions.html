---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html">CNF transformation of Propositional expressions</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="174352770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174352770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174352770">Alexandre Rademaker (Aug 28 2019 at 11:25)</a>:</h4>
<p>In Lean 3, would it be possible to implement the CNF transformation of a propositional formula? How?</p>

<a name="174352861"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174352861" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174352861">Patrick Massot (Aug 28 2019 at 11:27)</a>:</h4>
<p>Isn't it part of what <code>finish</code> or <code>tauto</code> are doing?</p>

<a name="174352972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174352972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174352972">Alexandre Rademaker (Aug 28 2019 at 11:29)</a>:</h4>
<p>Not sure.  But I am teaching a logic course in Lean using Avigad book and I want to show the students the CNF transformation, I thought that would be nice to implement it in Lean</p>

<a name="174353042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174353042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174353042">Patrick Massot (Aug 28 2019 at 11:30)</a>:</h4>
<p>I have no idea what I'm talking about, but you can have a look at the code of those tactics</p>

<a name="174354062"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174354062" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174354062">Mario Carneiro (Aug 28 2019 at 11:48)</a>:</h4>
<p>Yes, we've done that in class before</p>

<a name="174354103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174354103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174354103">Mario Carneiro (Aug 28 2019 at 11:49)</a>:</h4>
<p>The simple way is to use a carefully chosen simp set</p>

<a name="174354157"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174354157" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174354157">Mario Carneiro (Aug 28 2019 at 11:50)</a>:</h4>
<p>The more efficient way is to prove it by recursion on the term</p>

<a name="174355564"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174355564" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174355564">Alexandre Rademaker (Aug 28 2019 at 12:12)</a>:</h4>
<p>Hi Mario , can you share examples? It is still not clear to me how implement this kind of computation in Lean. Have  you implemented it over the type Prop or implemented your on data type for formulas and functions over this type?</p>

<a name="174356007"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174356007" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174356007">Alexandre Rademaker (Aug 28 2019 at 12:19)</a>:</h4>
<p>(deleted)</p>

<a name="174403931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174403931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174403931">Mario Carneiro (Aug 28 2019 at 21:45)</a>:</h4>
<p><span class="user-mention" data-user-id="121542">@Alexandre Rademaker</span><br>
Since I like to give this as an exercise, I won't give exactly CNF, but here's a similar implementation for NNF (negation normal form), which turns everything into 'and', 'or', and negations of propositional atoms.</p>
<p>Method 1, using <code>simp</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">logic</span><span class="bp">.</span><span class="n">basic</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">nnf₁</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="bp">`</span><span class="o">[</span><span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">iff_def</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">imp_iff_not_or</span><span class="o">,</span> <span class="n">not_or_distrib</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">not_and_distrib</span><span class="o">]]</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">r</span> <span class="bp">→</span> <span class="n">s</span><span class="o">))</span> <span class="bp">∨</span> <span class="n">p</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">nnf₁</span> <span class="c1">-- ⊢ (¬p ∨ (¬q ∨ r) ∧ (¬r ∨ s)) ∨ p</span>
</pre></div>


<p>Method 2, by recursion:</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">nnf</span><span class="bp">.</span><span class="n">iff</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">p</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">↔</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">r</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">h</span><span class="o">,</span> <span class="bp">@</span><span class="n">iff_def</span> <span class="n">p</span> <span class="n">q</span><span class="o">]</span>
<span class="kn">theorem</span> <span class="n">nnf</span><span class="bp">.</span><span class="n">imp</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="o">(</span><span class="bp">¬</span> <span class="n">p</span> <span class="bp">∨</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">r</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="n">r</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">h</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">imp_iff_not_or</span><span class="o">]</span>
<span class="kn">theorem</span> <span class="n">nnf</span><span class="bp">.</span><span class="n">not_and</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">p&#39;</span> <span class="n">q&#39;</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">p</span> <span class="bp">↔</span> <span class="n">p&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">hq</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">q</span> <span class="bp">↔</span> <span class="n">q&#39;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">p&#39;</span> <span class="bp">∨</span> <span class="n">q&#39;</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">hp</span><span class="o">,</span> <span class="err">←</span> <span class="n">hq</span><span class="o">,</span> <span class="n">classical</span><span class="bp">.</span><span class="n">not_and_distrib</span><span class="o">]</span>
<span class="kn">theorem</span> <span class="n">nnf</span><span class="bp">.</span><span class="n">not_or</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">p&#39;</span> <span class="n">q&#39;</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">p</span> <span class="bp">↔</span> <span class="n">p&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">hq</span> <span class="o">:</span> <span class="bp">¬</span> <span class="n">q</span> <span class="bp">↔</span> <span class="n">q&#39;</span><span class="o">)</span> <span class="o">:</span> <span class="bp">¬</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∨</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">p&#39;</span> <span class="bp">∧</span> <span class="n">q&#39;</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="err">←</span> <span class="n">hp</span><span class="o">,</span> <span class="err">←</span> <span class="n">hq</span><span class="o">,</span> <span class="n">not_or_distrib</span><span class="o">]</span>
<span class="kn">theorem</span> <span class="n">nnf</span><span class="bp">.</span><span class="n">and</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">p&#39;</span> <span class="n">q&#39;</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">↔</span> <span class="n">p&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">hq</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">↔</span> <span class="n">q&#39;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∧</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">p&#39;</span> <span class="bp">∧</span> <span class="n">q&#39;</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hp</span><span class="o">,</span> <span class="n">hq</span><span class="o">]</span>
<span class="kn">theorem</span> <span class="n">nnf</span><span class="bp">.</span><span class="n">or</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">p&#39;</span> <span class="n">q&#39;</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">(</span><span class="n">hp</span> <span class="o">:</span> <span class="n">p</span> <span class="bp">↔</span> <span class="n">p&#39;</span><span class="o">)</span> <span class="o">(</span><span class="n">hq</span> <span class="o">:</span> <span class="n">q</span> <span class="bp">↔</span> <span class="n">q&#39;</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">∨</span> <span class="n">q</span><span class="o">)</span> <span class="bp">↔</span> <span class="o">(</span><span class="n">p&#39;</span> <span class="bp">∨</span> <span class="n">q&#39;</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">rw</span> <span class="o">[</span><span class="n">hp</span><span class="o">,</span> <span class="n">hq</span><span class="o">]</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">nnf₂_aux</span> <span class="o">:</span> <span class="n">expr</span> <span class="bp">→</span> <span class="n">expr</span> <span class="bp">×</span> <span class="n">expr</span>
<span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="err">%%</span><span class="n">a</span> <span class="bp">↔</span> <span class="err">%%</span><span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="bp">`</span><span class="o">(((</span><span class="err">%%</span><span class="n">a</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)</span> <span class="bp">→</span> <span class="err">%%</span><span class="n">b</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">((</span><span class="err">%%</span><span class="n">b</span><span class="o">:</span><span class="kt">Prop</span><span class="o">)</span> <span class="bp">→</span> <span class="err">%%</span><span class="n">a</span><span class="o">))</span> <span class="k">in</span>
  <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="bp">`</span><span class="o">(</span><span class="n">nnf</span><span class="bp">.</span><span class="n">iff</span> <span class="err">%%</span><span class="n">a</span> <span class="err">%%</span><span class="n">b</span> <span class="err">%%</span><span class="n">e</span> <span class="err">%%</span><span class="n">p</span><span class="o">))</span>
<span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="err">%%</span><span class="n">a</span> <span class="bp">→</span> <span class="err">%%</span><span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="bp">`</span><span class="o">(</span><span class="bp">¬</span> <span class="err">%%</span><span class="n">a</span> <span class="bp">∨</span> <span class="err">%%</span><span class="n">b</span><span class="o">)</span> <span class="k">in</span>
  <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="bp">`</span><span class="o">(</span><span class="n">nnf</span><span class="bp">.</span><span class="n">imp</span> <span class="err">%%</span><span class="n">a</span> <span class="err">%%</span><span class="n">b</span> <span class="err">%%</span><span class="n">e</span> <span class="err">%%</span><span class="n">p</span><span class="o">))</span>
<span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="err">%%</span><span class="n">a</span> <span class="bp">∨</span> <span class="err">%%</span><span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="o">(</span><span class="n">a&#39;</span><span class="o">,</span> <span class="n">ha</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">b&#39;</span><span class="o">,</span> <span class="n">hb</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="n">b</span> <span class="k">in</span>
  <span class="o">(</span><span class="bp">`</span><span class="o">(</span><span class="err">%%</span><span class="n">a&#39;</span> <span class="bp">∨</span> <span class="err">%%</span><span class="n">b&#39;</span><span class="o">),</span> <span class="bp">`</span><span class="o">(</span><span class="n">nnf</span><span class="bp">.</span><span class="n">or</span> <span class="err">%%</span><span class="n">a</span> <span class="err">%%</span><span class="n">b</span> <span class="err">%%</span><span class="n">a&#39;</span> <span class="err">%%</span><span class="n">b&#39;</span> <span class="err">%%</span><span class="n">ha</span> <span class="err">%%</span><span class="n">hb</span><span class="o">))</span>
<span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="err">%%</span><span class="n">a</span> <span class="bp">∧</span> <span class="err">%%</span><span class="n">b</span><span class="o">)</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="o">(</span><span class="n">a&#39;</span><span class="o">,</span> <span class="n">ha</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="n">a</span><span class="o">,</span> <span class="o">(</span><span class="n">b&#39;</span><span class="o">,</span> <span class="n">hb</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="n">b</span> <span class="k">in</span>
  <span class="o">(</span><span class="bp">`</span><span class="o">(</span><span class="err">%%</span><span class="n">a&#39;</span> <span class="bp">∧</span> <span class="err">%%</span><span class="n">b&#39;</span><span class="o">),</span> <span class="bp">`</span><span class="o">(</span><span class="n">nnf</span><span class="bp">.</span><span class="n">and</span> <span class="err">%%</span><span class="n">a</span> <span class="err">%%</span><span class="n">b</span> <span class="err">%%</span><span class="n">a&#39;</span> <span class="err">%%</span><span class="n">b&#39;</span> <span class="err">%%</span><span class="n">ha</span> <span class="err">%%</span><span class="n">hb</span><span class="o">))</span>
<span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="bp">¬</span> <span class="o">(</span><span class="err">%%</span><span class="n">a</span> <span class="bp">∧</span> <span class="err">%%</span><span class="n">b</span><span class="o">))</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="o">(</span><span class="n">a&#39;</span><span class="o">,</span> <span class="n">ha</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="bp">`</span><span class="o">(</span><span class="bp">¬</span> <span class="err">%%</span><span class="n">a</span><span class="o">),</span> <span class="o">(</span><span class="n">b&#39;</span><span class="o">,</span> <span class="n">hb</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="bp">`</span><span class="o">(</span><span class="bp">¬</span> <span class="err">%%</span><span class="n">b</span><span class="o">)</span> <span class="k">in</span>
  <span class="o">(</span><span class="bp">`</span><span class="o">(</span><span class="err">%%</span><span class="n">a&#39;</span> <span class="bp">∨</span> <span class="err">%%</span><span class="n">b&#39;</span><span class="o">),</span> <span class="bp">`</span><span class="o">(</span><span class="n">nnf</span><span class="bp">.</span><span class="n">not_and</span> <span class="err">%%</span><span class="n">a</span> <span class="err">%%</span><span class="n">b</span> <span class="err">%%</span><span class="n">a&#39;</span> <span class="err">%%</span><span class="n">b&#39;</span> <span class="err">%%</span><span class="n">ha</span> <span class="err">%%</span><span class="n">hb</span><span class="o">))</span>
<span class="bp">|</span> <span class="bp">`</span><span class="o">(</span><span class="bp">¬</span> <span class="o">(</span><span class="err">%%</span><span class="n">a</span> <span class="bp">∨</span> <span class="err">%%</span><span class="n">b</span><span class="o">))</span> <span class="o">:=</span>
  <span class="k">let</span> <span class="o">(</span><span class="n">a&#39;</span><span class="o">,</span> <span class="n">ha</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="bp">`</span><span class="o">(</span><span class="bp">¬</span> <span class="err">%%</span><span class="n">a</span><span class="o">),</span> <span class="o">(</span><span class="n">b&#39;</span><span class="o">,</span> <span class="n">hb</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="bp">`</span><span class="o">(</span><span class="bp">¬</span> <span class="err">%%</span><span class="n">b</span><span class="o">)</span> <span class="k">in</span>
  <span class="o">(</span><span class="bp">`</span><span class="o">(</span><span class="err">%%</span><span class="n">a&#39;</span> <span class="bp">∧</span> <span class="err">%%</span><span class="n">b&#39;</span><span class="o">),</span> <span class="bp">`</span><span class="o">(</span><span class="n">nnf</span><span class="bp">.</span><span class="n">not_or</span> <span class="err">%%</span><span class="n">a</span> <span class="err">%%</span><span class="n">b</span> <span class="err">%%</span><span class="n">a&#39;</span> <span class="err">%%</span><span class="n">b&#39;</span> <span class="err">%%</span><span class="n">ha</span> <span class="err">%%</span><span class="n">hb</span><span class="o">))</span>
<span class="bp">|</span> <span class="n">e</span> <span class="o">:=</span> <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="bp">`</span><span class="o">(</span><span class="n">iff</span><span class="bp">.</span><span class="n">refl</span> <span class="err">%%</span><span class="n">e</span><span class="o">))</span>

<span class="n">meta</span> <span class="n">def</span> <span class="n">nnf₂</span> <span class="o">:</span> <span class="n">tactic</span> <span class="n">unit</span> <span class="o">:=</span>
<span class="n">do</span> <span class="n">e</span> <span class="err">←</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">target</span><span class="o">,</span>
   <span class="k">let</span> <span class="o">(</span><span class="n">e&#39;</span><span class="o">,</span> <span class="n">p</span><span class="o">)</span> <span class="o">:=</span> <span class="n">nnf₂_aux</span> <span class="n">e</span><span class="o">,</span>
   <span class="n">tactic</span><span class="bp">.</span><span class="n">refine</span> <span class="bp">``</span><span class="o">(</span><span class="bp">@</span><span class="n">iff</span><span class="bp">.</span><span class="n">mpr</span> <span class="err">%%</span><span class="n">e</span> <span class="err">%%</span><span class="n">e&#39;</span> <span class="err">%%</span><span class="n">p</span> <span class="bp">_</span><span class="o">)</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">p</span> <span class="n">q</span> <span class="n">r</span> <span class="n">s</span> <span class="o">:</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">p</span> <span class="bp">→</span> <span class="o">(</span><span class="n">q</span> <span class="bp">→</span> <span class="n">r</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="n">r</span> <span class="bp">→</span> <span class="n">s</span><span class="o">))</span> <span class="bp">∨</span> <span class="n">p</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">nnf₂</span> <span class="c1">-- ⊢ (¬p ∨ (¬q ∨ r) ∧ (¬r ∨ s)) ∨ p</span>
</pre></div>

<a name="174454804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174454804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174454804">Alexandre Rademaker (Aug 29 2019 at 13:42)</a>:</h4>
<p>Thank you <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> ! In the first approach, I got the error </p>
<div class="codehilite"><pre><span></span>8:5: unknown identifier &#39;classical.imp_iff_not_or&#39;
state:
p q r s : Prop
⊢ (p → (q → r) ∧ (r → s)) ∨ p
</pre></div>


<p>Where the symbol <code>imp_iff_not_or</code> is defined?</p>

<a name="174455259"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174455259" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174455259">Alexandre Rademaker (Aug 29 2019 at 13:47)</a>:</h4>
<p>Maybe this next question will sound silly, but I am being curious to ask. In cases such the one above, how can I find definitions in Lean? Using emacs, how can I know if a need to open a namespace or import some file? How can I know what is already in the Lean distribution?</p>

<a name="174455800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174455800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174455800">Patrick Massot (Aug 29 2019 at 13:53)</a>:</h4>
<p>I guess you don't have mathlib</p>

<a name="174455830"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174455830" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174455830">Patrick Massot (Aug 29 2019 at 13:54)</a>:</h4>
<p>In case where you know the exact name but clearly don't have the right imports I think nothing is faster than grep</p>

<a name="174455900"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174455900" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174455900">Patrick Massot (Aug 29 2019 at 13:54)</a>:</h4>
<p>or the online analogue <a href="https://github.com/leanprover-community/mathlib/search?q=imp_iff_not_or&amp;unscoped_q=imp_iff_not_or" target="_blank" title="https://github.com/leanprover-community/mathlib/search?q=imp_iff_not_or&amp;unscoped_q=imp_iff_not_or">https://github.com/leanprover-community/mathlib/search?q=imp_iff_not_or&amp;unscoped_q=imp_iff_not_or</a></p>

<a name="174635834"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174635834" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174635834">Alexandre Rademaker (Aug 31 2019 at 22:34)</a>:</h4>
<p>I guess  I didn't understand how to install mathlib. In <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/install/macos.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/install/macos.md">https://github.com/leanprover-community/mathlib/blob/master/docs/install/macos.md</a> it says that I need to install lean using elan. But I have already Lean and Emacs running fine. I just want to have mathlib but I don't know how.</p>

<a name="174636097"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636097" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636097">Kevin Buzzard (Aug 31 2019 at 22:44)</a>:</h4>
<p>If you're not doing it the community supported way then you don't just want to know how to install mathlib, you want to know how to install it, how to compile it and how to use it as a dependency in another project. The community have solved all these problems. Why don't you try it the community supported way first and then afterwards try and get it working with Emacs</p>

<a name="174636109"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636109" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636109">Kevin Buzzard (Aug 31 2019 at 22:45)</a>:</h4>
<p>The whole thing is still a mess but we have worked hard to write documentation that just works, or at least usually does</p>

<a name="174636113"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636113" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636113">Kevin Buzzard (Aug 31 2019 at 22:46)</a>:</h4>
<p>Once you see it all working the supported way you can try and switch back and then your problems will be far more precise</p>

<a name="174636161"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636161" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636161">Mario Carneiro (Aug 31 2019 at 22:46)</a>:</h4>
<p>I don't think installing mathlib directly is that technically challenging, it's just time consuming to compile</p>

<a name="174636169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636169">Mario Carneiro (Aug 31 2019 at 22:47)</a>:</h4>
<p>and frankly, I am far happier to wait for lean to compile for an hour than spend a day doing installation troubleshooting</p>

<a name="174636218"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636218" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636218">Mario Carneiro (Aug 31 2019 at 22:49)</a>:</h4>
<p>the macos.md file is a bit strange to me... it doesn't say anything about mathlib itself</p>

<a name="174636219"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636219" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636219">Alexandre Rademaker (Aug 31 2019 at 22:49)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> , that is my point too. I just want to understand how to install mathlib considering that lean and emacs are already working together and I have been using Lean only for my course, not with other projects or dependencies.</p>

<a name="174636265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636265">Mario Carneiro (Aug 31 2019 at 22:51)</a>:</h4>
<p>I believe you can run <code>leanpkg add leanprover-community/mathlib</code> from your project root and it should download mathlib and put it in your project dependencies</p>

<a name="174636328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636328">Mario Carneiro (Aug 31 2019 at 22:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> I think it is a problem if we don't have the "low tech" installation instructions available. There are various reasons why the "install a script that does everything" approach can fail (usually system configuration things, or paranoid people) and we should have a backup that just goes through the steps that the script is doing</p>

<a name="174636392"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636392" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636392">Mario Carneiro (Aug 31 2019 at 22:55)</a>:</h4>
<p>In particular, I'm not comfortable with the section that says to run:</p>
<div class="codehilite"><pre><span></span>curl https://raw.githubusercontent.com/leanprover-community/mathlib-tools/master/scripts/remote-install-update-mathlib.sh -sSf | bash
</pre></div>


<p>The containing section doesn't say anything precise about what the script is doing or how you can do it yourself</p>

<a name="174636436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636436">Mario Carneiro (Aug 31 2019 at 22:56)</a>:</h4>
<blockquote>
<p>(This will install tools that, amongst other things, let you download compiled binaries for mathlib.)</p>
</blockquote>
<p>How do I use said tools? What tools? Where should I do this, and how will it affect my filesystem?</p>

<a name="174636497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/CNF%20transformation%20of%20Propositional%20expressions/near/174636497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/51898CNFtransformationofPropositionalexpressions.html#174636497">Mario Carneiro (Aug 31 2019 at 22:59)</a>:</h4>
<p>The linux install instructions end with a link to <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/install/project.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/install/project.md">https://github.com/leanprover-community/mathlib/blob/master/docs/install/project.md</a> . The OSX instructions should probably also link there, and it looks like a good place to start once you have lean but not mathlib</p>


{% endraw %}

{% include archive_update.html %}