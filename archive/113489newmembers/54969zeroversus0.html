---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/54969zeroversus0.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/54969zeroversus0.html">zero versus 0</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="188934090"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20versus%200/near/188934090" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/54969zeroversus0.html#188934090">Shing Tak Lam (Feb 24 2020 at 15:08)</a>:</h4>
<p>Hello, I'm just getting started using Lean, and I've been looking at the Natural Numbers game. I've copied the definitions over from the Github repository, but the behaviour seems to be different on my local version versus the online version.</p>
<p>So for example for the first exercise in the Addition world, the goal on the online version is <code>0 + 0 = 0</code>, but on my local version is <code>0 + zero = zero</code>. I've defined <code>instance : has_zero mynat : ⟨mynat.zero⟩</code> like in the repository. I could obviously use <code>rw mynat_zero_eq_zero,</code>, but then it would be nice to know why and how to fix this, as a way to learn more about how Lean itself works. So is there a way for Lean to know (or for me to tell Lean) that <code>zero</code> and <code>0</code> are the same thing?</p>
<p>Is this something that is defined custom for the Natural Numbers Game, as I see that some of the code in the repo <code>open lean</code>, or am I missing something?</p>
<p>Thank you very much,</p>

<a name="188937541"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20versus%200/near/188937541" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/54969zeroversus0.html#188937541">Kevin Buzzard (Feb 24 2020 at 15:47)</a>:</h4>
<p>Yeah. What actually happens in the natural number game is that it isn't really honest Lean because honest Lean's induction tactic has this problem and i would constantly see this causing problems to students. So in the natural number game I change the induction tactic so that after it's applied, lean rewrites all the <code>zero</code>s to 0s</p>

<a name="188938294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20versus%200/near/188938294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/54969zeroversus0.html#188938294">Kevin Buzzard (Feb 24 2020 at 15:55)</a>:</h4>
<p>It will take me a while to remember the details, but <a href="https://github.com/ImperialCollegeLondon/natural_number_game/blob/2d764f72669ae30861f6a1057fce0257f3e466c4/src/tactic/modded.lean#L70" target="_blank" title="https://github.com/ImperialCollegeLondon/natural_number_game/blob/2d764f72669ae30861f6a1057fce0257f3e466c4/src/tactic/modded.lean#L70">here</a> is an example of me defining a new tactic <code>induction'</code> which is "apply induction, and then run the simplifier" and <a href="https://github.com/ImperialCollegeLondon/natural_number_game/blob/d39858f7c2fbb1891dbbb1ee7bbb3f110567f5fe/src/mynat/definition.lean#L23" target="_blank" title="https://github.com/ImperialCollegeLondon/natural_number_game/blob/d39858f7c2fbb1891dbbb1ee7bbb3f110567f5fe/src/mynat/definition.lean#L23">here</a> is where I tag that zero should be rewritten to 0. Finally <a href="https://github.com/ImperialCollegeLondon/natural_number_game/blob/2d764f72669ae30861f6a1057fce0257f3e466c4/src/tactic/nat_num_game.lean#L51" target="_blank" title="https://github.com/ImperialCollegeLondon/natural_number_game/blob/2d764f72669ae30861f6a1057fce0257f3e466c4/src/tactic/nat_num_game.lean#L51">here</a> is where I tell Lean to use my induction tactic not the inbuilt one. Note that Rob Lewis did most of the technical work here.</p>

<a name="188984870"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20versus%200/near/188984870" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/54969zeroversus0.html#188984870">Shing Tak Lam (Feb 25 2020 at 01:51)</a>:</h4>
<p>Alright, I see. So if I'm just getting started with Lean would you suggest I just stick with <code>zero</code> in all of the proofs (I think the only numbers that come up are <code>0</code>, <code>1</code> and <code>2</code>, so not too many <code>succ</code>s needed)? Or should I try and bodge it so that it reflects the behaviour of the Natural Numbers Game? From what I've seen so far, using <code>0</code>, <code>1</code> and <code>2</code> seems to be more of an aesthetic decision, and functionally it (should) be the same. Obviously in the real world, Lean's <code>nat</code> would just be used, so this shouldn't be an issue anyways.</p>
<p>Another difference I noticed is that on my local installation of lean, <code>simp</code> and <code>rw</code> seem to be able to close goals, so a <code>rw h</code> for example can be the last statement in a proof. But in the natural numbers game I'd need to end the proof with <code>refl</code>. Is this also intended as a difference between the two?</p>

<a name="188986348"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20versus%200/near/188986348" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/54969zeroversus0.html#188986348">Scott Morrison (Feb 25 2020 at 02:25)</a>:</h4>
<p>If you have<br>
<code>@[simp] lemma mynat_zero_eq_zero : zero = 0 := rfl</code><br>
then just calling <code>dsimp</code> should replace all your <code>zero</code>s with <code>0</code>s.</p>

<a name="188990290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20versus%200/near/188990290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/54969zeroversus0.html#188990290">Shing Tak Lam (Feb 25 2020 at 04:19)</a>:</h4>
<p>Alright I see, so <code>@[simp]</code> is an attribute to tell lean that it can use it for simplifying? If so, I've added the <code>@[simp]</code> attribute to <code>add_assoc</code> and <code>add_comm</code>, but the simplifier isn't able to solve a goal that only consists of <code>add_assoc</code> and <code>add_comm</code>. Does it matter that they are in different files? I've imported those files into my working file and they are all in the same namespace.</p>
<p>The goal is</p>
<div class="codehilite"><pre><span></span>a * t + b * t + (a + b) = a * t + a + (b * t + b)
</pre></div>


<p>My manual proof to solve it is:</p>
<div class="codehilite"><pre><span></span>rw add_assoc, rw &lt;-add_assoc (b*t), rw add_comm (b*t), rw add_assoc (a), rw add_assoc (a*t)
</pre></div>


<p>But running <code>simp</code> gives me a new goal, which isn't any simpler than the original.</p>
<div class="codehilite"><pre><span></span>a + (b * t + (b + a * t)) = a + (a * t + (b + b * t))
</pre></div>


<p>In the docs it says <code>simp</code> doesn't recognise <code>&lt;-</code>, however even if I do the parts with the <code>&lt;-</code> manually then use <code>simp</code></p>
<div class="codehilite"><pre><span></span>rw add_assoc,rw &lt;-add_assoc (b*t), simp,
</pre></div>


<p>It still doesn't solve it, and generates a new goal which it should be able to solve with only <code>add_comm</code> and <code>add_assoc</code></p>
<div class="codehilite"><pre><span></span>a * t + b * t + (a + b) = a * t + a + (b * t + b)
</pre></div>


<p>Another question, from looking at the docs, it says <code>dsimp</code> is similar to <code>simp</code>, except it uses definitional equalities only. So does that mean that <code>simp</code> uses them as well, or is it only <code>dsimp</code>?</p>

<a name="188991328"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20versus%200/near/188991328" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/54969zeroversus0.html#188991328">Mario Carneiro (Feb 25 2020 at 04:46)</a>:</h4>
<p>you should also simp with <code>add_left_comm</code></p>

<a name="188991976"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20versus%200/near/188991976" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/54969zeroversus0.html#188991976">Shing Tak Lam (Feb 25 2020 at 05:03)</a>:</h4>
<p>I see, thank you very much. After defining <code>add_left_comm</code> (It wasn't in the list of theorems on the left of the page), <code>simp</code> solved the goal. I guess it's time to go down the rabbit hole and find where that is defined in the Natural Numbers Game repo.</p>
<p>Edit: Interestingly, searching for <code>left_comm</code> in the Natural Numbers Repo does not have any results...</p>

<a name="188993369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/zero%20versus%200/near/188993369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/54969zeroversus0.html#188993369">Mario Carneiro (Feb 25 2020 at 05:43)</a>:</h4>
<p>you can prove <code>add_left_comm</code> using the other two</p>


{% endraw %}

{% include archive_update.html %}