---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/20730rwnotworkingwithnatfib.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html">rw not working with nat.fib</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="194574103"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20not%20working%20with%20nat.fib/near/194574103" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html#194574103">ROCKY KAMEN-RUBIO (Apr 19 2020 at 02:07)</a>:</h4>
<p>(from the coderwars fibonacci problem). I think I'm misunderstanding something about the interface between <code>nat</code> and <code>real</code> here, and the way <code>nat.fib</code> is defined. I'm getting errors on the last two lines even though the rewrites look like they're trying to rewrite things that are there. Any comments or links to resources would be appreciated; I've had a hard time finding useful info on working with reals in tactic mode. </p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">f_succ_succ&#39;</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">fib</span> <span class="o">(</span><span class="n">succ</span> <span class="o">(</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">fib</span> <span class="o">(</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="bp">+</span> <span class="o">(</span><span class="n">fib</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">binet&#39;</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">fib</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">phi</span><span class="err">^</span><span class="n">n</span> <span class="bp">-</span> <span class="n">psi</span><span class="err">^</span><span class="n">n</span><span class="o">)</span> <span class="bp">/</span> <span class="n">real</span><span class="bp">.</span><span class="n">sqrt</span> <span class="mi">5</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">hk</span><span class="o">,</span>
<span class="n">simp</span><span class="o">,</span>
<span class="n">induction</span> <span class="n">k</span> <span class="k">with</span> <span class="n">l</span> <span class="n">hl</span><span class="o">,</span>
<span class="n">sorry</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">f_succ_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">hl</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="194574993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20not%20working%20with%20nat.fib/near/194574993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html#194574993">Reid Barton (Apr 19 2020 at 02:37)</a>:</h4>
<p>Is there a reason that your lemma has a <code>'</code> but you rewrite with a lemma without the <code>'</code>?<br>
Can you provide working code?</p>

<a name="194577079"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20not%20working%20with%20nat.fib/near/194577079" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html#194577079">ROCKY KAMEN-RUBIO (Apr 19 2020 at 03:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/113489-new-members/topic/rw.20not.20working.20with.20nat.2Efib/near/194574993" title="#narrow/stream/113489-new-members/topic/rw.20not.20working.20with.20nat.2Efib/near/194574993">said</a>:</p>
<blockquote>
<p>Is there a reason that your lemma has a <code>'</code> but you rewrite with a lemma without the <code>'</code>?<br>
Can you provide working code?</p>
</blockquote>
<p>Sorry! This error got introduce when I simplified my code to show the error more concisely. The error is still happening though.</p>

<a name="194577332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20not%20working%20with%20nat.fib/near/194577332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html#194577332">Reid Barton (Apr 19 2020 at 03:54)</a>:</h4>
<p>Can you provide working code then?</p>

<a name="194580786"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20not%20working%20with%20nat.fib/near/194580786" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html#194580786">ROCKY KAMEN-RUBIO (Apr 19 2020 at 05:46)</a>:</h4>
<p>lemma f_succ_succ' (n : ℕ) : fib (succ (succ n)) = (fib (succ n)) + (fib n) := <br>
begin <br>
sorry,<br>
end </p>
<p>theorem binet' (n : ℕ) : (nat.fib n : ℝ) = (phi^n - psi^n) / real.sqrt 5 :=<br>
begin <br>
induction n with k hk,<br>
simp,<br>
induction k with l hl,<br>
sorry,<br>
rw f_succ_succ',<br>
rw hl,<br>
rw hk,<br>
end</p>

<a name="194581702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20not%20working%20with%20nat.fib/near/194581702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html#194581702">Johan Commelin (Apr 19 2020 at 06:13)</a>:</h4>
<p>If you put the code between</p>
<div class="codehilite"><pre><span></span><span class="bp">```</span>
<span class="n">your</span> <span class="n">code</span> <span class="n">here</span>
<span class="bp">```</span>
</pre></div>


<p>then you get syntax highlighting</p>

<a name="194582751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20not%20working%20with%20nat.fib/near/194582751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html#194582751">Shing Tak Lam (Apr 19 2020 at 06:49)</a>:</h4>
<p><span class="user-mention" data-user-id="261068">@ROCKY KAMEN-RUBIO</span> </p>
<p>For a Minimum Working Example, you want to include imports and all definitions required here. so it should look like this:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">nat</span><span class="bp">.</span><span class="n">fib</span>
       <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">open</span> <span class="n">nat</span>

<span class="n">noncomputable</span> <span class="n">theory</span>

<span class="n">def</span> <span class="n">phi</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">+</span> <span class="n">real</span><span class="bp">.</span><span class="n">sqrt</span> <span class="mi">5</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span>

<span class="n">def</span> <span class="n">psi</span> <span class="o">:</span> <span class="n">ℝ</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">1</span> <span class="bp">-</span> <span class="n">real</span><span class="bp">.</span><span class="n">sqrt</span> <span class="mi">5</span><span class="o">)</span> <span class="bp">/</span> <span class="mi">2</span>

<span class="kn">lemma</span> <span class="n">f_succ_succ&#39;</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="n">fib</span> <span class="o">(</span><span class="n">succ</span> <span class="o">(</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="bp">=</span> <span class="o">(</span><span class="n">fib</span> <span class="o">(</span><span class="n">succ</span> <span class="n">n</span><span class="o">))</span> <span class="bp">+</span> <span class="o">(</span><span class="n">fib</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">sorry</span><span class="o">,</span>
<span class="kn">end</span>

<span class="kn">theorem</span> <span class="n">binet&#39;</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">fib</span> <span class="n">n</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">phi</span><span class="err">^</span><span class="n">n</span> <span class="bp">-</span> <span class="n">psi</span><span class="err">^</span><span class="n">n</span><span class="o">)</span> <span class="bp">/</span> <span class="n">real</span><span class="bp">.</span><span class="n">sqrt</span> <span class="mi">5</span> <span class="o">:=</span>
<span class="k">begin</span>
<span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">k</span> <span class="n">hk</span><span class="o">,</span>
<span class="n">simp</span><span class="o">,</span>
<span class="n">induction</span> <span class="n">k</span> <span class="k">with</span> <span class="n">l</span> <span class="n">hl</span><span class="o">,</span>
<span class="n">sorry</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">f_succ_succ&#39;</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">hl</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">hk</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>

<a name="194582801"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20not%20working%20with%20nat.fib/near/194582801" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html#194582801">Shing Tak Lam (Apr 19 2020 at 06:50)</a>:</h4>
<p>The reasons why your rewrites weren't working was because in your goal, you have <code>↑(fib (succ l) + fib l)</code>, but in<code>hk</code> you have <code>↑(fib (succ l))</code>. If you use <code>norm_num</code>, your goal becomes <code>↑(fib (succ l)) + ↑(fib l)</code> and your rewrite works.</p>

<a name="194582845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20not%20working%20with%20nat.fib/near/194582845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html#194582845">Shing Tak Lam (Apr 19 2020 at 06:52)</a>:</h4>
<p>Mathematically though, I'm not sure your approach here is correct, essentially <code>hl</code> isn't useful here, since it's of the form <code>something -&gt; hk</code>. I think to prove this, you need induction with base cases <code>0</code> and <code>1</code>, and your IH should be "assume to be true for n and n + 1, now show it's true for n + 2". I don't know how you'd do induction like that in Lean so sorry I can't be of more help there.</p>

<a name="194583718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/rw%20not%20working%20with%20nat.fib/near/194583718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20730rwnotworkingwithnatfib.html#194583718">Shing Tak Lam (Apr 19 2020 at 07:20)</a>:</h4>
<p>(Kata spoiler?)</p>


{% endraw %}

{% include archive_update.html %}