---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html">Trouble with simple goal/has_sizeof</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="157895907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157895907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157895907">cbailey (Feb 08 2019 at 21:45)</a>:</h4>
<p>Hello again. I have a proof obligation of :</p>
<div class="codehilite"><pre><span></span> <span class="err">⊢</span> <span class="n">list</span><span class="bp">.</span><span class="n">sizeof</span> <span class="n">h</span> <span class="bp">&lt;</span> <span class="n">succ</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">sizeof</span> <span class="n">h</span><span class="o">)</span>
</pre></div>


<p>I'm not able to dismiss this with lt_succ_self (forall (n : nat), n &lt; succ n), and I'm not able to generalize them to the same term; trying to generalize them to some term h_2 leaves me with:</p>
<div class="codehilite"><pre><span></span><span class="err">⊢</span><span class="n">h_2</span> <span class="bp">&lt;</span> <span class="n">succ</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">sizeof</span> <span class="n">h</span><span class="o">)</span>
</pre></div>


<p>I'm working with a self-defined instance of has_sizeof, and my lack of understanding of the relationship between has_size of and sizeof may or may not be to blame.</p>
<p>Thank you for any help</p>

<a name="157896143"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157896143" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157896143">Kevin Buzzard (Feb 08 2019 at 21:48)</a>:</h4>
<p>are you sure you have exactly one variable <code>h</code>?</p>

<a name="157896152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157896152" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157896152">Kevin Buzzard (Feb 08 2019 at 21:48)</a>:</h4>
<p>Check your local context for dupes</p>

<a name="157896160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157896160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157896160">Kevin Buzzard (Feb 08 2019 at 21:48)</a>:</h4>
<p>Lean will happily let you call ten things <code>h</code></p>

<a name="157896174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157896174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157896174">Kevin Buzzard (Feb 08 2019 at 21:48)</a>:</h4>
<p>it's a feature</p>

<a name="157896196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157896196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157896196">Patrick Massot (Feb 08 2019 at 21:49)</a>:</h4>
<p>I hate this feature, especially while teaching</p>

<a name="157896292"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157896292" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157896292">Kevin Buzzard (Feb 08 2019 at 21:50)</a>:</h4>
<p><span class="user-mention" data-user-id="126632">@cbailey</span> if you want to get very intimidated, you could write <code>set_option pp.all true</code> just above your theorem and then look at what Lean really thinks your goal is. It might be a way of seeing if the two <code>h</code>'s are actually the same</p>

<a name="157896312"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157896312" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157896312">Kevin Buzzard (Feb 08 2019 at 21:50)</a>:</h4>
<p>I think that the <code>generalize</code> should work. I am guessing you have two different things called <code>h</code></p>

<a name="157899519"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157899519" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157899519">cbailey (Feb 08 2019 at 22:38)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  <code>set_option pp.all_true</code> is awesome, I learned something new already, thank you.  It does seem to have something to do with the fact that I had to define has_sizeof. The goal</p>
<div class="codehilite"><pre><span></span><span class="n">t</span> <span class="o">:</span> <span class="n">zTree</span>
<span class="err">⊢</span> <span class="n">list</span><span class="bp">.</span><span class="n">sizeof</span> <span class="o">(</span><span class="n">zTree_pr2</span> <span class="n">t</span><span class="o">)</span> <span class="bp">&lt;</span> <span class="n">succ</span> <span class="o">(</span><span class="n">list</span><span class="bp">.</span><span class="n">sizeof</span> <span class="o">(</span><span class="n">zTree_pr2</span> <span class="n">t</span><span class="o">))</span>
</pre></div>


<p>has this term <code>has_sizeof_inst</code> which I wasn't able to find any info about in the source on github, but I guess is enough to prevent unification, since the only parts that are different are <code>zTree.has_sizeof</code> vs <code>zTree.has_sizeof_inst</code>.</p>
<div class="codehilite"><pre><span></span><span class="n">t</span> <span class="o">:</span> <span class="n">zTree</span>
<span class="err">⊢</span> <span class="bp">@</span><span class="n">has_lt</span><span class="bp">.</span><span class="n">lt</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">nat</span> <span class="n">nat</span><span class="bp">.</span><span class="n">has_lt</span> <span class="o">(</span><span class="bp">@</span><span class="n">list</span><span class="bp">.</span><span class="n">sizeof</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">zTree</span> <span class="n">zTree</span><span class="bp">.</span><span class="n">has_sizeof</span> <span class="o">(</span><span class="n">zTree_pr2</span> <span class="n">t</span><span class="o">))</span>
    <span class="o">(</span><span class="n">nat</span><span class="bp">.</span><span class="n">succ</span> <span class="o">(</span><span class="bp">@</span><span class="n">list</span><span class="bp">.</span><span class="n">sizeof</span><span class="bp">.</span><span class="o">{</span><span class="mi">0</span><span class="o">}</span> <span class="n">zTree</span> <span class="n">zTree</span><span class="bp">.</span><span class="n">has_sizeof_inst</span> <span class="o">(</span><span class="n">zTree_pr2</span> <span class="n">t</span><span class="o">)))</span>
</pre></div>

<a name="157899733"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157899733" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157899733">Kevin Buzzard (Feb 08 2019 at 22:42)</a>:</h4>
<p>It's hard for me to make any coherent comment because I don't know the type of anything</p>

<a name="157899735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Trouble%20with%20simple%20goal/has_sizeof/near/157899735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/94465Troublewithsimplegoalhassizeof.html#157899735">Mario Carneiro (Feb 08 2019 at 22:42)</a>:</h4>
<p>It sounds like you made some poor choices earlier to lead you here. Why are you defining a has_sizeof instance? What is the context of this goal?</p>


{% endraw %}
