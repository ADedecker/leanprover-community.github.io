---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/52711resourceformutuallemmas.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/52711resourceformutuallemmas.html">resource for mutual lemmas</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="177515778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/resource%20for%20mutual%20lemmas/near/177515778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/52711resourceformutuallemmas.html#177515778">Vincent Siles (Oct 07 2019 at 12:53)</a>:</h4>
<p>Using the doc I managed to define a  simple  value type </p>
<div class="codehilite"><pre><span></span>inductive value : Type
| VBoolean : bool -&gt; value
| VInteger : int -&gt; value
| VString : string -&gt; value
| VSequence : list value -&gt; value
| VNone : value
</pre></div>


<p>and  a boolean equality on it (by mutually defining <code>val_eqb</code> and <code>val_list_eqb</code>). Now I'm trying to prove some facts about it (my ultimate goal would be to provide an instance of <code>decidable_eq</code>), but I'm struggling to define mutual lemmas. So far I tried:</p>
<div class="codehilite"><pre><span></span>mutual theorem val_eqb_eq, val_list_eqb_eq
with val_eqb_eq: ∀ v0 v1, val_eqb v0 v1 = tt ↔ v0 = v1  :=
begin
sorry,
end
with val_list_eqb_eq : ∀ l0 l1, val_list_eqb l0 l1 = tt ↔ l0 = l1
</pre></div>


<p>which has several issues:<br>
<code>invalid equations, must be followed by a command, '.', 'with', doc-string or EOF</code> on the <code>:=</code> and <code>invalid mutual declaration, 'val_list_eqb_eq' expected</code> on the <code>end</code>.</p>
<p>I can't find much on <a href="https://leanprover.github.io/theorem_proving_in_lean/induction_and_recursion.html#mutual-recursion" target="_blank" title="https://leanprover.github.io/theorem_proving_in_lean/induction_and_recursion.html#mutual-recursion">https://leanprover.github.io/theorem_proving_in_lean/induction_and_recursion.html#mutual-recursion</a>, but maybe there are other resources ?</p>

<a name="177520026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/resource%20for%20mutual%20lemmas/near/177520026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/52711resourceformutuallemmas.html#177520026">Rob Lewis (Oct 07 2019 at 13:42)</a>:</h4>
<p>I think you have to use pattern matching notation in mutual declarations, e.g.</p>
<div class="codehilite"><pre><span></span><span class="n">mutual</span> <span class="kn">theorem</span> <span class="n">val_eqb_eq</span><span class="o">,</span> <span class="n">val_list_eqb_eq</span>
<span class="k">with</span> <span class="n">val_eqb_eq</span><span class="o">:</span> <span class="bp">∀</span> <span class="n">v0</span> <span class="n">v1</span><span class="o">,</span> <span class="n">val_eqb</span> <span class="n">v0</span> <span class="n">v1</span> <span class="bp">=</span> <span class="n">tt</span> <span class="bp">↔</span> <span class="n">v0</span> <span class="bp">=</span> <span class="n">v1</span>
<span class="bp">|</span> <span class="n">v0</span> <span class="n">v1</span> <span class="o">:=</span> <span class="n">sorry</span>
<span class="k">with</span> <span class="n">val_list_eqb_eq</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">l0</span> <span class="n">l1</span><span class="o">,</span> <span class="n">val_list_eqb</span> <span class="n">l0</span> <span class="n">l1</span> <span class="bp">=</span> <span class="n">tt</span> <span class="bp">↔</span> <span class="n">l0</span> <span class="bp">=</span> <span class="n">l1</span>
<span class="bp">|</span> <span class="n">l0</span> <span class="n">l1</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>


<p>But note that nested inductives (<code>VSequence : list value -&gt; value</code>) are not one of the strong points of Lean 3. There's limited support for this and you'll get frustrated quickly.</p>

<a name="177521188"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/resource%20for%20mutual%20lemmas/near/177521188" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/52711resourceformutuallemmas.html#177521188">Vincent Siles (Oct 07 2019 at 13:55)</a>:</h4>
<p>Damned... and I was thinking I could get away from Coq for that reason :D Thanks for the insight</p>

<a name="177574877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/resource%20for%20mutual%20lemmas/near/177574877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/52711resourceformutuallemmas.html#177574877">Scott Morrison (Oct 08 2019 at 00:50)</a>:</h4>
<p>My advice would be to avoid the <code>mutual</code> keyword entirely, and roll your own "all-at-once" object defined recursively, then define projectors pulling out the bits you want.</p>


{% endraw %}

{% include archive_update.html %}