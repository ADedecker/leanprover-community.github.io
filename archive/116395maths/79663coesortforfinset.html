---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/79663coesortforfinset.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/79663coesortforfinset.html">coe_sort for finset</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="185565497"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coe_sort%20for%20finset/near/185565497" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/79663coesortforfinset.html#185565497">Enrico Borba (Jan 14 2020 at 04:56)</a>:</h4>
<p>I'm trying to prove (in Lean) the statement that the cardinality of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>End</mtext><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{End}(A)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">End</span></span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mclose">)</span></span></span></span> where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span> is a finite set is equal to <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><mi>A</mi><msup><mi mathvariant="normal">∣</mi><mrow><mi mathvariant="normal">∣</mi><mi>A</mi><mi mathvariant="normal">∣</mi></mrow></msup></mrow><annotation encoding="application/x-tex">|A|^{|A|}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.138em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord mathdefault">A</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8879999999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">∣</span><span class="mord mathdefault mtight">A</span><span class="mord mtight">∣</span></span></span></span></span></span></span></span></span></span></span></span>. However, I'm having a hard time just stating it in Lean. What I tried was</p>
<div class="codehilite"><pre><span></span>theorem finset_endomorphism_cardinality {α : Type*} (s : finset α) :
    finset.card (↥s → ↥s) = (finset.card s) ^ (finset.card s) :=
  sorry
</pre></div>


<p>However, it doesn't seem that <code>coe_sort</code> exists for <code>finset</code>. I'm wondering: 1) what is a working way to state this now, 2) Is there a need for <code>coe_sort</code> in <code>finset</code>?</p>

<a name="185566330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/coe_sort%20for%20finset/near/185566330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/79663coesortforfinset.html#185566330">Bryan Gin-ge Chen (Jan 14 2020 at 05:21)</a>:</h4>
<p>I think this is may be what you want:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">finset</span>

<span class="kn">theorem</span> <span class="n">finset_endomorphism_cardinality</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">finset</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span>
    <span class="n">finset</span><span class="bp">.</span><span class="n">card</span> <span class="o">(</span><span class="n">s</span><span class="bp">.</span><span class="n">pi</span> <span class="o">(</span><span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">s</span><span class="o">)</span> <span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">card</span> <span class="n">s</span><span class="o">)</span> <span class="err">^</span> <span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">card</span> <span class="n">s</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">finset</span><span class="bp">.</span><span class="n">card</span><span class="o">,</span> <span class="n">finset</span><span class="bp">.</span><span class="n">pi</span><span class="o">,</span> <span class="n">multiset</span><span class="bp">.</span><span class="n">card_pi</span><span class="o">,</span>
    <span class="n">multiset</span><span class="bp">.</span><span class="n">prod_repeat</span><span class="o">,</span> <span class="n">multiset</span><span class="bp">.</span><span class="n">map_const</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">pow_eq_pow</span><span class="o">]</span>
<span class="kn">end</span>
</pre></div>


{% endraw %}

{% include archive_update.html %}