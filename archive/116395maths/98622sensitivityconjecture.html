---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/98622sensitivityconjecture.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html">sensitivity conjecture</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="172285808"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172285808" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172285808">Johan Commelin (Aug 02 2019 at 05:54)</a>:</h4>
<p>The sensitivity conjecture was 30 years old, and recently resolved. Can we formalise this? <a href="https://www.scottaaronson.com/blog/?p=4229" target="_blank" title="https://www.scottaaronson.com/blog/?p=4229">https://www.scottaaronson.com/blog/?p=4229</a><br>
See also Donald Knuth's condensation of the proof: <a href="https://www.cs.stanford.edu/~knuth/papers/huang.pdf" target="_blank" title="https://www.cs.stanford.edu/~knuth/papers/huang.pdf">https://www.cs.stanford.edu/~knuth/papers/huang.pdf</a></p>

<a name="172286621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172286621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172286621">Johan Commelin (Aug 02 2019 at 06:16)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> You've been doing a lot with matrices lately. Did you do things like row/column rank?</p>

<a name="172286628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172286628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172286628">Johan Commelin (Aug 02 2019 at 06:17)</a>:</h4>
<p>And how far did you get with the inverse matrix?</p>

<a name="172290859"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172290859" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172290859">Chris Hughes (Aug 02 2019 at 07:55)</a>:</h4>
<p>I used a noncomputable inverse in the end. I didn't use row and column rank either, but used the predicates <code>has_left_inverse</code> and <code>has_right_inverse</code> as well. Both of these look good enough for the sensitivity proof.</p>

<a name="172291016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172291016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172291016">Johan Commelin (Aug 02 2019 at 07:58)</a>:</h4>
<p>But this isn't in mathlib yet, right?</p>

<a name="172291026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172291026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172291026">Chris Hughes (Aug 02 2019 at 07:59)</a>:</h4>
<p>No.</p>

<a name="172292314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172292314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172292314">Chris Hughes (Aug 02 2019 at 08:24)</a>:</h4>
<p>It's a bit unfinished, that's why. It would be nicer to have a pseudoinverse that worked on rectangular matrices.</p>

<a name="172302263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172302263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172302263">Reid Barton (Aug 02 2019 at 11:54)</a>:</h4>
<p>I thought about this also. How easy is it to do these block matrix calculations appearing in the proof that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mi>n</mi></msub><mo>=</mo><mi>n</mi><mi>I</mi></mrow><annotation encoding="application/x-tex">A_n = nI</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span></span></span></span> (and in the definition of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>A</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">A_n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>)?<br>
This is another example where it's natural to consider a matrix with rows and columns indexed by a general finite type (in this case, the hypercube).</p>

<a name="172302285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172302285" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172302285">Reid Barton (Aug 02 2019 at 11:55)</a>:</h4>
<p>Given what we have at the moment it might be easier to formulate the Knuth proof in terms of linear maps everywhere instead of matrices</p>

<a name="172302342"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172302342" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172302342">Kevin Buzzard (Aug 02 2019 at 11:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110044">@Chris Hughes</span> the matrices in Knuth's proof are indexed by {0,1}^n</p>

<a name="172302847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172302847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172302847">Chris Hughes (Aug 02 2019 at 12:06)</a>:</h4>
<p>My matrix pequiv thing might help with the block matrix computations. You can concatenate matrices algebraically using something like<br>
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">(</mo><mtable columnspacing="1em" rowspacing="0.15999999999999992em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mi>a</mi></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mi>b</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mrow><mo fence="true">(</mo><mtable columnspacing="1em" rowspacing="0.15999999999999992em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>+</mo><mrow><mo fence="true">(</mo><mtable columnspacing="1em" rowspacing="0.15999999999999992em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mi>c</mi></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mi>d</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mrow><mo fence="true">(</mo><mtable columnspacing="1em" rowspacing="0.15999999999999992em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mo>=</mo><mrow><mo fence="true">(</mo><mtable columnspacing="1em" rowspacing="0.15999999999999992em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mi>a</mi></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mi>b</mi></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mi>c</mi></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mi>d</mi></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex"> \begin{pmatrix} a &amp; b \end{pmatrix} \begin{pmatrix} 1 &amp; 0 \\0 &amp; 0 \end{pmatrix} +  \begin{pmatrix} c &amp; d \end{pmatrix} \begin{pmatrix} 0 &amp; 0 \\0 &amp; 1 \end{pmatrix} = \begin{pmatrix} a &amp; b \\c &amp; d \end{pmatrix} </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8500000000000001em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35000000000000003em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8500000000000001em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35000000000000003em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size1">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8500000000000001em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35000000000000003em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8500000000000001em;"><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.35000000000000003em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size1">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">a</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">b</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathdefault">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></p>

<a name="172303195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172303195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172303195">Chris Hughes (Aug 02 2019 at 12:12)</a>:</h4>
<p>In the proof you'll probably end up with some big ugly sum, but with some terms like <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">(</mo><mtable columnspacing="1em" rowspacing="0.15999999999999992em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mrow><mo fence="true">(</mo><mtable columnspacing="1em" rowspacing="0.15999999999999992em"><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>0</mn></mstyle></mtd><mtd><mstyle displaystyle="false" scriptlevel="0"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex"> \begin{pmatrix} 1 &amp; 0 \\0 &amp; 0 \end{pmatrix}  \begin{pmatrix} 0 &amp; 0 \\0 &amp; 1 \end{pmatrix} </annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:2.40003em;vertical-align:-0.95003em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.4099999999999997em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9500000000000004em;"><span></span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span>, which cancel quite easily.</p>

<a name="172303474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172303474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172303474">Reid Barton (Aug 02 2019 at 12:18)</a>:</h4>
<p>I'm writing up a translation of Knuth's version into linear maps to compare</p>

<a name="172305884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172305884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172305884">Reid Barton (Aug 02 2019 at 12:58)</a>:</h4>
<p><a href="https://gist.github.com/rwbarton/ed50d4340e2f654b9d778ccb3ec93442" target="_blank" title="https://gist.github.com/rwbarton/ed50d4340e2f654b9d778ccb3ec93442">https://gist.github.com/rwbarton/ed50d4340e2f654b9d778ccb3ec93442</a></p>

<a name="172306115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172306115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172306115">Reid Barton (Aug 02 2019 at 13:00)</a>:</h4>
<p>I haven't used the relevant parts of mathlib much but as far as I could tell while writing this everything ought to be fairly straightforward</p>

<a name="172306466"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172306466" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172306466">Chris Hughes (Aug 02 2019 at 13:05)</a>:</h4>
<p>Is there an easy way to see the pdf version?</p>

<a name="172306511"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172306511" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172306511">Kevin Buzzard (Aug 02 2019 at 13:05)</a>:</h4>
<p>rofl kids these days</p>

<a name="172306561"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172306561" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172306561">Reid Barton (Aug 02 2019 at 13:06)</a>:</h4>
<p>One sec</p>

<a name="172306589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172306589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172306589">Reid Barton (Aug 02 2019 at 13:06)</a>:</h4>
<p><a href="/user_uploads/3121/VNuGjVQNpDqyuE_fBRGXoVNU/sensitivity.pdf" target="_blank" title="sensitivity.pdf">sensitivity.pdf</a></p>

<a name="172307137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307137">Johan Commelin (Aug 02 2019 at 13:14)</a>:</h4>
<p>That looks quite formalisable, I think.</p>

<a name="172307228"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307228" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307228">Johan Commelin (Aug 02 2019 at 13:16)</a>:</h4>
<p>After all, Kenny formalised the dimension formula, and Fabian did the dual basis.</p>

<a name="172307232"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307232" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307232">Johan Commelin (Aug 02 2019 at 13:16)</a>:</h4>
<p>Anything else that we need?</p>

<a name="172307398"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307398" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307398">Johan Commelin (Aug 02 2019 at 13:18)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> How far are you with the Lean version?</p>

<a name="172307399"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307399" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307399">Reid Barton (Aug 02 2019 at 13:18)</a>:</h4>
<p>Haven't started</p>

<a name="172307418"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307418" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307418">Reid Barton (Aug 02 2019 at 13:18)</a>:</h4>
<p>The only other general fact which gets used is the triangle inequality for summing over a finite set, do we have that?</p>

<a name="172307483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307483">Johan Commelin (Aug 02 2019 at 13:19)</a>:</h4>
<p>If we do, it should be <code>finset.abs_sum</code>, right? I don't think I've seen it.</p>

<a name="172307486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307486">Reid Barton (Aug 02 2019 at 13:19)</a>:</h4>
<p>Then there is going to be some possibly tricky business relating the hypercube graph to the matrix entries of the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>f</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">f_n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>, but that would also appear in the matrix version</p>

<a name="172307669"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307669" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307669">Johan Commelin (Aug 02 2019 at 13:22)</a>:</h4>
<p>Right, that final <code>calc</code> block seems the most tricky part.</p>

<a name="172307680"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307680" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307680">Johan Commelin (Aug 02 2019 at 13:22)</a>:</h4>
<p>The rest is straight-forward, I think.</p>

<a name="172307992"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172307992" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172307992">Rob Lewis (Aug 02 2019 at 13:26)</a>:</h4>
<p>This looks super doable. It's obviously a different kind of proof, but somehow it reminds me of the cap set proof in spirit.</p>

<a name="172308485"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172308485" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172308485">Reid Barton (Aug 02 2019 at 13:32)</a>:</h4>
<p>I guess I'll just start typing and see at what point I get stuck.</p>

<a name="172313175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172313175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172313175">Johan Commelin (Aug 02 2019 at 14:30)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> How are things going so far? I finally have time to look at this</p>

<a name="172313340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172313340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172313340">Reid Barton (Aug 02 2019 at 14:32)</a>:</h4>
<p>So far I created a new repository and did other things while building mathlib <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>

<a name="172313359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172313359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172313359">Reid Barton (Aug 02 2019 at 14:33)</a>:</h4>
<p>I was about to get started actually</p>

<a name="172313459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172313459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172313459">Johan Commelin (Aug 02 2019 at 14:34)</a>:</h4>
<p>Why do you build mathlib?</p>

<a name="172313471"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172313471" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172313471">Johan Commelin (Aug 02 2019 at 14:34)</a>:</h4>
<p>I haven't built mathlib in 3 months</p>

<a name="172313488"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172313488" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172313488">Reid Barton (Aug 02 2019 at 14:34)</a>:</h4>
<p>I haven't been indoctrinated in the new ways yet and I had other things to do anyways</p>

<a name="172314588"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172314588" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172314588">Reid Barton (Aug 02 2019 at 14:48)</a>:</h4>
<p>Does this look sensible so far?</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">real</span><span class="bp">.</span><span class="n">basic</span>
<span class="kn">import</span> <span class="n">linear_algebra</span><span class="bp">.</span><span class="n">dimension</span>

<span class="n">noncomputable</span> <span class="n">theory</span>

<span class="c">/-</span><span class="cm">- The free vector space on vertices of a hypercube, defined inductively. -/</span>
<span class="n">def</span> <span class="n">V</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="bp">→</span> <span class="kt">Type</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="n">ℝ</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">V</span> <span class="n">n</span> <span class="bp">×</span> <span class="n">V</span> <span class="n">n</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span><span class="o">,</span> <span class="n">add_comm_group</span> <span class="o">(</span><span class="n">V</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">rec</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">dunfold</span> <span class="n">V</span><span class="o">,</span> <span class="n">apply_instance</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">introsI</span> <span class="n">n</span> <span class="n">IH</span><span class="o">,</span> <span class="n">dunfold</span> <span class="n">V</span><span class="o">,</span> <span class="n">apply_instance</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span><span class="o">,</span> <span class="n">vector_space</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">V</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">apply</span> <span class="n">nat</span><span class="bp">.</span><span class="n">rec</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">dunfold</span> <span class="n">V</span><span class="o">,</span> <span class="n">apply_instance</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">introsI</span> <span class="n">n</span> <span class="n">IH</span><span class="o">,</span> <span class="n">dunfold</span> <span class="n">V</span><span class="o">,</span> <span class="n">apply_instance</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">dim_V</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="n">vector_space</span><span class="bp">.</span><span class="n">dim</span> <span class="n">ℝ</span> <span class="o">(</span><span class="n">V</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="err">^</span><span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">IH</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">apply</span> <span class="n">dim_of_field</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">dunfold</span> <span class="n">V</span><span class="o">,</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">dim_prod</span><span class="o">,</span> <span class="n">IH</span><span class="o">,</span> <span class="n">pow_succ</span><span class="o">,</span> <span class="n">two_mul</span><span class="o">]</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="c">/-</span><span class="cm">- The linear operator f_n corresponding to Huang&#39;s matrix A_n. -/</span>
<span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span><span class="o">,</span> <span class="n">V</span> <span class="n">n</span> <span class="bp">→</span><span class="err">ₗ</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">V</span> <span class="n">n</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="n">sorry</span>
</pre></div>

<a name="172314746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172314746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172314746">Reid Barton (Aug 02 2019 at 14:50)</a>:</h4>
<p>And is there any special support for linear maps into/out of binary direct sums?</p>

<a name="172314905"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172314905" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172314905">Rob Lewis (Aug 02 2019 at 14:52)</a>:</h4>
<p>Heh, I just started playing around with this and got to exactly the same place. Not that I saw (at a quick glance).</p>

<a name="172314931"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172314931" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172314931">Reid Barton (Aug 02 2019 at 14:52)</a>:</h4>
<p>Ah yes, <code>linear_map.fst/snd/prod</code></p>

<a name="172315261"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172315261" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172315261">Reid Barton (Aug 02 2019 at 14:56)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- The linear operator f_n corresponding to Huang&#39;s matrix A_n. -/</span>
<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span><span class="o">,</span> <span class="n">V</span> <span class="n">n</span> <span class="bp">→</span><span class="err">ₗ</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">V</span> <span class="n">n</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">linear_map</span><span class="bp">.</span><span class="n">pair</span>
    <span class="o">(</span><span class="n">linear_map</span><span class="bp">.</span><span class="n">copair</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span> <span class="n">linear_map</span><span class="bp">.</span><span class="n">id</span><span class="o">)</span>
    <span class="o">(</span><span class="n">linear_map</span><span class="bp">.</span><span class="n">copair</span> <span class="n">linear_map</span><span class="bp">.</span><span class="n">id</span> <span class="o">(</span><span class="bp">-</span><span class="n">f</span> <span class="n">n</span><span class="o">))</span>
</pre></div>


<p>This definition needs an explicit <code>noncomputable</code> even though I have <code>noncomputable theory</code> at the top, is that supposed to happen?</p>

<a name="172315559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172315559" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172315559">Chris Hughes (Aug 02 2019 at 15:00)</a>:</h4>
<p>Is noncomputable theory inside a section?</p>

<a name="172315569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172315569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172315569">Rob Lewis (Aug 02 2019 at 15:00)</a>:</h4>
<p><code>noncomputable theory</code> doesn't always propogate to aux decls.</p>

<a name="172318371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172318371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172318371">Reid Barton (Aug 02 2019 at 15:32)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- The linear operator f_n corresponding to Huang&#39;s matrix A_n. -/</span>
<span class="n">noncomputable</span> <span class="n">def</span> <span class="n">f</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span><span class="o">,</span> <span class="n">V</span> <span class="n">n</span> <span class="bp">→</span><span class="err">ₗ</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">V</span> <span class="n">n</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="o">:=</span> <span class="mi">0</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span>
  <span class="n">linear_map</span><span class="bp">.</span><span class="n">pair</span>
    <span class="o">(</span><span class="n">linear_map</span><span class="bp">.</span><span class="n">copair</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span> <span class="n">linear_map</span><span class="bp">.</span><span class="n">id</span><span class="o">)</span>
    <span class="o">(</span><span class="n">linear_map</span><span class="bp">.</span><span class="n">copair</span> <span class="n">linear_map</span><span class="bp">.</span><span class="n">id</span> <span class="o">(</span><span class="bp">-</span><span class="n">f</span> <span class="n">n</span><span class="o">))</span>

<span class="kn">lemma</span> <span class="n">f_squared</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">v</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="err">•</span> <span class="n">v</span> <span class="o">:=</span>
<span class="c1">-- The (n : ℝ) is necessary since `n • v` refers to the multiplication defined</span>
<span class="c1">-- using only the addition of V.</span>
<span class="k">begin</span>
  <span class="n">induction</span> <span class="n">n</span> <span class="k">with</span> <span class="n">n</span> <span class="n">IH</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">intro</span> <span class="n">v</span><span class="o">,</span> <span class="n">dunfold</span> <span class="n">f</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">refl</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">v</span><span class="o">,</span> <span class="n">v&#39;</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">ext</span><span class="o">,</span>
    <span class="o">{</span> <span class="n">dunfold</span> <span class="n">f</span> <span class="n">V</span><span class="o">,</span>
      <span class="n">conv_rhs</span> <span class="o">{</span> <span class="n">change</span> <span class="o">((</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="err">•</span> <span class="n">v</span><span class="o">,</span> <span class="n">rw</span> <span class="n">add_smul</span> <span class="o">},</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">IH</span><span class="o">]</span> <span class="o">},</span>
    <span class="o">{</span> <span class="n">dunfold</span> <span class="n">f</span> <span class="n">V</span><span class="o">,</span>
      <span class="n">conv_rhs</span> <span class="o">{</span> <span class="n">change</span> <span class="o">((</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="err">•</span> <span class="n">v&#39;</span><span class="o">,</span> <span class="n">rw</span> <span class="n">add_smul</span> <span class="o">},</span>
      <span class="k">have</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">V</span> <span class="n">n</span><span class="o">),</span> <span class="bp">-</span><span class="n">x</span> <span class="bp">+</span> <span class="o">(</span><span class="n">y</span> <span class="bp">+</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">y</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">intros</span><span class="o">,</span> <span class="n">abel</span> <span class="o">},</span> <span class="c1">-- ugh</span>
      <span class="n">simp</span> <span class="o">[</span><span class="n">IH</span><span class="o">,</span> <span class="n">this</span><span class="o">]</span> <span class="o">}</span> <span class="o">}</span>
<span class="kn">end</span>
</pre></div>

<a name="172318396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172318396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172318396">Reid Barton (Aug 02 2019 at 15:32)</a>:</h4>
<p>Maybe I'll put up a repository under leanprover-community?</p>

<a name="172318813"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172318813" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172318813">Rob Lewis (Aug 02 2019 at 15:37)</a>:</h4>
<p>This was weirdly hard to make it go through, I got caught on the <code>(n : R)</code> thing too for a bit.</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">fn2</span> <span class="o">:</span> <span class="bp">∀</span> <span class="n">n</span> <span class="n">v</span><span class="o">,</span> <span class="n">f</span> <span class="n">n</span> <span class="o">(</span><span class="n">f</span> <span class="n">n</span> <span class="n">v</span><span class="o">)</span> <span class="bp">=</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span> <span class="err">•</span> <span class="n">v</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="n">v</span> <span class="o">:=</span> <span class="k">by</span> <span class="o">{</span> <span class="n">rw</span> <span class="o">(</span><span class="k">show</span> <span class="n">f</span> <span class="mi">0</span> <span class="bp">=</span> <span class="mi">0</span><span class="o">,</span> <span class="k">from</span> <span class="n">rfl</span><span class="o">),</span> <span class="n">norm_cast</span><span class="o">,</span> <span class="n">simp</span><span class="o">,</span> <span class="n">refl</span> <span class="o">}</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">⟨</span><span class="n">v1</span><span class="o">,</span> <span class="n">v2</span><span class="bp">⟩</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">f</span><span class="o">,</span> <span class="n">nat</span><span class="bp">.</span><span class="n">cast_add</span><span class="o">,</span> <span class="n">add_smul</span><span class="o">],</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">fn2</span><span class="o">],</span> <span class="n">rw</span> <span class="o">[</span><span class="n">add_comm</span><span class="o">],</span>
  <span class="n">convert</span> <span class="n">add_sub_cancel</span> <span class="bp">_</span> <span class="bp">_</span>
<span class="kn">end</span>
</pre></div>

<a name="172318902"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172318902" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172318902">Reid Barton (Aug 02 2019 at 15:38)</a>:</h4>
<p>Okay, I made <a href="https://github.com/leanprover-community/lean-sensitivity" target="_blank" title="https://github.com/leanprover-community/lean-sensitivity">https://github.com/leanprover-community/lean-sensitivity</a>. I don't know how the permissions work by default, but anyone who can add collaborators should feel free to do so.</p>

<a name="172319524"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172319524" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172319524">Floris van Doorn (Aug 02 2019 at 15:46)</a>:</h4>
<p>My gut feeling says that defining <code>V n := (fin n -&gt; bool) -&gt; real</code> would be nicer to work with. Then <code>V</code> is defined directly instead of recursively. You can use the following to go between <code>fin n</code> and <code>fin (n+1)</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">universe</span> <span class="kn">variable</span> <span class="n">u</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span>
<span class="n">def</span> <span class="n">tail</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">α</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">p</span> <span class="n">i</span><span class="bp">.</span><span class="n">succ</span>
<span class="n">def</span> <span class="n">cons</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">v</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">α</span><span class="o">)</span> <span class="o">:</span> <span class="n">fin</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="bp">→</span> <span class="n">α</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">j</span><span class="o">,</span> <span class="n">fin</span><span class="bp">.</span><span class="n">cases</span> <span class="n">x</span> <span class="n">v</span> <span class="n">j</span>
</pre></div>

<a name="172319871"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172319871" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172319871">Reid Barton (Aug 02 2019 at 15:51)</a>:</h4>
<p>I thought defining <code>V</code> recursively would be more convenient for defining and proving things about <code>f</code> and <code>g</code>--and it seems pretty convenient so far. I was thinking of defining the hypercube as <code>fin n -&gt; bool</code> though (in part because it seems a bit cheating to define it recursively).</p>

<a name="172319978"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172319978" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172319978">Rob Lewis (Aug 02 2019 at 15:52)</a>:</h4>
<p>I've started with the hypercube as <code>fin n -&gt; bool</code> but I'm not sure about the cleanest way to define the basis of <code>e_p</code>s.</p>

<a name="172319996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172319996" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172319996">Floris van Doorn (Aug 02 2019 at 15:53)</a>:</h4>
<p>Ok. Maybe that's right. Why do you say it feels like cheating?</p>

<a name="172320024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320024">Johan Commelin (Aug 02 2019 at 15:53)</a>:</h4>
<blockquote>
<p>I thought defining <code>V</code> recursively would be more convenient for defining and proving things about <code>f</code> and <code>g</code>--and it seems pretty convenient so far. I was thinking of defining the hypercube as <code>fin n -&gt; bool</code> though (in part because it seems a bit cheating to define it recursively).</p>
</blockquote>
<p>Why would that be cheating?</p>

<a name="172320047"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320047" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320047">Johan Commelin (Aug 02 2019 at 15:54)</a>:</h4>
<blockquote>
<p>I've started with the hypercube as <code>fin n -&gt; bool</code> but I'm not sure about the cleanest way to define the basis of <code>e_p</code>s.</p>
</blockquote>
<p>Dual basis is in mathlib</p>

<a name="172320151"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320151" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320151">Reid Barton (Aug 02 2019 at 15:55)</a>:</h4>
<p>Well just because it's part of the "interface" of the overall theorem and <code>fin n -&gt; bool</code> feels a bit more canonical. For example if the hypercube is defined recursively then it's not obvious how to construct the action of the symmetric group.</p>

<a name="172320156"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320156" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320156">Floris van Doorn (Aug 02 2019 at 15:55)</a>:</h4>
<p>Isn't the basis <code>e</code> just</p>
<div class="codehilite"><pre><span></span>def V (n : ℕ) : Type := (fin n → bool) → ℝ
def e (p : fin n → bool) : V n := λ q, if q = p then 1 else 0
</pre></div>

<a name="172320160"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320160" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320160">Reid Barton (Aug 02 2019 at 15:55)</a>:</h4>
<p>I agree it's not cheating by much.</p>

<a name="172320253"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320253" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320253">Johan Commelin (Aug 02 2019 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> But you changed the definition of <code>V</code></p>

<a name="172320331"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320331" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320331">Reid Barton (Aug 02 2019 at 15:58)</a>:</h4>
<p>If you assume that the hypercube must be represented by <code>fin n -&gt; bool</code>, then at some point you have to make a recursive decomposition of building something for n+1 out of two somethings for n. I suggest doing that when we define the basis <code>e</code></p>

<a name="172320344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320344">Reid Barton (Aug 02 2019 at 15:58)</a>:</h4>
<p>Which is I think what Rob was going to do</p>

<a name="172320347"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320347" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320347">Floris van Doorn (Aug 02 2019 at 15:58)</a>:</h4>
<p>I was responding to Rob, who said (as I understood it) that he was interested in the basis using this definition of <code>V</code></p>

<a name="172320408"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320408" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320408">Reid Barton (Aug 02 2019 at 15:59)</a>:</h4>
<p>Probably it doesn't matter very much where you do it</p>

<a name="172320501"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320501" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320501">Johan Commelin (Aug 02 2019 at 16:00)</a>:</h4>
<p>Do we want to define <code>e</code> directly?</p>

<a name="172320506"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320506" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320506">Johan Commelin (Aug 02 2019 at 16:00)</a>:</h4>
<p>I don't really care.</p>

<a name="172320520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320520" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320520">Johan Commelin (Aug 02 2019 at 16:00)</a>:</h4>
<p>I just thought that we would first define the basis for <code>V</code>.</p>

<a name="172320529"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320529" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320529">Reid Barton (Aug 02 2019 at 16:01)</a>:</h4>
<p>So something like <code>e (n+1) p := if p 0 then prod.inr (e n p.tail) else prod.inl (e n p.tail)</code></p>

<a name="172320544"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320544" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320544">Rob Lewis (Aug 02 2019 at 16:01)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> That looks way cleaner than what I was doing, I was using the other definition of <code>V</code> though.</p>

<a name="172320571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320571">Rob Lewis (Aug 02 2019 at 16:01)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">e</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">,</span> <span class="n">Q</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">V</span> <span class="n">n</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="n">p</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">1</span> <span class="o">:</span> <span class="n">ℝ</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">k</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">p</span> <span class="o">:=</span>
  <span class="k">match</span> <span class="n">p</span> <span class="mi">0</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="n">tt</span> <span class="o">:=</span> <span class="o">(</span><span class="n">e</span> <span class="n">k</span> <span class="o">(</span><span class="n">drop</span> <span class="n">p</span><span class="o">),</span> <span class="mi">0</span><span class="o">)</span>
  <span class="bp">|</span> <span class="n">ff</span> <span class="o">:=</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">e</span> <span class="n">k</span> <span class="o">(</span><span class="n">drop</span> <span class="n">p</span><span class="o">))</span>
  <span class="kn">end</span>
</pre></div>


<p>or something like that, I don't think it's gonna be convenient.</p>

<a name="172320585"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320585" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320585">Floris van Doorn (Aug 02 2019 at 16:01)</a>:</h4>
<p>The recursive decomposition is easy:</p>
<div class="codehilite"><pre><span></span>def tail (p : fin (n+1) → α) : fin n → α := λ i, p i.succ
def tuple (x : α) (v : α → (fin n → α) → β) : (fin (n+1) → α) → β :=
λ p, v (p 0) (tail p)
</pre></div>


<p>So if you have an element of <code>bool -&gt; V n</code> you get an element of <code>V (n+1)</code></p>

<a name="172320742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320742">Reid Barton (Aug 02 2019 at 16:04)</a>:</h4>
<p>I'm just worried that you will end up with only a linear isomorphism (not a definitional equality) between <code>V (n+1)</code> and <code>bool -&gt; V n</code> or <code>V n x V n</code> and that will make the computations involving <code>f</code> and <code>g</code> a lot more involved unless you can manage to cancel the isomorphisms automatically</p>

<a name="172320805"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320805" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320805">Floris van Doorn (Aug 02 2019 at 16:05)</a>:</h4>
<p>Ok, that might be a problem if we have to translate a lot between these two representations. I think it will be doable though.</p>

<a name="172320828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320828">Floris van Doorn (Aug 02 2019 at 16:06)</a>:</h4>
<p>but maybe in that aspect the recursive definition is easier.</p>

<a name="172320877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320877">Johan Commelin (Aug 02 2019 at 16:06)</a>:</h4>
<p>How about</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- The hypercube.-/</span>
<span class="n">def</span> <span class="n">Q</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">bool</span>

<span class="c">/-</span><span class="cm">- The basis of V indexed by the hypercube.-/</span>
<span class="n">def</span> <span class="n">b</span> <span class="o">:</span> <span class="bp">Π</span> <span class="n">n</span><span class="o">,</span> <span class="n">Q</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">V</span> <span class="n">n</span>
<span class="bp">|</span> <span class="mi">0</span>     <span class="o">:=</span> <span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℝ</span><span class="o">)</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">v</span><span class="o">,</span> <span class="k">if</span> <span class="n">v</span> <span class="n">n</span> <span class="bp">=</span> <span class="n">tt</span>
           <span class="k">then</span> <span class="o">(</span><span class="n">b</span> <span class="n">n</span> <span class="o">(</span><span class="n">v</span> <span class="err">∘</span> <span class="n">fin</span><span class="bp">.</span><span class="n">succ</span><span class="o">),</span> <span class="mi">0</span><span class="o">)</span>
           <span class="k">else</span> <span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">b</span> <span class="n">n</span> <span class="o">(</span><span class="n">v</span> <span class="err">∘</span> <span class="n">fin</span><span class="bp">.</span><span class="n">succ</span><span class="o">))</span>
</pre></div>

<a name="172320909"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172320909" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172320909">Reid Barton (Aug 02 2019 at 16:07)</a>:</h4>
<p>The alternative is to write down the basis and probably also the dual basis separately by this kind of recursive formula and then check that the dual basis is really dual and also the formula for <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>ε</mi><mi>q</mi></msub><mo stretchy="false">(</mo><msub><mi>f</mi><mi>n</mi></msub><msub><mi>e</mi><mi>p</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\varepsilon_q (f_n e_p)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">ε</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03588em;">q</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>, by induction</p>

<a name="172321073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321073">Rob Lewis (Aug 02 2019 at 16:09)</a>:</h4>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> That's probably slightly more convenient than the match, yeah.</p>

<a name="172321268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321268">Johan Commelin (Aug 02 2019 at 16:12)</a>:</h4>
<p>Ok, but now we need to prove that this is a basis...</p>

<a name="172321302"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321302" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321302">Johan Commelin (Aug 02 2019 at 16:12)</a>:</h4>
<p>It should suffice to prove linear independence</p>

<a name="172321332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321332">Reid Barton (Aug 02 2019 at 16:13)</a>:</h4>
<p>something like</p>
<div class="codehilite"><pre><span></span><span class="n">noncomputable</span> <span class="n">def</span> <span class="n">ε</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">{</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">}</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">bool</span><span class="o">),</span> <span class="n">V</span> <span class="n">n</span> <span class="bp">→</span><span class="err">ₗ</span><span class="o">[</span><span class="n">ℝ</span><span class="o">]</span> <span class="n">ℝ</span>
<span class="bp">|</span> <span class="mi">0</span> <span class="bp">_</span> <span class="o">:=</span> <span class="n">linear_map</span><span class="bp">.</span><span class="n">id</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">n</span><span class="bp">+</span><span class="mi">1</span><span class="o">)</span> <span class="n">p</span> <span class="o">:=</span>
  <span class="k">match</span> <span class="n">p</span> <span class="mi">0</span> <span class="k">with</span>
  <span class="bp">|</span> <span class="n">ff</span> <span class="o">:=</span> <span class="o">(</span><span class="n">ε</span> <span class="o">(</span><span class="n">p</span> <span class="err">∘</span> <span class="n">fin</span><span class="bp">.</span><span class="n">succ</span><span class="o">))</span><span class="bp">.</span><span class="n">comp</span> <span class="o">(</span><span class="n">linear_map</span><span class="bp">.</span><span class="n">fst</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span>
  <span class="bp">|</span> <span class="n">tt</span> <span class="o">:=</span> <span class="o">(</span><span class="n">ε</span> <span class="o">(</span><span class="n">p</span> <span class="err">∘</span> <span class="n">fin</span><span class="bp">.</span><span class="n">succ</span><span class="o">))</span><span class="bp">.</span><span class="n">comp</span> <span class="o">(</span><span class="n">linear_map</span><span class="bp">.</span><span class="n">snd</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span><span class="o">)</span>
  <span class="kn">end</span>
</pre></div>

<a name="172321336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321336">Reid Barton (Aug 02 2019 at 16:13)</a>:</h4>
<blockquote>
<p>Ok, but now we need to prove that this is a basis...</p>
</blockquote>
<p>Yeah that's true</p>

<a name="172321407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321407">Johan Commelin (Aug 02 2019 at 16:14)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> Is there a reason you don't want to use mathlibs dual basis?</p>

<a name="172321424"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321424" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321424">Reid Barton (Aug 02 2019 at 16:14)</a>:</h4>
<p>I fear you might get stuck when you need to calculate the matrix entries but I don't really know</p>

<a name="172321464"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321464" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321464">Reid Barton (Aug 02 2019 at 16:15)</a>:</h4>
<p>because you won't have a formula for the dual basis like the one above</p>

<a name="172321548"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321548" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321548">Reid Barton (Aug 02 2019 at 16:16)</a>:</h4>
<p>Unless there are already theorems that say if we have bases of V and W, then we get a basis of V x W and the formula for the dual basis is the expected one</p>

<a name="172321589"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321589" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321589">Johan Commelin (Aug 02 2019 at 16:17)</a>:</h4>
<p>Aha, but wouldn't it be better/easier to prove those formulas?</p>

<a name="172321620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321620">Johan Commelin (Aug 02 2019 at 16:17)</a>:</h4>
<p>Because otherwise you have to reprove that this thing is actually a dual basis.</p>

<a name="172321690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321690">Reid Barton (Aug 02 2019 at 16:18)</a>:</h4>
<p>I guess we must already have a theorem about a basis of V x W so that we can compute its dimension</p>

<a name="172321725"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321725" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321725">Reid Barton (Aug 02 2019 at 16:18)</a>:</h4>
<p>You mean we should prove a mathlib theorem about the dual basis of V x W that comes from bases of V and W?</p>

<a name="172321826"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321826" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321826">Reid Barton (Aug 02 2019 at 16:20)</a>:</h4>
<p>I haven't seen the dual basis stuff in mathlib at all yet, let me take a look.</p>

<a name="172321990"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172321990" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172321990">Reid Barton (Aug 02 2019 at 16:23)</a>:</h4>
<p>So, there is</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">is_basis_inl_union_inr</span> <span class="o">{</span><span class="n">v</span> <span class="o">:</span> <span class="n">ι</span> <span class="bp">→</span> <span class="n">β</span><span class="o">}</span> <span class="o">{</span><span class="n">v&#39;</span> <span class="o">:</span> <span class="n">ι&#39;</span> <span class="bp">→</span> <span class="n">γ</span><span class="o">}</span>
  <span class="o">(</span><span class="n">hv</span> <span class="o">:</span> <span class="n">is_basis</span> <span class="n">α</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">hv&#39;</span> <span class="o">:</span> <span class="n">is_basis</span> <span class="n">α</span> <span class="n">v&#39;</span><span class="o">)</span> <span class="o">:</span> <span class="n">is_basis</span> <span class="n">α</span> <span class="o">(</span><span class="n">sum</span><span class="bp">.</span><span class="n">elim</span> <span class="o">(</span><span class="n">inl</span> <span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="err">∘</span> <span class="n">v</span><span class="o">)</span> <span class="o">(</span><span class="n">inr</span> <span class="n">α</span> <span class="n">β</span> <span class="n">γ</span> <span class="err">∘</span> <span class="n">v&#39;</span><span class="o">))</span> <span class="o">:=</span>
</pre></div>

<a name="172322011"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172322011" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172322011">Johan Commelin (Aug 02 2019 at 16:23)</a>:</h4>
<p>Also, more trivialities:</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- The hypercube.-/</span>
<span class="n">def</span> <span class="n">Q</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Type</span> <span class="o">:=</span> <span class="n">fin</span> <span class="n">n</span> <span class="bp">→</span> <span class="n">bool</span>

<span class="kn">instance</span> <span class="n">Q</span><span class="bp">.</span><span class="n">fintype</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">fintype</span> <span class="o">(</span><span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">delta</span> <span class="n">Q</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="n">def</span> <span class="n">Q</span><span class="bp">.</span><span class="n">card</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="o">(</span><span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="err">^</span><span class="n">n</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="bp">_</span> <span class="bp">=</span> <span class="bp">_</span> <span class="o">:</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card_fun</span>
   <span class="bp">...</span> <span class="bp">=</span> <span class="bp">_</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">fintype</span><span class="bp">.</span><span class="n">card_fin</span><span class="o">,</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card_bool</span><span class="o">]</span>
</pre></div>

<a name="172322081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172322081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172322081">Johan Commelin (Aug 02 2019 at 16:24)</a>:</h4>
<p>Ooh, that def should be a simp-lemma</p>

<a name="172322172"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172322172" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172322172">Reid Barton (Aug 02 2019 at 16:25)</a>:</h4>
<p>Maybe the right way to do all this is to just define the hypercube recursively after all, and then tack a translation onto <code>fin n -&gt; bool</code> at the end if we want to.</p>

<a name="172322233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172322233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172322233">Reid Barton (Aug 02 2019 at 16:26)</a>:</h4>
<p>Then we can use that <code>is_basis_inl_union_inr</code> and add a formula to <code>linear_algebra.dual</code> about its dual basis</p>

<a name="172322308"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172322308" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172322308">Reid Barton (Aug 02 2019 at 16:27)</a>:</h4>
<p><code>Q (n+1) := Q n ⊕ Q n</code> and whatever definition of "adjacent" is the most convenient</p>

<a name="172322358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172322358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172322358">Johan Commelin (Aug 02 2019 at 16:28)</a>:</h4>
<p>Or should we just prove that <code>Q n →₀ ℝ</code> is linearly equivelent to <code>V n</code>?</p>

<a name="172322400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172322400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172322400">Johan Commelin (Aug 02 2019 at 16:28)</a>:</h4>
<p>Or maybe we should redefine <code>V n</code> to be that space?</p>

<a name="172322417"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172322417" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172322417">Reid Barton (Aug 02 2019 at 16:29)</a>:</h4>
<blockquote>
<p>Or should we just prove that <code>Q n →₀ ℝ</code> is linearly equivelent to <code>V n</code>?</p>
</blockquote>
<p>This one sounds good</p>

<a name="172322688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172322688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172322688">Reid Barton (Aug 02 2019 at 16:32)</a>:</h4>
<p>Maybe by first providing <code>Q (n+1) ≃ Q n ⊕ Q n</code></p>

<a name="172323009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172323009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172323009">Johan Commelin (Aug 02 2019 at 16:36)</a>:</h4>
<p>Aha, that also sounds like a good idea. And then use <code>is_basis.comp</code>?</p>

<a name="172323100"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172323100" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172323100">Johan Commelin (Aug 02 2019 at 16:38)</a>:</h4>
<p>Need to feed some kids <span aria-label="children crossing" class="emoji emoji-1f6b8" role="img" title="children crossing">:children_crossing:</span> brb</p>

<a name="172324222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172324222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172324222">Johan Commelin (Aug 02 2019 at 16:54)</a>:</h4>
<p>Huh, there is no <code>has_xor</code> typeclass??</p>

<a name="172327065"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172327065" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172327065">Johan Commelin (Aug 02 2019 at 17:32)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">namespace</span> <span class="n">Q</span>
<span class="kn">variable</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="kn">instance</span> <span class="o">:</span> <span class="n">fintype</span> <span class="o">(</span><span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">delta</span> <span class="n">Q</span><span class="bp">;</span> <span class="n">apply_instance</span>

<span class="kn">variable</span> <span class="o">{</span><span class="n">n</span><span class="o">}</span>

<span class="n">def</span> <span class="n">xor</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">Q</span> <span class="n">n</span> <span class="o">:=</span>
<span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">bxor</span> <span class="o">(</span><span class="n">x</span> <span class="n">i</span><span class="o">)</span> <span class="o">(</span><span class="n">y</span> <span class="n">i</span><span class="o">)</span>

<span class="bp">@</span><span class="o">[</span><span class="n">symm</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">xor_comm</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">xor</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="bp">.</span><span class="n">xor</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">funext</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">bool</span><span class="bp">.</span><span class="n">bxor_comm</span> <span class="bp">_</span> <span class="bp">_</span>

<span class="c">/-</span><span class="cm">- The distance between two vertices of the hypercube.-/</span>
<span class="n">def</span> <span class="n">dist</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="bp">ℕ</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">finset</span><span class="bp">.</span><span class="n">univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">))</span><span class="bp">.</span><span class="n">sum</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">i</span><span class="o">,</span> <span class="n">cond</span> <span class="o">(</span><span class="n">x</span><span class="bp">.</span><span class="n">xor</span> <span class="n">y</span> <span class="n">i</span><span class="o">)</span> <span class="mi">1</span>  <span class="mi">0</span>

<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">dist_self</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">dist</span> <span class="n">x</span> <span class="bp">=</span> <span class="mi">0</span> <span class="o">:=</span>
<span class="n">finset</span><span class="bp">.</span><span class="n">sum_eq_zero</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">i</span> <span class="n">hi</span><span class="o">,</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">xor</span><span class="o">,</span> <span class="n">bxor_self</span><span class="o">,</span> <span class="n">bool</span><span class="bp">.</span><span class="n">cond_ff</span><span class="o">]</span>

<span class="bp">@</span><span class="o">[</span><span class="n">symm</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">dist_symm</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">x</span><span class="bp">.</span><span class="n">dist</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="bp">.</span><span class="n">dist</span> <span class="n">x</span> <span class="o">:=</span>
<span class="n">congr_arg</span> <span class="o">((</span><span class="n">finset</span><span class="bp">.</span><span class="n">univ</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">fin</span> <span class="n">n</span><span class="o">))</span><span class="bp">.</span><span class="n">sum</span><span class="o">)</span> <span class="err">$</span>
<span class="k">by</span> <span class="o">{</span> <span class="n">funext</span> <span class="n">i</span><span class="o">,</span> <span class="n">simp</span> <span class="o">[</span><span class="n">xor_comm</span><span class="o">]</span> <span class="o">}</span>

<span class="c">/-</span><span class="cm">- Two vertices of the hypercube are adjacent if their distance is 1.-/</span>
<span class="n">def</span> <span class="n">adjacent</span> <span class="o">(</span><span class="n">x</span> <span class="n">y</span> <span class="o">:</span> <span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span> <span class="n">x</span><span class="bp">.</span><span class="n">dist</span> <span class="n">y</span> <span class="bp">=</span> <span class="mi">1</span>

<span class="c">/-</span><span class="cm">- The set of n-/</span>
<span class="n">def</span> <span class="n">neighbours</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="o">:=</span> <span class="o">{</span><span class="n">y</span> <span class="bp">|</span> <span class="n">x</span><span class="bp">.</span><span class="n">adjacent</span> <span class="n">y</span><span class="o">}</span>

<span class="kn">variable</span> <span class="o">(</span><span class="n">n</span><span class="o">)</span>

<span class="c">/-</span><span class="cm">- The cardinality of the hypercube.-/</span>
<span class="bp">@</span><span class="o">[</span><span class="n">simp</span><span class="o">]</span> <span class="kn">lemma</span> <span class="n">card</span> <span class="o">:</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="o">(</span><span class="n">Q</span> <span class="n">n</span><span class="o">)</span> <span class="bp">=</span> <span class="mi">2</span><span class="err">^</span><span class="n">n</span> <span class="o">:=</span>
<span class="k">calc</span> <span class="bp">_</span> <span class="bp">=</span> <span class="bp">_</span> <span class="o">:</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card_fun</span>
   <span class="bp">...</span> <span class="bp">=</span> <span class="bp">_</span> <span class="o">:</span> <span class="k">by</span> <span class="n">simp</span> <span class="n">only</span> <span class="o">[</span><span class="n">fintype</span><span class="bp">.</span><span class="n">card_fin</span><span class="o">,</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card_bool</span><span class="o">]</span>

<span class="kn">theorem</span> <span class="n">sensitivity</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Q</span> <span class="n">n</span><span class="o">))</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">H</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">real</span><span class="bp">.</span><span class="n">sqrt</span> <span class="n">n</span> <span class="bp">≤</span> <span class="n">fintype</span><span class="bp">.</span><span class="n">card</span> <span class="o">(</span><span class="n">H</span> <span class="err">∩</span> <span class="o">(</span><span class="n">neighbours</span> <span class="n">x</span><span class="o">)</span> <span class="o">:</span> <span class="n">set</span> <span class="o">(</span><span class="n">Q</span> <span class="n">n</span><span class="o">))</span> <span class="o">:=</span>
<span class="n">sorry</span>

<span class="kn">end</span> <span class="n">Q</span>
</pre></div>


<p>Lean isn't yet happy with the theorem statement</p>

<a name="172328677"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/sensitivity%20conjecture/near/172328677" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/98622sensitivityconjecture.html#172328677">Johan Commelin (Aug 02 2019 at 17:54)</a>:</h4>
<p>Voila: that's a statement that Lean likes:</p>
<div class="codehilite"><pre><span></span><span class="kn">theorem</span> <span class="n">sensitivity</span> <span class="o">(</span><span class="n">H</span> <span class="o">:</span> <span class="n">finset</span> <span class="o">(</span><span class="n">Q</span> <span class="n">n</span><span class="o">))</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">x</span> <span class="err">∈</span> <span class="n">H</span><span class="o">)</span> <span class="o">:</span>
  <span class="n">real</span><span class="bp">.</span><span class="n">sqrt</span> <span class="n">n</span> <span class="bp">≤</span> <span class="o">(</span><span class="n">H</span><span class="bp">.</span><span class="n">filter</span> <span class="o">(</span><span class="n">neighbours</span> <span class="n">x</span><span class="o">))</span><span class="bp">.</span><span class="n">card</span> <span class="o">:=</span>
<span class="n">sorry</span>
</pre></div>


{% endraw %}

{% include archive_update.html %}