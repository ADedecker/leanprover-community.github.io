---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/14020topologicalspacefromfilter.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html">topological space from filter</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="189325904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189325904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189325904">Kevin Buzzard (Feb 28 2020 at 16:33)</a>:</h4>
<p>The argument I know to prove that if X is a top space and  X x Y -&gt; Y is a closed map for all Y then X is compact involves a topological structure on <code>option X</code> if X is a set with a filter on it. It looks like this:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">filter_topology</span> <span class="o">{</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">filter</span> <span class="n">X</span><span class="o">)</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="o">(</span><span class="n">option</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">is_open</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">U</span><span class="o">,</span> <span class="k">if</span> <span class="n">none</span> <span class="err">∈</span> <span class="n">U</span> <span class="k">then</span> <span class="n">some</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">U</span> <span class="err">∈</span> <span class="n">F</span> <span class="k">else</span> <span class="n">true</span><span class="o">,</span>
  <span class="n">is_open_univ</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">rw</span> <span class="n">if_pos</span><span class="o">,</span>
      <span class="n">rw</span> <span class="n">preimage_univ</span><span class="o">,</span>
      <span class="n">exact</span> <span class="n">filter</span><span class="bp">.</span><span class="n">univ_mem_sets</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">mem_univ</span> <span class="o">(</span><span class="n">none</span> <span class="o">:</span> <span class="n">option</span> <span class="n">X</span><span class="o">),</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">is_open_inter</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">intros</span> <span class="n">U</span> <span class="n">V</span> <span class="n">hU</span> <span class="n">hV</span><span class="o">,</span>
    <span class="n">split_ifs</span><span class="o">,</span> <span class="n">swap</span><span class="o">,</span> <span class="n">trivial</span><span class="o">,</span>
    <span class="n">cases</span> <span class="n">h</span> <span class="k">with</span> <span class="n">h0U</span> <span class="n">h0V</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">if_pos</span> <span class="n">at</span> <span class="n">hU</span><span class="o">,</span> <span class="n">swap</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h0U</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">if_pos</span> <span class="n">at</span> <span class="n">hV</span><span class="o">,</span> <span class="n">swap</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h0V</span><span class="o">,</span>
    <span class="k">show</span> <span class="n">some</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="o">(</span><span class="n">U</span> <span class="err">∩</span> <span class="n">V</span><span class="o">)</span> <span class="err">∈</span> <span class="n">F</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">preimage_inter</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">F</span><span class="bp">.</span><span class="n">inter_sets</span> <span class="n">hU</span> <span class="n">hV</span><span class="o">,</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">is_open_sUnion</span> <span class="o">:=</span> <span class="k">begin</span>
    <span class="n">intros</span> <span class="n">I</span><span class="o">,</span>
    <span class="n">intro</span> <span class="n">hI</span><span class="o">,</span>
    <span class="n">split_ifs</span><span class="o">,</span> <span class="n">swap</span><span class="o">,</span> <span class="n">trivial</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">mem_sUnion</span> <span class="n">at</span> <span class="n">h</span><span class="o">,</span>
    <span class="n">rcases</span> <span class="n">h</span> <span class="k">with</span> <span class="bp">⟨</span><span class="n">U</span><span class="o">,</span> <span class="n">hU</span><span class="o">,</span> <span class="n">h0U</span><span class="bp">⟩</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">preimage_sUnion</span><span class="o">,</span>
    <span class="n">replace</span> <span class="n">hI</span> <span class="o">:=</span> <span class="n">hI</span> <span class="n">U</span> <span class="n">hU</span><span class="o">,</span>
    <span class="n">rw</span> <span class="n">if_pos</span> <span class="n">at</span> <span class="n">hI</span><span class="o">,</span> <span class="n">swap</span><span class="o">,</span> <span class="n">exact</span> <span class="n">h0U</span><span class="o">,</span>
    <span class="n">refine</span> <span class="n">filter</span><span class="bp">.</span><span class="n">mem_sets_of_superset</span> <span class="n">hI</span> <span class="bp">_</span><span class="o">,</span>
    <span class="n">exact</span> <span class="n">subset_bUnion_of_mem</span> <span class="n">hU</span><span class="o">,</span>
  <span class="kn">end</span>
<span class="o">}</span>
</pre></div>


<p>Is that some well-known topological construction? Do we have it in mathlib?</p>

<a name="189325998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189325998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189325998">Kevin Buzzard (Feb 28 2020 at 16:34)</a>:</h4>
<p>In short, X gets the discrete topology, and the neighbourhoods of the extra points are precisely (the point) + (element of the filter).</p>

<a name="189326205"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189326205" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189326205">Reid Barton (Feb 28 2020 at 16:37)</a>:</h4>
<p>The one-point compactification is an instance of this construction, right? With F = the filter of sets whose complement has compact closure, or so?</p>

<a name="189326317"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189326317" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189326317">Kevin Buzzard (Feb 28 2020 at 16:38)</a>:</h4>
<p>X has the discrete topology in my construction, I didn't think about whether it extended to a general top space. In this case F would be the cofinite filter.</p>

<a name="189326324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189326324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189326324">Patrick Massot (Feb 28 2020 at 16:38)</a>:</h4>
<p>It is well-known, some (deviant) people define filters using it. I don't think it's in mathlib.</p>

<a name="189326326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189326326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189326326">Reid Barton (Feb 28 2020 at 16:38)</a>:</h4>
<p>Ah yes, I just noticed that too</p>

<a name="189326542"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189326542" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189326542">Kevin Buzzard (Feb 28 2020 at 16:41)</a>:</h4>
<p>If you know that X x Y -&gt; Y is a closed map for all Y, and you want to prove that X is compact, your problem is that you don't have a clue which Y to use. My first thought was to try Y=X, but I don't know whether it's true that S x S -&gt; S closed implies S compact and I kind of doubt it. The proof I know goes like this: let F be a proper filter on X, and we want to show that F has an adherent point. Let Y be the top space defined above (note: use discrete top on X even though X is a top space) and now consider the closure of the diagonal map {(x,x)}; its image is closed so must contain <code>*</code>, and if <code>(x,*)</code> is in X x Y in the closure of the diagonal then x does the job.</p>

<a name="189326688"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189326688" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189326688">Reid Barton (Feb 28 2020 at 16:42)</a>:</h4>
<p>Good thing the computer scientists chose the definition of compact that they did right?</p>

<a name="189326702"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189326702" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189326702">Kevin Buzzard (Feb 28 2020 at 16:42)</a>:</h4>
<p>Right!</p>

<a name="189326745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189326745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189326745">Kevin Buzzard (Feb 28 2020 at 16:43)</a>:</h4>
<p>And in the proof the other way (showing that if X is compact then pr_2 is always closed) I never have to unfold the definition of compact because we have the tube lemma which is all I need.</p>

<a name="189327237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189327237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189327237">Reid Barton (Feb 28 2020 at 16:48)</a>:</h4>
<p>The new point is always closed in this construction, right?</p>

<a name="189327263"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189327263" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189327263">Reid Barton (Feb 28 2020 at 16:48)</a>:</h4>
<p>Your original one</p>

<a name="189327301"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189327301" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189327301">Kevin Buzzard (Feb 28 2020 at 16:48)</a>:</h4>
<p>Yes I guess so. Any subset of X is open.</p>

<a name="189327335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189327335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189327335">Kevin Buzzard (Feb 28 2020 at 16:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110032">Reid Barton</span> <a href="#narrow/stream/116395-maths/topic/topological.20space.20from.20filter/near/189326688" title="#narrow/stream/116395-maths/topic/topological.20space.20from.20filter/near/189326688">said</a>:</p>
<blockquote>
<p>Good thing the computer scientists chose the definition of compact that they did right?</p>
</blockquote>
<p>I'm just counting myself lucky that they didn't <a href="https://math.stackexchange.com/a/1690753/443634" target="_blank" title="https://math.stackexchange.com/a/1690753/443634">use this approach</a></p>

<a name="189327876"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189327876" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189327876">Reid Barton (Feb 28 2020 at 16:54)</a>:</h4>
<p>I'm guessing that there is a general construction that takes two topological spaces <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span> and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span> and tells you what data you need to write down (something like how the neighborhood filters of points of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span> look when intersected with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>) to build a space <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>=</mo><mi>U</mi><mo>∪</mo><mi>Z</mi></mrow><annotation encoding="application/x-tex">X = U \cup Z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span> with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span> open and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span> its complement. Your construction would then be a special case of this where <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span> is X with the discrete topology and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Z</mi></mrow><annotation encoding="application/x-tex">Z</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">Z</span></span></span></span> is a point.</p>

<a name="189327955"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topological%20space%20from%20filter/near/189327955" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/14020topologicalspacefromfilter.html#189327955">Reid Barton (Feb 28 2020 at 16:55)</a>:</h4>
<p>Of course you will recognize this from algebraic geometry, I'm just not sure exactly what the right data is in this setting</p>


{% endraw %}

{% include archive_update.html %}