---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/53994Provingthatderivativeofsiniscos.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html">Proving that derivative of sin is cos</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="179253422"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179253422" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179253422">Luca Seemungal (Oct 28 2019 at 17:17)</a>:</h4>
<p>I want to prove that the derivative of sin is cos as part of a project. Where do I start?</p>

<a name="179254140"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179254140" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179254140">Kevin Buzzard (Oct 28 2019 at 17:25)</a>:</h4>
<p>This is a great question! <span class="user-mention" data-user-id="110031">@Patrick Massot</span> <span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> what is the status of the definition of differentiation? Are we allowed to define the derivative of a function from C to C or does it still have to be all part of some theory of locally analytic topological Frechet Banach seminormed modules?</p>

<a name="179254170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179254170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179254170">Kevin Buzzard (Oct 28 2019 at 17:25)</a>:</h4>
<p>Do we even have this definition yet? Is it time?</p>

<a name="179254568"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179254568" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179254568">Mario Carneiro (Oct 28 2019 at 17:29)</a>:</h4>
<p>Ultimately we will want to generalize to the locally analytic topological Frechet Banach seminormed case but writing it for C -&gt; C first seems like a good way to keep a student project focused, and a domain expert can do the generalization later</p>

<a name="179254569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179254569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179254569">Mario Carneiro (Oct 28 2019 at 17:29)</a>:</h4>
<p>define the univariate derivative for functions R -&gt; R (or a trivial generalization thereof)</p>

<a name="179254672"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179254672" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179254672">Mario Carneiro (Oct 28 2019 at 17:30)</a>:</h4>
<p>oh, my message broke causality</p>

<a name="179254713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179254713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179254713">Kevin Buzzard (Oct 28 2019 at 17:31)</a>:</h4>
<p>R=C is true in HoTT, right?</p>

<a name="179254818"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179254818" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179254818">Mario Carneiro (Oct 28 2019 at 17:32)</a>:</h4>
<p>A class generalizing both is the first order trivial generalization</p>

<a name="179256460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179256460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179256460">Floris van Doorn (Oct 28 2019 at 17:48)</a>:</h4>
<blockquote>
<p>R=C is true in HoTT, right?</p>
</blockquote>
<p>As types, yes, but not if you take into account any structure.</p>

<a name="179256628"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179256628" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179256628">Chris Hughes (Oct 28 2019 at 17:50)</a>:</h4>
<p>It's true for the group structure.</p>

<a name="179257884"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179257884" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179257884">Sebastien Gouezel (Oct 28 2019 at 18:02)</a>:</h4>
<p>The univariate derivative is not defined yet, but it is trivial to define it in terms of the general derivative, just by identfying a linear map from <code>𝕜</code> to  <code>F</code> with an element of <code>F</code> through its value at <code>1</code>. Then it remains to translate the <code>fderiv</code> API to this setting, which should be trivial but tedious. But please, do not start from scratch, use the general results that are already available! Inspired by the beginning of the file <code>analysis/calculus/deriv.lean</code>, the definitions would start with</p>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">{</span><span class="err">𝕜</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">nondiscrete_normed_field</span> <span class="err">𝕜</span><span class="o">]</span>
<span class="kn">variables</span> <span class="o">{</span><span class="n">F</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">normed_group</span> <span class="n">F</span><span class="o">]</span> <span class="o">[</span><span class="n">normed_space</span> <span class="err">𝕜</span> <span class="n">F</span><span class="o">]</span>

<span class="n">def</span> <span class="n">has_deriv_at_filter</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="err">𝕜</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="err">𝕜</span><span class="o">)</span> <span class="o">(</span><span class="n">L</span> <span class="o">:</span> <span class="n">filter</span> <span class="err">𝕜</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">has_fderiv_at_filter</span> <span class="n">f</span> <span class="o">(</span><span class="n">scalar_prod_space_iso</span> <span class="n">id</span> <span class="n">c</span><span class="o">)</span> <span class="n">x</span> <span class="n">L</span>

<span class="n">def</span> <span class="n">has_deriv_within_at</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="err">𝕜</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="err">𝕜</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="err">𝕜</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">has_deriv_at_filter</span> <span class="n">f</span> <span class="n">c</span> <span class="n">x</span> <span class="o">(</span><span class="n">nhds_within</span> <span class="n">x</span> <span class="n">s</span><span class="o">)</span>

<span class="n">def</span> <span class="n">has_deriv_at</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="err">𝕜</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="err">𝕜</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">has_deriv_at_filter</span> <span class="n">f</span> <span class="n">c</span> <span class="n">x</span> <span class="o">(</span><span class="n">nhds</span> <span class="n">x</span><span class="o">)</span>

<span class="kn">variables</span> <span class="o">(</span><span class="err">𝕜</span><span class="o">)</span>

<span class="n">def</span> <span class="n">deriv_within</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="err">𝕜</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">s</span> <span class="o">:</span> <span class="n">set</span> <span class="err">𝕜</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="err">𝕜</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">∃</span><span class="n">c</span><span class="o">,</span> <span class="n">has_deriv_within_at</span> <span class="n">f</span> <span class="n">c</span> <span class="n">s</span> <span class="n">x</span> <span class="k">then</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some</span> <span class="n">h</span> <span class="k">else</span> <span class="mi">0</span>

<span class="n">def</span> <span class="n">deriv</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="err">𝕜</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="err">𝕜</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">if</span> <span class="n">h</span> <span class="o">:</span> <span class="bp">∃</span><span class="n">c</span><span class="o">,</span> <span class="n">has_deriv_at</span> <span class="n">f</span> <span class="n">c</span> <span class="n">x</span> <span class="k">then</span> <span class="n">classical</span><span class="bp">.</span><span class="n">some</span> <span class="n">h</span> <span class="k">else</span> <span class="mi">0</span>
</pre></div>


<p>Note that properties such as <code>differentiable_within_at</code> or <code>differentiable_on</code> or <code>differentiable</code> would not need new definitions in the one-dimensional context, as the general definitions are already enough.</p>

<a name="179259707"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179259707" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179259707">Sebastien Gouezel (Oct 28 2019 at 18:20)</a>:</h4>
<p>I remember that <span class="user-mention" data-user-id="110865">@Jeremy Avigad</span>  said at some point that one of his students would be working on this, but I don't know if this has happened concretely.</p>

<a name="179262782"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179262782" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179262782">Mario Carneiro (Oct 28 2019 at 18:50)</a>:</h4>
<p>IIRC <span class="user-mention" data-user-id="198364">@Paula Neeley</span>  was working on derivatives and <span class="user-mention" data-user-id="127148">@Joe</span> was working on integration, perhaps they can give an update?</p>

<a name="179263686"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179263686" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179263686">Luca Seemungal (Oct 28 2019 at 18:58)</a>:</h4>
<p>Thanks everyone. I want to be more extremely basic so I just want to show that the derivative of sine is cosine, and so I just need to get the derivative of a function from C to C working. So using stuff in <code>analysis/calculus/deriv.lean</code> I have to use <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">C</mi></mrow><annotation encoding="application/x-tex">\mathbb{C}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">C</span></span></span></span></span> instead of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="double-struck">k</mi></mrow><annotation encoding="application/x-tex">\mathbb{k}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68889em;vertical-align:0em;"></span><span class="mord"><span class="mord mathbb">k</span></span></span></span></span> and <code>F</code> and then ... "make it work"?</p>

<a name="179263918"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179263918" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179263918">Luca Seemungal (Oct 28 2019 at 19:00)</a>:</h4>
<p>And then after that I'll need differentiability of power series within their radius of convergence. Do we have this? Do we have ROC?</p>

<a name="179264334"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179264334" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179264334">Mario Carneiro (Oct 28 2019 at 19:04)</a>:</h4>
<p><span class="user-mention" data-user-id="221895">@Luca Seemungal</span> The strategy I call "trivial generalization" is to <em>write</em> the statement with K like Sebastien suggests, but pretend it says R instead, and apply theorems as if it was R and hoping it all just works. As soon as something fails because you are missing an assumption, switch to R for that theorem (or ask here and we can probably suggest the right structure class to use)</p>

<a name="179264432"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179264432" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179264432">Luca Seemungal (Oct 28 2019 at 19:05)</a>:</h4>
<p>Ah, ok. Will do</p>

<a name="179264806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179264806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179264806">Mario Carneiro (Oct 28 2019 at 19:10)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> what is that scalar prod thing? has deriv at filter is supposed to be the common generalization of the other two</p>

<a name="179265152"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179265152" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179265152">Sebastien Gouezel (Oct 28 2019 at 19:13)</a>:</h4>
<p>If you have an element <code>c : F</code> and want to construct a linear map from <code>𝕜</code> to <code>F</code> mapping <code>1</code> to <code>c</code>, you need to do something. This is precisely what <code>scalar_prod_space_iso</code> does. Here is its type:</p>
<div class="codehilite"><pre><span></span><span class="c">/-</span><span class="cm">- Associating to a scalar-valued linear map and an element of `γ` the</span>
<span class="cm">`γ`-valued linear map obtained by multiplying the two (a.k.a. tensoring by `γ`) -/</span>
<span class="n">def</span> <span class="n">scalar_prod_space_iso</span> <span class="o">(</span><span class="n">c</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">α</span><span class="o">]</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">γ</span><span class="o">)</span> <span class="o">:</span> <span class="n">β</span> <span class="bp">→</span><span class="n">L</span><span class="o">[</span><span class="n">α</span><span class="o">]</span> <span class="n">γ</span>
</pre></div>

<a name="179267384"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179267384" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179267384">Jeremy Avigad (Oct 28 2019 at 19:38)</a>:</h4>
<p>Paula is working on epistemic logic now, and isn't planning on working on the analysis library. I am still hoping Joe will finish the Bochner integral (where "finish" means leave it in a state where others can work on it without having to deal with the low-level definitions).</p>

<a name="179309537"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/Proving%20that%20derivative%20of%20sin%20is%20cos/near/179309537" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/53994Provingthatderivativeofsiniscos.html#179309537">Luca Seemungal (Oct 29 2019 at 08:43)</a>:</h4>
<p>Why are we doing the bochner integral specifically? If the reason is generality, is there not a more general integral?</p>


{% endraw %}

{% include archive_update.html %}