---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/42838topos.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html">topos</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="190086185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190086185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190086185">Edward Ayers (Mar 09 2020 at 16:10)</a>:</h4>
<p>Dear all, in the growing Cambridge Lean User Group;   <span class="user-mention" data-user-id="246273">@Bhavik Mehta</span> , <span class="user-mention" data-user-id="128280">@Wojciech Nawrocki</span> , <span class="user-mention" data-user-id="249584">@Thomas Read</span> and I have started building a topos theory library which we now think might be worth mentioning. </p>
<p><a href="https://github.com/b-mehta/topos" target="_blank" title="https://github.com/b-mehta/topos">https://github.com/b-mehta/topos</a></p>
<p>So far the highlights are:  Grothendieck topologies, subobject classifiers, binary products implies finite products, cartesian closed categories and lemmas about pullbacks and the over category. Some of it might already be floating around in mathlib branches or hidden repos, so we ought to coordinate with everyone else to make sure we don't reprove the wheel. Some people who might be interested:   <span class="user-mention" data-user-id="110087">@Scott Morrison</span> <span class="user-mention" data-user-id="110032">@Reid Barton</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> .</p>

<a name="190086390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190086390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190086390">Reid Barton (Mar 09 2020 at 16:11)</a>:</h4>
<p>Oh wow, I was going to start working on a very similar list of things last week but then I got sick instead. Good timing I guess?</p>

<a name="190086721"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190086721" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190086721">Johan Commelin (Mar 09 2020 at 16:14)</a>:</h4>
<p>Should <a href="https://github.com/b-mehta/topos/blob/master/src/sieve.lean#L135" target="_blank" title="https://github.com/b-mehta/topos/blob/master/src/sieve.lean#L135">https://github.com/b-mehta/topos/blob/master/src/sieve.lean#L135</a> be called <code>pullback</code>?</p>

<a name="190086762"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190086762" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190086762">Johan Commelin (Mar 09 2020 at 16:14)</a>:</h4>
<p>Or maybe <code>comap</code>, if you want to be particularly mathlibby.</p>

<a name="190086904"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190086904" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190086904">Edward Ayers (Mar 09 2020 at 16:15)</a>:</h4>
<p>Yeah I wasn't sure what to call it.</p>

<a name="190086963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190086963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190086963">Johan Commelin (Mar 09 2020 at 16:15)</a>:</h4>
<p>I'm quite sure that <a href="https://github.com/b-mehta/topos/blob/master/src/to_mathlib.lean" target="_blank" title="https://github.com/b-mehta/topos/blob/master/src/to_mathlib.lean">https://github.com/b-mehta/topos/blob/master/src/to_mathlib.lean</a> are in mathlib already</p>

<a name="190087278"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190087278" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190087278">Edward Ayers (Mar 09 2020 at 16:17)</a>:</h4>
<p>Yeah feel free to PR and fling issues at us</p>

<a name="190087290"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190087290" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190087290">Johan Commelin (Mar 09 2020 at 16:18)</a>:</h4>
<p>Ha, I'm really excited about this!</p>

<a name="190087345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190087345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190087345">Bhavik Mehta (Mar 09 2020 at 16:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/topos/near/190086721" title="#narrow/stream/116395-maths/topic/topos/near/190086721">said</a>:</p>
<blockquote>
<p>Should <a href="https://github.com/b-mehta/topos/blob/master/src/sieve.lean#L135" target="_blank" title="https://github.com/b-mehta/topos/blob/master/src/sieve.lean#L135">https://github.com/b-mehta/topos/blob/master/src/sieve.lean#L135</a> be called <code>pullback</code>?</p>
</blockquote>
<p>Yeah this was my vote too!</p>

<a name="190087833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190087833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190087833">Johan Commelin (Mar 09 2020 at 16:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/topos/near/190086963" title="#narrow/stream/116395-maths/topic/topos/near/190086963">said</a>:</p>
<blockquote>
<p>I'm quite sure that <a href="https://github.com/b-mehta/topos/blob/master/src/to_mathlib.lean" target="_blank" title="https://github.com/b-mehta/topos/blob/master/src/to_mathlib.lean">https://github.com/b-mehta/topos/blob/master/src/to_mathlib.lean</a> are in mathlib already</p>
</blockquote>
<p>Voila: <a href="https://github.com/leanprover-community/mathlib/blob/master/src/category_theory/category/default.lean#L128" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/src/category_theory/category/default.lean#L128">https://github.com/leanprover-community/mathlib/blob/master/src/category_theory/category/default.lean#L128</a></p>

<a name="190088438"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190088438" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190088438">Bhavik Mehta (Mar 09 2020 at 16:27)</a>:</h4>
<p>Ah damn, we do have some similar/duplicated work - <a href="https://github.com/leanprover-community/mathlib/blob/master/src/category_theory/limits/shapes/images.lean" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/src/category_theory/limits/shapes/images.lean">https://github.com/leanprover-community/mathlib/blob/master/src/category_theory/limits/shapes/images.lean</a> vs <a href="https://github.com/b-mehta/topos/blob/master/src/over.lean#L419" target="_blank" title="https://github.com/b-mehta/topos/blob/master/src/over.lean#L419">https://github.com/b-mehta/topos/blob/master/src/over.lean#L419</a></p>

<a name="190089694"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190089694" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190089694">Johan Commelin (Mar 09 2020 at 16:38)</a>:</h4>
<p>Let's hope that refactoring will be smooth</p>

<a name="190089967"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190089967" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190089967">Bhavik Mehta (Mar 09 2020 at 16:40)</a>:</h4>
<p>Yeah it doesn't seem too bad actually - it seems like my version should just form a nice instance of the new class</p>

<a name="190090015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190090015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190090015">Johan Commelin (Mar 09 2020 at 16:41)</a>:</h4>
<p>How many SLOC do you have already in this repo?</p>

<a name="190090071"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190090071" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190090071">Johan Commelin (Mar 09 2020 at 16:41)</a>:</h4>
<p>Please consider PRing the parts that you think have become reasonably stable.</p>

<a name="190090326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190090326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190090326">Bhavik Mehta (Mar 09 2020 at 16:43)</a>:</h4>
<p>(Assuming S means stable), my guess is that about a third to half of it right now</p>

<a name="190090516"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190090516" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190090516">Edward Ayers (Mar 09 2020 at 16:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="112680">Johan Commelin</span> <a href="#narrow/stream/116395-maths/topic/topos/near/190090015" title="#narrow/stream/116395-maths/topic/topos/near/190090015">said</a>:</p>
<blockquote>
<p>How many SLOC do you have already in this repo?</p>
</blockquote>
<p>~3000 lines</p>

<a name="190090559"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190090559" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190090559">Johan Commelin (Mar 09 2020 at 16:45)</a>:</h4>
<p>SLOC = source lines of code</p>

<a name="190090690"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190090690" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190090690">Johan Commelin (Mar 09 2020 at 16:46)</a>:</h4>
<p>3000 lines * (1/3) = 1000. That's already 5 PR's that you have there.</p>

<a name="190090775"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190090775" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190090775">Reid Barton (Mar 09 2020 at 16:47)</a>:</h4>
<p>More like 30</p>

<a name="190090824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190090824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190090824">Reid Barton (Mar 09 2020 at 16:47)</a>:</h4>
<p>Oh, 1000 / 5, okay.</p>

<a name="190092816"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190092816" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190092816">Edward Ayers (Mar 09 2020 at 17:06)</a>:</h4>
<p>Renamed <code>sieve.yank</code> to <code>sieve.pullback</code>.</p>

<a name="190094956"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190094956" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190094956">Kevin Buzzard (Mar 09 2020 at 17:26)</a>:</h4>
<p>I'm sure the advice from the perfectoid crew would be: strongly consider starting to make PR's to mathlib right now. Stuff changes. As mathlib changes your code will begin to break, and then it's your problem to fix it. If it's in mathlib then it gets fixed by the person who broke it instead (and it's often much easier for them to fix it because they almost always know exactly how they broke it, and indeed they just fixed the ten other parts of mathlib which broke for the same reason).</p>

<a name="190106150"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190106150" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190106150">Scott Morrison (Mar 09 2020 at 19:09)</a>:</h4>
<p><span class="user-mention" data-user-id="246273">@Bhavik Mehta</span>, this is all great, and I would encourage lots of PRs to mathlib!</p>

<a name="190106215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190106215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190106215">Scott Morrison (Mar 09 2020 at 19:10)</a>:</h4>
<p>Let me know if you want to discuss coordination, or any advice on what size chunks to split things into.</p>

<a name="190106423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190106423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190106423">Scott Morrison (Mar 09 2020 at 19:12)</a>:</h4>
<p>I'm curious about your definition of <a href="https://github.com/b-mehta/topos/blob/master/src/over.lean#L419" target="_blank" title="https://github.com/b-mehta/topos/blob/master/src/over.lean#L419">image</a>, however. Is this not the "regular coimage", rather than the image? (They often coincide, so this is more of a naming problem than a content problem.)</p>

<a name="190106835"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190106835" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190106835">Scott Morrison (Mar 09 2020 at 19:17)</a>:</h4>
<p>The naming scheme, at least on the <a href="https://en.wikipedia.org/wiki/Image_%28category_theory%29" target="_blank" title="https://en.wikipedia.org/wiki/Image_%28category_theory%29">wikipedia page</a>, is that "regular image" is the dual of what you've written, i.e. the equalizer of the pair of maps from Y into the pushout of X mapping via f into two copies of Y.</p>

<a name="190106996"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190106996" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190106996">Scott Morrison (Mar 09 2020 at 19:18)</a>:</h4>
<p>There's then a theorem someone ought to prove about when <code>image</code> and <code>regular_image</code> coincide.</p>

<a name="190107026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190107026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190107026">Scott Morrison (Mar 09 2020 at 19:18)</a>:</h4>
<p>And separately a theorem about when <code>image</code> and <code>coimage</code> coincide.</p>

<a name="190107051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190107051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190107051">Scott Morrison (Mar 09 2020 at 19:19)</a>:</h4>
<p>And then further the easier formulas you can use in abelian categories, etc.</p>

<a name="190108179"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190108179" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190108179">Bhavik Mehta (Mar 09 2020 at 19:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110087">Scott Morrison</span> <a href="#narrow/stream/116395-maths/topic/topos/near/190106423" title="#narrow/stream/116395-maths/topic/topos/near/190106423">said</a>:</p>
<blockquote>
<p>I'm curious about your definition of <a href="https://github.com/b-mehta/topos/blob/master/src/over.lean#L419" target="_blank" title="https://github.com/b-mehta/topos/blob/master/src/over.lean#L419">image</a>, however. Is this not the "regular coimage", rather than the image? (They often coincide, so this is more of a naming problem than a content problem.)</p>
</blockquote>
<p>The "image" as I defined it satisfies the "general definition" of image given on wikipedia - proved on lines 535 and below. My goal here was to get to the 'image' as would be useful in a topos (or in my case a locally cartesian closed category with (refl.) coequalizers), so I've used something more like the regular category definition</p>

<a name="190108482"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190108482" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190108482">Scott Morrison (Mar 09 2020 at 19:32)</a>:</h4>
<p>I wonder if we should just simplify matters; throw out mine and just use yours.</p>

<a name="190108718"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190108718" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190108718">Bhavik Mehta (Mar 09 2020 at 19:34)</a>:</h4>
<p>As far as I can tell they should be able to coexist - I've shown that a LCCC with coequalizers <code>has_images</code>. I think the only real change that needs to be made to your code is to change the <code>instance</code> on L195 to a <code>def</code></p>

<a name="190108778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/topos/near/190108778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/42838topos.html#190108778">Bhavik Mehta (Mar 09 2020 at 19:35)</a>:</h4>
<p>I should also add to Ed's message that contributions from anyone are more than welcome!</p>


{% endraw %}

{% include archive_update.html %}