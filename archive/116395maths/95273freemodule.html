---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/95273freemodule.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html">free module</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="158484975"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158484975" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158484975">Reid Barton (Feb 13 2019 at 22:56)</a>:</h4>
<p><code>The module `lc α β` of linear combinations over `β` (`α` is the scalar ring)</code><br>
This is what I would call the free module on a set, right?</p>

<a name="158485001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485001">Kenny Lau (Feb 13 2019 at 22:57)</a>:</h4>
<p>Unfortunately there <code>\b</code> needs to be a module or something</p>

<a name="158485012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485012">Reid Barton (Feb 13 2019 at 22:57)</a>:</h4>
<p>oh, I see...</p>

<a name="158485015"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485015" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485015">Kenny Lau (Feb 13 2019 at 22:57)</a>:</h4>
<p>if you want module over a set you would want either <code>direct_sum</code> or <code>finsupp</code></p>

<a name="158485030"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485030" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485030">Reid Barton (Feb 13 2019 at 22:57)</a>:</h4>
<p>Okay, I was wondering if there was something more specific than <code>direct_sum</code>.</p>

<a name="158485080"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485080" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485080">Reid Barton (Feb 13 2019 at 22:58)</a>:</h4>
<p>Actually, in my case the set does happen to be a module</p>

<a name="158485086"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485086" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485086">Kenny Lau (Feb 13 2019 at 22:58)</a>:</h4>
<p>then very good</p>

<a name="158485116"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485116" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485116">Reid Barton (Feb 13 2019 at 22:58)</a>:</h4>
<p>the module structure on <code>lc</code> is the one that doesn't use the module structure on <code>\b</code> right?</p>

<a name="158485122"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485122" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485122">Reid Barton (Feb 13 2019 at 22:58)</a>:</h4>
<p>because it's <code>finsupp.to_module</code></p>

<a name="158485130"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485130" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485130">Kenny Lau (Feb 13 2019 at 22:58)</a>:</h4>
<p>nothing uses the module structure on <code>\b</code></p>

<a name="158485133"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485133" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485133">Kenny Lau (Feb 13 2019 at 22:59)</a>:</h4>
<p>it's just <code>lc</code> that requires it</p>

<a name="158485233"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485233" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485233">Reid Barton (Feb 13 2019 at 23:00)</a>:</h4>
<p>oh wait, I lied. I have a subset of a module, not a module. Never mind</p>

<a name="158485237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485237">Kenny Lau (Feb 13 2019 at 23:00)</a>:</h4>
<p>sadness</p>

<a name="158485778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485778">Reid Barton (Feb 13 2019 at 23:09)</a>:</h4>
<p>Do we already have <code>M → (R →ₗ[R] M)</code>?</p>

<a name="158485865"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485865" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485865">Kenny Lau (Feb 13 2019 at 23:11)</a>:</h4>
<p>how about <code>M \equiv\_l (R \to\_l[R] M)</code></p>

<a name="158485889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158485889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158485889">Reid Barton (Feb 13 2019 at 23:11)</a>:</h4>
<p>I think specializing <code>direct_sum</code> to the free module on a set would be worthwhile</p>

<a name="158487391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158487391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158487391">Reid Barton (Feb 13 2019 at 23:42)</a>:</h4>
<p>Here's what I ended up writing. I'm sure it could be golfed more.</p>
<div class="codehilite"><pre><span></span><span class="n">universes</span> <span class="n">u</span> <span class="n">v</span>

<span class="kn">variables</span> <span class="o">{</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">}</span> <span class="o">[</span><span class="n">comm_ring</span> <span class="n">R</span><span class="o">]</span>

<span class="n">def</span> <span class="n">lself</span> <span class="o">(</span><span class="n">M</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">v</span><span class="o">)</span> <span class="o">[</span><span class="n">add_comm_group</span> <span class="n">M</span><span class="o">]</span> <span class="o">[</span><span class="n">module</span> <span class="n">R</span> <span class="n">M</span><span class="o">]</span> <span class="o">:</span> <span class="o">(</span><span class="n">R</span> <span class="bp">→</span><span class="err">ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">M</span><span class="o">)</span> <span class="err">≃ₗ</span><span class="o">[</span><span class="n">R</span><span class="o">]</span> <span class="n">M</span> <span class="o">:=</span>
<span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="n">f</span> <span class="mi">1</span><span class="o">,</span>
  <span class="n">inv_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">m</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">to_fun</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">r</span><span class="o">,</span> <span class="n">r</span> <span class="err">•</span> <span class="n">m</span><span class="o">,</span>
    <span class="n">add</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">intros</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">add_smul</span><span class="o">,</span>
    <span class="n">smul</span> <span class="o">:=</span> <span class="k">by</span> <span class="n">intros</span><span class="bp">;</span> <span class="n">symmetry</span><span class="bp">;</span> <span class="n">apply</span> <span class="n">smul_smul</span> <span class="o">},</span>
  <span class="n">left_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span><span class="o">,</span> <span class="k">begin</span>
    <span class="n">ext</span> <span class="n">r</span><span class="o">,</span>
    <span class="n">convert</span> <span class="o">(</span><span class="n">f</span><span class="bp">.</span><span class="n">smul</span> <span class="n">r</span> <span class="mi">1</span><span class="o">)</span><span class="bp">.</span><span class="n">symm</span><span class="o">,</span>
    <span class="n">change</span> <span class="n">f</span> <span class="n">r</span> <span class="bp">=</span> <span class="n">f</span> <span class="o">(</span><span class="n">r</span> <span class="bp">*</span> <span class="mi">1</span><span class="o">),</span>
    <span class="n">rw</span> <span class="n">mul_one</span>
  <span class="kn">end</span><span class="o">,</span>
  <span class="n">right_inv</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">m</span><span class="o">,</span> <span class="n">one_smul</span> <span class="bp">_</span> <span class="n">m</span><span class="o">,</span>
  <span class="n">add</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">f</span> <span class="n">g</span><span class="o">,</span> <span class="n">rfl</span><span class="o">,</span>
  <span class="n">smul</span> <span class="o">:=</span> <span class="bp">λ</span> <span class="n">r</span> <span class="n">f</span><span class="o">,</span> <span class="n">rfl</span> <span class="o">}</span>
</pre></div>

<a name="158487569"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158487569" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158487569">Johannes Hölzl (Feb 13 2019 at 23:46)</a>:</h4>
<p>can you use <code>smul_right</code> for as <code>inv_fun</code>?</p>

<a name="158487968"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/free%20module/near/158487968" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/95273freemodule.html#158487968">Reid Barton (Feb 13 2019 at 23:53)</a>:</h4>
<p>oh, nice</p>


{% endraw %}
