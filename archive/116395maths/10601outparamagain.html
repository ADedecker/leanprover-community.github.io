---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/116395maths/10601outparamagain.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html">out_param again</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="159988343"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/159988343" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#159988343">Patrick Massot (Mar 05 2019 at 09:26)</a>:</h4>
<p>There are things I understand better after one year of Lean. But out_param is not among those.  At <a href="https://gist.github.com/PatrickMassot/3c40ee89b1f0329432060e257c7e7cf3" target="_blank" title="https://gist.github.com/PatrickMassot/3c40ee89b1f0329432060e257c7e7cf3">https://gist.github.com/PatrickMassot/3c40ee89b1f0329432060e257c7e7cf3</a> does anyone know how to make Lean happy on line 105, without using the commented line 106? This is a standalone file that works with current mathlib</p>

<a name="159988711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/159988711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#159988711">Sebastien Gouezel (Mar 05 2019 at 09:32)</a>:</h4>
<p>Are you going after the inverse function theorem?</p>

<a name="159988806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/159988806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#159988806">Kevin Buzzard (Mar 05 2019 at 09:34)</a>:</h4>
<p>I'm on <code>commit 05449a061744f8142bfc5396184e33ef19b08b82</code> from under a week ago and it doesn't compile for me -- do I need to update mathlib?</p>

<a name="159988862"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/159988862" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#159988862">Kevin Buzzard (Mar 05 2019 at 09:36)</a>:</h4>
<p>fixed with a <code>sorry</code>. What does <code>id - u</code> mean?</p>

<a name="159988895"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/159988895" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#159988895">Johan Commelin (Mar 05 2019 at 09:36)</a>:</h4>
<p>Probably... the topology of the <code>topology/</code> directory changed a bit.</p>

<a name="159989041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/159989041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#159989041">Kevin Buzzard (Mar 05 2019 at 09:38)</a>:</h4>
<p>Patrick's error without the <code>@</code> is</p>
<div class="codehilite"><pre><span></span>don&#39;t know how to synthesize placeholder
⊢ out_param (Type ?)
</pre></div>


<p>and his function with the <code>out_param</code>s is</p>
<div class="codehilite"><pre><span></span>lipschitz_global_inverse :
  Π {α : out_param (Type u_3)} [_inst_1 : out_param (normed_field α)] {E : Type u_4} [B : banach_space α E],
    (E → E) → E → E
</pre></div>

<a name="159989111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/159989111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#159989111">Kevin Buzzard (Mar 05 2019 at 09:40)</a>:</h4>
<p>So you promised Lean that alpha would be inferred using unification, but it couldn't do it.</p>

<a name="159989431"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/159989431" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#159989431">Kevin Buzzard (Mar 05 2019 at 09:44)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">variables</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="n">out_param</span> <span class="err">$</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">}</span> <span class="o">[</span><span class="n">out_param</span> <span class="err">$</span> <span class="n">normed_field</span> <span class="n">α</span><span class="o">]</span>
</pre></div>


<p>So you have <code>u : E -&gt; E</code>, and you want Lean to spot <code>banach_space α E</code> using type class inference and then realise that clearly you want <code>α</code> in that missing first slot.</p>

<a name="159990503"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/159990503" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#159990503">Patrick Massot (Mar 05 2019 at 10:02)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Yes I want Lean to find alpha</p>

<a name="159990535"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/159990535" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#159990535">Patrick Massot (Mar 05 2019 at 10:03)</a>:</h4>
<p><span class="user-mention" data-user-id="110050">@Sebastien Gouezel</span> Yes, I'm going after the inverse function theorem. I was hoping that <span class="user-mention" data-user-id="110865">@Jeremy Avigad</span> would give the mean value inequality while I was preparing on the Lipschitz side. But it looks like I'll also have to do the mean value inequality</p>

<a name="160034468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160034468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160034468">Patrick Massot (Mar 05 2019 at 19:52)</a>:</h4>
<p>Can anyone help me in this thread?</p>

<a name="160034487"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160034487" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160034487">Patrick Massot (Mar 05 2019 at 19:53)</a>:</h4>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> maybe?</p>

<a name="160057370"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160057370" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160057370">Jeremy Avigad (Mar 06 2019 at 01:16)</a>:</h4>
<p>The MVT doesn't look too bad. I will put it next on my list, though I can't promise to do it soon. (<span class="user-mention" data-user-id="210574">@Patrick Massot</span> if you do it let me know.)</p>

<a name="160190327"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160190327" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160190327">Jan-David Salchow (Mar 07 2019 at 11:48)</a>:</h4>
<p><span class="user-mention" data-user-id="210574">@Patrick Massot</span> I was toying with the idea of implementing the inverse/implicit function theorem in the style of McDuff/Salamon. While I haven't done that, I did implement the necessary Newton Picard iteration in the version of Audin / Damian, see <a href="https://github.com/jdsalchow/mathlib/blob/newton_picard/src/analysis/normed_space/newton_picard.lean" target="_blank" title="https://github.com/jdsalchow/mathlib/blob/newton_picard/src/analysis/normed_space/newton_picard.lean">https://github.com/jdsalchow/mathlib/blob/newton_picard/src/analysis/normed_space/newton_picard.lean</a></p>

<a name="160190374"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160190374" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160190374">Jan-David Salchow (Mar 07 2019 at 11:50)</a>:</h4>
<p>Maybe some of it is useful in your efforts?</p>

<a name="160193051"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160193051" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160193051">Kevin Buzzard (Mar 07 2019 at 12:35)</a>:</h4>
<div class="codehilite"><pre><span></span>notation `∃!` binders `,` p:(scoped P, P) `,` `moreover` q:(scoped Q, Q) := exists_unique p ∧ ∀ x, p x → q x`
</pre></div>


<p>"moreover" :-)</p>

<a name="160195587"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160195587" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160195587">Patrick Massot (Mar 07 2019 at 13:12)</a>:</h4>
<p><span class="user-mention" data-user-id="130980">@Jan-David Salchow</span> Nice! I'm pretty sure that main proof can be mathlib'ed. I can't spend too much time on this right now, because  have exams to prepare and I promised to work on uniform spaces. We definitely need some coordination about the basic definitions, like <code>lipschitz_within_with</code> that  I also defined in my file, and the space of differentiable functions that you defined. There are very basic questions not yet adressed in <code>deriv.lean</code>, like: do we want to talk about the derivative of <code>f</code> for any <code>f</code>, getting junk if <code>f</code> has no derivative, or do we want bundled differentiable maps like you did? How do we define C^k functions? C^infinity? <span class="user-mention" data-user-id="110865">@Jeremy Avigad</span> should tell us what he thinks here</p>

<a name="160195699"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160195699" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160195699">Patrick Massot (Mar 07 2019 at 13:14)</a>:</h4>
<p>That being said, I'm still interested in the question that started this thread. Can anyone help me here?</p>

<a name="160209892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160209892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160209892">Patrick Massot (Mar 07 2019 at 15:58)</a>:</h4>
<blockquote>
<p>There are things I understand better after one year of Lean. But out_param is not among those.  At <a href="https://gist.github.com/PatrickMassot/3c40ee89b1f0329432060e257c7e7cf3" target="_blank" title="https://gist.github.com/PatrickMassot/3c40ee89b1f0329432060e257c7e7cf3">https://gist.github.com/PatrickMassot/3c40ee89b1f0329432060e257c7e7cf3</a> does anyone know how to make Lean happy on line 105, without using the commented line 106? This is a standalone file that works with current mathlib</p>
</blockquote>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> could you help me here?</p>

<a name="160209972"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160209972" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160209972">Mario Carneiro (Mar 07 2019 at 15:59)</a>:</h4>
<p>To play well with the rest of the module hierarchy, you should take the out_param off alpha</p>

<a name="160210003"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160210003" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160210003">Mario Carneiro (Mar 07 2019 at 15:59)</a>:</h4>
<p>actually just take all the out_params off</p>

<a name="160210027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/out_param%20again/near/160210027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/10601outparamagain.html#160210027">Mario Carneiro (Mar 07 2019 at 15:59)</a>:</h4>
<p>module doesn't work like that anymore</p>


{% endraw %}
