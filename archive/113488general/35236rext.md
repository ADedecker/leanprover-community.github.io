---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/35236rext.html
---

## Stream: [general](index.html)
### Topic: [rext](35236rext.html)

---


{% raw %}
#### [ Reid Barton (Sep 07 2018 at 12:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133502825):
<p>How about <code>rext</code> = <code>ext</code> + <code>rintros</code>? Is this going too far?</p>

#### [ Reid Barton (Sep 07 2018 at 12:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133502831):
<p>Or <code>ext</code> + <code>rcases</code> depending on your point of view</p>

#### [ Simon Hudon (Sep 07 2018 at 20:49)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133529587):
<p>That shouldn't be too hard. I thought of doing it before but I had to change the import structure to do it so in the end I didn't bother</p>

#### [ Simon Hudon (Sep 09 2018 at 03:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133590026):
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span>  I just pushed this branch: <a href="https://travis-ci.org/leanprover/mathlib/builds/426239546" target="_blank" title="https://travis-ci.org/leanprover/mathlib/builds/426239546">https://travis-ci.org/leanprover/mathlib/builds/426239546</a> please let me know if it does what you wanted</p>

#### [ Scott Morrison (Sep 09 2018 at 04:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133590396):
<p>Looks like there are problems in</p>
<div class="codehilite"><pre><span></span>/home/travis/build/leanprover/mathlib/tactic/pi_instances.lean:25:14: error: type mismatch at application
  cons x
term
  x
has type
  name
but is expected to have type
  rcases_patt
</pre></div>

#### [ Simon Hudon (Sep 09 2018 at 04:15)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133590452):
<p>I prefer to think of it as undocumented feature :D</p>

#### [ Scott Morrison (Sep 09 2018 at 04:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133590508):
<p>:-)</p>

#### [ Simon Hudon (Sep 09 2018 at 05:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133592972):
<p>The documentation of that feature is getting complicated, I'll just remove it</p>

#### [ Reid Barton (Sep 09 2018 at 13:38)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133605673):
<p>Simon I've just finished building mathlib with your patch; about to try it on my example (although it will require some preparatory work).</p>

#### [ Simon Hudon (Sep 09 2018 at 13:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133605680):
<p><span class="emoji emoji-1f91e" title="fingers crossed">:fingers_crossed:</span></p>

#### [ Reid Barton (Sep 09 2018 at 13:48)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133605934):
<p>I see <code>ext</code> no longer applied <code>propext</code> to my goal, is that intentional?</p>

#### [ Reid Barton (Sep 09 2018 at 13:49)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133605952):
<p>I had something like <code>(\lam a b, f a b) = (\lam a b, g a b)</code> and I want to intro <code>a</code> and <code>b</code> and get the goal <code>f a b \iff g a b</code> -- where <code>f a b</code> and <code>g a b</code> are propositions</p>

#### [ Reid Barton (Sep 09 2018 at 13:50)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606023):
<p>anyways, it worked! I changed</p>
<div class="codehilite"><pre><span></span><span class="n">ext</span> <span class="n">a₁</span> <span class="n">a₂</span><span class="o">,</span> <span class="n">rcases</span> <span class="n">a₁</span> <span class="k">with</span> <span class="bp">⟨⟨</span><span class="n">i&#39;₁</span><span class="o">,</span> <span class="n">f₁</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">j₁</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">rcases</span> <span class="n">a₂</span> <span class="k">with</span> <span class="bp">⟨⟨</span><span class="n">i&#39;₂</span><span class="o">,</span> <span class="n">f₂</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">j₂</span><span class="bp">⟩</span><span class="o">,</span>
</pre></div>


<p>to</p>
<div class="codehilite"><pre><span></span><span class="n">ext</span> <span class="bp">⟨⟨</span><span class="n">i&#39;₁</span><span class="o">,</span> <span class="n">f₁</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">j₁</span><span class="bp">⟩</span> <span class="bp">⟨⟨</span><span class="n">i&#39;₂</span><span class="o">,</span> <span class="n">f₂</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">j₂</span><span class="bp">⟩</span><span class="o">,</span>
</pre></div>

#### [ Simon Hudon (Sep 09 2018 at 13:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606091):
<p>It is not intentional. Can you find where <code>propext</code> is labelled with <code>extentionality</code>?</p>

#### [ Reid Barton (Sep 09 2018 at 13:53)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606127):
<p>It... doesn't appear to be so marked anywhere that I can find</p>

#### [ Reid Barton (Sep 09 2018 at 13:54)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606170):
<p>Is there a way to tell <code>ext</code> to trace what it is doing?</p>

#### [ Johannes Hölzl (Sep 09 2018 at 13:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606267):
<p><code>rext</code> is very nice!</p>

#### [ Reid Barton (Sep 09 2018 at 13:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606277):
<p>Wait, maybe it never used to apply <code>propext</code>? I might have been confused because <code>set.ext</code> is very similar.</p>

#### [ Simon Hudon (Sep 09 2018 at 14:01)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606386):
<p>I think that's probably it</p>

#### [ Simon Hudon (Sep 09 2018 at 14:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606425):
<p>We can add it though</p>

#### [ Simon Hudon (Sep 09 2018 at 14:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606431):
<p>Check what happens if you add <code>attribute [extensionality] propext</code> before your proof.</p>

#### [ Reid Barton (Sep 09 2018 at 14:03)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606436):
<p><code>only constants and Pi types are supported: Prop</code></p>

#### [ Reid Barton (Sep 09 2018 at 14:05)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606491):
<p>Aha, I understand why the behavior changed.<br>
Before, it applied <code>funext</code> once and then, by chance, it happened to apply <code>set.ext</code> which is <code>funext</code> plus <code>propext</code>.<br>
Now, it (correctly) prefers to apply <code>funext</code> twice and then it gets stuck.</p>

#### [ Simon Hudon (Sep 09 2018 at 14:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606597):
<p><span class="emoji emoji-1f926" title="face palm">:face_palm:</span> oh dear! I was discussing this with Mario and saying that each type we care about is a named constant ... except for pi types. And now, the type of Prop is also not names so I have to think about making more exceptions</p>

#### [ Reid Barton (Sep 09 2018 at 14:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606754):
<p><code>expr.sort</code>, I guess?</p>

#### [ Reid Barton (Sep 09 2018 at 14:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606766):
<p>Also don't forget to implement univalence for equalities between types</p>

#### [ Simon Hudon (Sep 09 2018 at 14:14)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606824):
<p>Now then next exception should be easier to add. Can you send me your example so that I can try it out?</p>

#### [ Reid Barton (Sep 09 2018 at 14:15)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606844):
<p>I think I included one in the github issue (my real one has some dependencies)</p>

#### [ Reid Barton (Sep 09 2018 at 14:15)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606848):
<p>But I can also provide it</p>

#### [ Simon Hudon (Sep 09 2018 at 14:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606958):
<p>Or a link to the issue please</p>

#### [ Reid Barton (Sep 09 2018 at 14:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606968):
<p><a href="https://gist.github.com/rwbarton/1966db9e4ba470f2a5865f5086776f84" target="_blank" title="https://gist.github.com/rwbarton/1966db9e4ba470f2a5865f5086776f84">https://gist.github.com/rwbarton/1966db9e4ba470f2a5865f5086776f84</a>, it should compile against your branch</p>

#### [ Reid Barton (Sep 09 2018 at 14:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606974):
<p><a href="https://github.com/leanprover/mathlib/issues/246" target="_blank" title="https://github.com/leanprover/mathlib/issues/246">https://github.com/leanprover/mathlib/issues/246</a></p>

#### [ Reid Barton (Sep 09 2018 at 14:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606977):
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">set</span>
<span class="kn">example</span> <span class="o">{</span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span> <span class="o">(</span><span class="n">f</span> <span class="n">g</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">α</span> <span class="bp">→</span> <span class="kt">Prop</span><span class="o">)</span> <span class="o">:</span> <span class="n">f</span> <span class="bp">=</span> <span class="n">g</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="n">ext</span> <span class="n">a</span> <span class="n">b</span><span class="o">,</span>
  <span class="c1">-- ⊢ b ∈ f a ↔ b ∈ g a</span>
<span class="kn">end</span>
</pre></div>

#### [ Reid Barton (Sep 09 2018 at 14:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133606992):
<p>My real example is no more interesting than this as far as the propext issue is concerned--it's just a test case for the <code>rext</code> feature.</p>

#### [ Simon Hudon (Sep 09 2018 at 14:34)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133607603):
<p>Cool, that works now. I'll push it and then get some sleep :)</p>

#### [ Reid Barton (Sep 09 2018 at 14:36)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133607651):
<p>(Wait aren't we in the same time zone...)</p>

#### [ Simon Hudon (Sep 09 2018 at 14:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133607659):
<p>Are you on the east coast of the US?</p>

#### [ Simon Hudon (Sep 09 2018 at 14:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133607661):
<p>But to answer your surprise, when I program, time flies and I forget to do all kinds of stuff</p>

#### [ Simon Hudon (Sep 09 2018 at 14:38)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133607702):
<p>... including sleeping</p>

#### [ Reid Barton (Sep 09 2018 at 14:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133607754):
<p>Yes. But still have not adjusted from being in Europe and have been up for 4 hours today...</p>

#### [ Simon Hudon (Sep 09 2018 at 14:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133607767):
<p>Were you in the UK? You seem to be driving on the wrong side of the road ... the road being a stand-in for the night, and the wrong side is being awake after 4 rather than awake until 4 :D</p>

#### [ Simon Hudon (Sep 09 2018 at 14:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133607807):
<p>Yeah, my metaphors are not that enlightening ...</p>

#### [ Reid Barton (Sep 09 2018 at 14:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133607808):
<p>So we seem to be off by a full 12 hours from each other, yes</p>

#### [ Simon Hudon (Sep 09 2018 at 14:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/rext/near/133607854):
<p>For today at least</p>


{% endraw %}
