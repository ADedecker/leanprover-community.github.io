---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/34070recursoroflistisnone.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html">recursor_of "list" is none</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="171513840"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171513840" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171513840">Cyril Cohen (Jul 23 2019 at 12:38)</a>:</h4>
<p>Dear all, could someone tell me why the result of</p>
<div class="codehilite"><pre><span></span><span class="n">run_cmd</span> <span class="n">do</span> <span class="n">env</span> <span class="err">←</span> <span class="n">get_env</span><span class="o">,</span> <span class="k">let</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">recursor_of</span> <span class="s2">&quot;list&quot;</span><span class="o">,</span> <span class="n">trace</span> <span class="n">r</span>
</pre></div>


<p>is <code>none</code>?</p>

<a name="171514476"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171514476" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171514476">Chris Hughes (Jul 23 2019 at 12:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="bp">#</span><span class="kn">eval</span> <span class="n">do</span> <span class="n">env</span> <span class="err">←</span> <span class="n">get_env</span><span class="o">,</span> <span class="k">let</span> <span class="n">r</span> <span class="o">:=</span> <span class="n">env</span><span class="bp">.</span><span class="n">recursor_of</span> <span class="bp">`</span><span class="n">list</span><span class="bp">.</span><span class="n">rec</span><span class="o">,</span> <span class="n">trace</span> <span class="n">r</span> <span class="c1">--(some list)</span>
</pre></div>


<p>Looks like it returns a type given a recursor.</p>

<a name="171515311"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171515311" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171515311">Kenny Lau (Jul 23 2019 at 12:59)</a>:</h4>
<p>from my experiments it looks like that if it returns none, then the recursor is X.rec</p>

<a name="171515890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171515890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171515890">Chris Hughes (Jul 23 2019 at 13:05)</a>:</h4>
<p>Is there an inductive type whose recursor is not <code>X.rec</code>?</p>

<a name="171516178"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171516178" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171516178">Kenny Lau (Jul 23 2019 at 13:08)</a>:</h4>
<p>I don't think so</p>

<a name="171516952"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171516952" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171516952">Wojciech Nawrocki (Jul 23 2019 at 13:17)</a>:</h4>
<p>C++ doc says: "If  n is the name of an elimination rule in env, then return the name of the inductive datatype D<br>
    s.t. n is an elimination rule of D. Otherwise, return none."</p>

<a name="171586890"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171586890" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171586890">Cyril Cohen (Jul 24 2019 at 08:15)</a>:</h4>
<blockquote>
<p>C++ doc says: "If  n is the name of an elimination rule in env, then return the name of the inductive datatype D<br>
    s.t. n is an elimination rule of D. Otherwise, return none."</p>
</blockquote>
<p>Thanks! Looks like the lean doc is wrong (<code>Return the recursor of the given inductive datatype</code>). Where can I find the C++ doc?</p>

<a name="171587111"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171587111" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171587111">Cyril Cohen (Jul 24 2019 at 08:19)</a>:</h4>
<blockquote>
<p>Is there an inductive type whose recursor is not <code>X.rec</code>?</p>
</blockquote>
<p>Since <code>recursor_of</code> did not work, I am indeed using <code>X.rec</code>, but name-based meta-programming is not a very good practice in my experience.</p>

<a name="171588820"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171588820" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171588820">Mario Carneiro (Jul 24 2019 at 08:51)</a>:</h4>
<p>It's not always <code>rec</code> :/</p>

<a name="171588868"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171588868" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171588868">Mario Carneiro (Jul 24 2019 at 08:52)</a>:</h4>
<p>Sometimes it's <code>drec</code></p>

<a name="171588889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171588889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171588889">Mario Carneiro (Jul 24 2019 at 08:52)</a>:</h4>
<p>Or rather, I think <code>X.rec</code> always exists but it may not be primitive</p>

<a name="171589124"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/recursor_of%20%22list%22%20is%20none/near/171589124" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/34070recursoroflistisnone.html#171589124">Mario Carneiro (Jul 24 2019 at 08:56)</a>:</h4>
<p>I don't see any docs, but from <a href="https://github.com/leanprover-community/lean/blob/master/src/library/vm/vm_environment.cpp#L183-L188" target="_blank" title="https://github.com/leanprover-community/lean/blob/master/src/library/vm/vm_environment.cpp#L183-L188">https://github.com/leanprover-community/lean/blob/master/src/library/vm/vm_environment.cpp#L183-L188</a> it looks like Wojciech's description is correct</p>


{% endraw %}

{% include archive_update.html %}