---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/11825dotnotationandinheritance.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html">dot notation and inheritance</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="173384558"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173384558" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173384558">Sebastien Gouezel (Aug 16 2019 at 15:51)</a>:</h4>
<p>I find dot notation extremely useful. However, it has some shortcomings. I would like to know if there are ways to avoid them, or if I will have to live with them. Here is a basic example, with a simple class <code>basic</code>, and another class <code>extended</code> that extends it. If <code>basic</code> has a field <code>n</code>, then <code>a.n</code> works for <code>a : basic</code>, and <code>b.n</code> works for <code>b : extended</code> (I guess by some parser trickery) but it is displayed as <code>b.to_basic.n</code> in a proof state (in tactic mode). Let me know define a function <code>basic.foo</code> doing whatever. Then <code>a.foo</code> works, as well as <code>b.to_basic.foo</code>, but <code>b.foo</code> doesn't (because the parser (?) is looking for a function <code>extended.foo</code> as <code>b</code> has type extended).</p>

<a name="173384641"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173384641" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173384641">Sebastien Gouezel (Aug 16 2019 at 15:52)</a>:</h4>
<p>Working example:</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">basic</span> <span class="o">:=</span> <span class="o">(</span><span class="n">n</span> <span class="o">:</span> <span class="bp">ℕ</span><span class="o">)</span>

<span class="kn">structure</span> <span class="n">extended</span> <span class="kn">extends</span> <span class="n">basic</span>

<span class="kn">lemma</span> <span class="n">basic</span><span class="bp">.</span><span class="n">foo</span> <span class="o">(</span><span class="n">a</span> <span class="o">:</span> <span class="n">basic</span><span class="o">)</span> <span class="o">:</span> <span class="n">a</span><span class="bp">.</span><span class="n">n</span> <span class="bp">=</span> <span class="n">a</span><span class="bp">.</span><span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- goal is a.n = a.n</span>
  <span class="n">refl</span>
<span class="kn">end</span>

<span class="kn">lemma</span> <span class="n">foo_ext</span> <span class="o">(</span><span class="n">b</span> <span class="o">:</span> <span class="n">extended</span><span class="o">)</span> <span class="o">:</span> <span class="n">b</span><span class="bp">.</span><span class="n">n</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">.</span><span class="n">n</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="c1">-- goal is (b.to_basic).n = (b.to_basic).n</span>
  <span class="c1">-- refl -- works</span>
  <span class="n">exact</span> <span class="n">b</span><span class="bp">.</span><span class="n">to_basic</span><span class="bp">.</span><span class="n">foo</span> <span class="c1">-- works</span>
  <span class="c1">-- exact b.foo -- doesn&#39;t work</span>
<span class="kn">end</span>
</pre></div>

<a name="173384887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173384887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173384887">Sebastien Gouezel (Aug 16 2019 at 15:55)</a>:</h4>
<p>In python, there is a mechanism by which, if a class doesn't have some attribute, then the system will look for the attribute in classes it inherits from. So, in the above example, it would find <code>b.foo</code>. I have two questions:</p>
<ul>
<li>is there a way to make this work in Lean?</li>
<li>In the proof state, is there a way to display <code>b.n</code> instead of <code>b.to_basic.n</code>?</li>
</ul>
<p>A positive answer to any of these questions would improve the situation a lot for me, as proofs with nested structures become very messy otherwise. This is all for new style structures, by the way.</p>

<a name="173388255"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173388255" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173388255">Floris van Doorn (Aug 16 2019 at 16:42)</a>:</h4>
<p>I don't think there is a good structured way to do this. </p>
<p>A hackish way that might help a bit with (2): you could do something like <code>local postfix </code>↟<code>:max := extended.to_basic</code>.</p>

<a name="173391414"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173391414" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173391414">Kevin Buzzard (Aug 16 2019 at 17:25)</a>:</h4>
<p>A related issue is that <code>group_hom.map_mul</code>doesn't exist even though this is what a mathematician would guess it was called. I just want to make more fields to fix it but I am told by the CS guys that instead I have to write good docs</p>

<a name="173391509"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173391509" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173391509">Kevin Buzzard (Aug 16 2019 at 17:27)</a>:</h4>
<p>The docs are supposed to contain a dictionary between what you want to call it and what you have to call it</p>

<a name="173391513"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173391513" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173391513">Sebastien Gouezel (Aug 16 2019 at 17:27)</a>:</h4>
<p>Well, what prevents you from defining it (as a lemma, I mean, not as a field)?</p>

<a name="173391532"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173391532" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173391532">Kevin Buzzard (Aug 16 2019 at 17:27)</a>:</h4>
<p>Apparently they don't even want the namespace to exist</p>

<a name="173391612"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173391612" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173391612">Kevin Buzzard (Aug 16 2019 at 17:28)</a>:</h4>
<p>I don't understand why. You can fix your issues by just defining some stuff, right? Or is it worse than that?</p>

<a name="173391666"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173391666" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173391666">Kevin Buzzard (Aug 16 2019 at 17:29)</a>:</h4>
<p>Use the old structure command and just hack things out. That solves your problems right?</p>

<a name="173391751"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173391751" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173391751">Kevin Buzzard (Aug 16 2019 at 17:30)</a>:</h4>
<p>I'm sorry I can't check, I'm away from Lean</p>

<a name="173392106"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173392106" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173392106">Sebastien Gouezel (Aug 16 2019 at 17:35)</a>:</h4>
<p>You don't need the namespace to exist, you can define the lemma <code>group_hom.map_mul</code> if you like.<br>
My issues are not reallyproblems I can't solve, but things that could be massively improved. Maybe in Lean 4. </p>
<p>The old structure command is not really a solution, as it means you need to restate all your lemmas in the new namespace. What I would like to avoid is code duplication, and clutter in the proofs.</p>

<a name="173392479"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173392479" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173392479">Kevin Buzzard (Aug 16 2019 at 17:40)</a>:</h4>
<p>I don't understand what the problem with code duplication is. Who cares?</p>

<a name="173392715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173392715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173392715">Kevin Buzzard (Aug 16 2019 at 17:44)</a>:</h4>
<p>Mathematicians want <code>group_hom.map_mul </code> because it's what it's called. I couldn't care less if the parser just ate <code>group_hom</code> and replaced it with <code>monoid_hom</code> -- as far as I am concerned these two tokens are syntactically equal but I want to be able to tell lean's pretty printer what I want to see because mathematicians simply do not care about monoids and it makes the software more intimidating</p>

<a name="173392765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173392765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173392765">Kevin Buzzard (Aug 16 2019 at 17:45)</a>:</h4>
<p><span class="user-mention" data-user-id="228602">@Sian Carey</span> has taught me a lot of things about how a good mathematician who is a complete beginner in Lean still has to wrestle with group homomorphisms</p>

<a name="173393838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/dot%20notation%20and%20inheritance/near/173393838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/11825dotnotationandinheritance.html#173393838">Floris van Doorn (Aug 16 2019 at 17:59)</a>:</h4>
<p>I agree that <code>is_group_hom.map_mul</code> should exist. What is the argument against it? We already have both <code>is_mul_hom.map_mul</code> and <code>is_monoid_hom.map_mul</code>. I understand that generally we don't want to state the same lemma twice, but for the sake of projection notation, it seems useful.</p>


{% endraw %}

{% include archive_update.html %}