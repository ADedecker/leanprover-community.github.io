---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/56079LeaninstallationinCoCalc.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html">Lean installation in CoCalc</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="188563583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188563583" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188563583">Rob Lewis (Feb 19 2020 at 17:06)</a>:</h4>
<p>The CoCalc talk in another thread reminded me that I should start getting things ready for my course next year. This led to a chat with <span class="user-mention" data-user-id="128565">@Harald Schilly</span> about how CoCalc installs Lean/mathlib. Irrelevant for my course, but probably relevant to others, so I'm bringing it here.</p>
<p>It would probably be good to install Lean through the version manager elan, with a reasonable default version (3.5.1?) and a handful of options pre-installed. Right now it's a plain install of a 3.4.2 binary.</p>
<p>What about pre-installing versions of mathlib? leanpkg has a notion of a global install of a package. But I'm not sure it's the best move here. <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> doesn't think it will play well with elan. And it probably interacts badly with non-global mathlib dependencies, which people might use if they want a newer version than whatever CoCalc gives.</p>
<p>CoCalc could provide directories containing (compiled) mathlibs for each Lean version it pre-installs. Users would have to set up projects with leanpkg.toml files pointing to the right spot. Fine for courses that can distribute this project, trickier for someone who just wants to open a .lean file in CoCalc and start using real numbers.</p>
<p>As I understand it, free CoCalc doesn't allow accessing external websites. So adding packages from GitHub won't work, nor will elan on new versions of Lean, nor will cache-olean/update-mathlib. This is why I'm suggesting pre-installing things, although of course this a reason to pay for CoCalc :) </p>
<p>Thoughts? ( cc <span class="user-mention" data-user-id="116034">@William Stein</span> )</p>

<a name="188564988"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188564988" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188564988">William Stein (Feb 19 2020 at 17:23)</a>:</h4>
<p>I can tell you that by default it is very confusing for people to get access to mathlib on CoCalc if they aren't experts.   We CoCalc admins definitely do NOT know what to do in order to make mathlib (or other libraries?) available by default, though we've tried and failed repeatedly.    If you want to see precisely what our lean install is on cocalc now, just open a Terminal in any cocalc project (+New --&gt; Terminal), then type <code>cd /ext/lean</code> and <code>ls</code>:</p>

<a name="188564993"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188564993" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188564993">William Stein (Feb 19 2020 at 17:23)</a>:</h4>
<div class="codehilite"><pre><span></span>
</pre></div>

<a name="188565163"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188565163" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188565163">William Stein (Feb 19 2020 at 17:25)</a>:</h4>
<div class="codehilite"><pre><span></span>/ext/lean$ ls
lean  lean-3.4.1-linux  lean-3.4.2-linux
/ext/lean$ which lean
/ext/bin/lean
/ext/lean$ ls -l lean
lrwxrwxrwx 1 salvus salvus 16 Feb 12  2019 lean -&gt; lean-3.4.2-linux
/ext/lean$ cd lean-3.4.2-linux/
/ext/lean/lean-3.4.2-linux$ ls
bin  include  lib  mathlib  mathlib-lean-3.4.2
/ext/lean/lean-3.4.2-linux$ lean --path
{
  &quot;is_user_leanpkg_path&quot;: true,
  &quot;leanpkg_path_file&quot;: &quot;/home/user/.lean/leanpkg.path&quot;,
  &quot;path&quot;: [
    &quot;/ext/lean/lean-3.4.2-linux/bin/../library&quot;,
    &quot;/ext/lean/lean-3.4.2-linux/bin/../lib/lean/library&quot;
  ]
}
</pre></div>


<p>Note that we have a copy of mathlib but it's not in either of the directories of the default lean search path, which might be why it doesn't work.  Should we move it into a subdirectory called "library"?</p>

<a name="188566515"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188566515" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188566515">Rob Lewis (Feb 19 2020 at 17:40)</a>:</h4>
<p>The <code>library</code> subdirectory is for the core Lean library. I'm guessing you'd have trouble moving mathlib there. With your current setup, you can do the following:</p>
<div class="codehilite"><pre><span></span>~$ leanpkg install /ext/lean/lean-3.4.2-linux/mathlib-lean-3.4.2/
</pre></div>


<p>(don't do it inside <code>/ext/lean/lean-3.4.2-linux/</code>, apparently). This is a global install of mathlib so it should be available whenever you open a Lean file -- you might need  to restart the Lean server if it was running already.</p>

<a name="188566571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188566571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188566571">Rob Lewis (Feb 19 2020 at 17:41)</a>:</h4>
<p>This is fine if your users are okay with a fixed version of Lean and mathlib.</p>

<a name="188567078"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188567078" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188567078">Patrick Massot (Feb 19 2020 at 17:47)</a>:</h4>
<p>One can think that users of CoCalc don't need many versions of mathlib (they would use Lean locally if they were that serious about it). But I'm worried for teachers: what if I start a course using mathlib and suddenly CoCalc updates mathlib? What I did last year was to distribute a compiled mathlib using CoCalc distribution mechanism. Let's dream a bit here. Let's say some script downloads a mathlib nightly on the first of every month and call it <code>mathlib_january</code> etc. Then users could add a leanpkg dependency to <code>mathlib_february</code> or something. Then every year automatically erases ancient mathlibs.</p>

<a name="188567134"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188567134" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188567134">Patrick Massot (Feb 19 2020 at 17:47)</a>:</h4>
<p>This shouldn't be a Lean specific issue however. What happens to existing projects when Sage is updated? I guess Sage has some breaking changes from times to times.</p>

<a name="188569371"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188569371" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188569371">William Stein (Feb 19 2020 at 18:11)</a>:</h4>
<blockquote>
<p>This shouldn't be a Lean specific issue however. What happens to existing projects when Sage is updated? I guess Sage has some breaking changes from times to times.</p>
</blockquote>
<ol>
<li>
<p>We keep all past versions of Sage, and have a sage_select command so users can choose a default.  Right now things are extra complicated because the last Sage update was python2 --&gt; python3!    With Jupyter the situation is very good since there is no default sage version  for Jupyter notebooks  -- you have to explicitly choose a version the first time, and then it defaults to that afterwards and is encoded in the ipynb file, so you get that version henceforth when using that notebook.  If an instructor prepares course materials with Sage-8.9, then all students will be using sage-8.9 when they open that notebook, even if we installed sage-9.1... unless sage-8.9 isn't available and then they get a message and select from the closes related kernel.       This is one thing  Jupyter really got right. </p>
</li>
<li>
<p>We do have several point in time <em>snapshots</em> of the entire (several hundred GB) install stack for a project, which can be selected in project settings.  Then no matter what upgrades happen for a default cocalc project, they don't happen for that project.   People asked for this, but in practice don't use it much -- for most software, people tend to prefer the newest version with whatever bugfixes are in it (plus documentation parity with the web) to a static version.   We also have many completely custom images (using the mybinder spec) and some classes use this for the whole class.    We could do more to make this more straightforward to use though.</p>
</li>
</ol>

<a name="188569552"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188569552" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188569552">William Stein (Feb 19 2020 at 18:13)</a>:</h4>
<p>We'll try <code>leanpkg install /ext/lean/lean-3.4.2-linux/mathlib-lean-3.4.2/</code>since this will at least be a good start.   Would this break people being able to install their own mathlib locally that overrides the global one?</p>

<a name="188569885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188569885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188569885">Harald Schilly (Feb 19 2020 at 18:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="110596">Rob Lewis</span> <a href="#narrow/stream/113488-general/topic/Lean.20installation.20in.20CoCalc/near/188566515" title="#narrow/stream/113488-general/topic/Lean.20installation.20in.20CoCalc/near/188566515">said</a>:</p>
<div class="codehilite"><pre><span></span>```
~$ leanpkg install /ext/lean/lean-3.4.2-linux/mathlib-lean-3.4.2/
```
(don&#39;t do it inside `/ext/lean/lean-3.4.2-linux/`, apparently).
</pre></div>


<p>Sorry, I'm not 100% sure about that. Does it matter in which directory I run that <code>leanpkg install</code> ? Not inside the one you mention?</p>

<a name="188570395"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188570395" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188570395">Rob Lewis (Feb 19 2020 at 18:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116034">William Stein</span> <a href="#narrow/stream/113488-general/topic/Lean.20installation.20in.20CoCalc/near/188569552" title="#narrow/stream/113488-general/topic/Lean.20installation.20in.20CoCalc/near/188569552">said</a>:</p>
<blockquote>
<p>We'll try <code>leanpkg install /ext/lean/lean-3.4.2-linux/mathlib-lean-3.4.2/</code>since this will at least be a good start.   Would this break people being able to install their own mathlib locally that overrides the global one?</p>
</blockquote>
<p>I'm not sure -- will try to test locally. Maybe someone else here knows off the top of their head? :)</p>

<a name="188570620"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188570620" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188570620">Rob Lewis (Feb 19 2020 at 18:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="137337">Harald Schilly</span> <a href="#narrow/stream/113488-general/topic/Lean.20installation.20in.20CoCalc/near/188569885" title="#narrow/stream/113488-general/topic/Lean.20installation.20in.20CoCalc/near/188569885">said</a>:</p>
<blockquote>
<p>Sorry, I'm not 100% sure about that. Does it matter in which directory I run that <code>leanpkg install</code> ? Not inside the one you mention?</p>
</blockquote>
<p>Running <code>leanpkg install /ext/lean/lean-3.4.2-linux/mathlib-lean-3.4.2/</code> anywhere outside of <code>/ext/lean</code> should be fine, is my guess. I got weird errors when I did it there, but then I switched to <code>~</code> and it worked.</p>

<a name="188570770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188570770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188570770">Rob Lewis (Feb 19 2020 at 18:28)</a>:</h4>
<p>Oh, I think it has to be done somewhere you have write access.</p>

<a name="188570828"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188570828" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188570828">Rob Lewis (Feb 19 2020 at 18:28)</a>:</h4>
<p>That's why it didn't work in <code>/ext/lean</code>.</p>

<a name="188570886"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188570886" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188570886">Harald Schilly (Feb 19 2020 at 18:29)</a>:</h4>
<p>ok, I tried that <code>leanpkg install ...</code>and all that happened was it changed files in my <code>$HOME/.lean</code> directory.</p>
<p>So, just to clarify: what we here at cocalc aim for is to have lean + mathlib + other libs (if there is a need) at a global location, which is read-only. That directory is accessible from each and every project on cocalc. Then, when lean starts, it should pick up that global mathlib. With Linux or Python, it is possible to tweak a <code>PATH</code> or <code>PYTHONPATH</code> variable, containing a list of directories where it should search for binaries or a library. I suppose with LEAN there is nothing like that and you have to configure this in your local directory? If that's the case, this might only work if we install mathlib + other libs in that <code>builtin_path</code> directory (I saw that in a <code>leanpkg.path</code> file)</p>

<a name="188571005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188571005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188571005">Harald Schilly (Feb 19 2020 at 18:30)</a>:</h4>
<p>ok, hmm, I think I should read up in detail what the install command is doing.</p>

<a name="188571390"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188571390" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188571390">Kevin Buzzard (Feb 19 2020 at 18:35)</a>:</h4>
<p>Note: Rob points out that some of this post is incorrect</p>
<p>I think <code>install</code> is how a user installs dependencies for their project. For example many mathematics projects have a dependency on mathlib. The <code>install</code> command, for me, would edit <code>leanpkg.toml</code> to indicate that my project relies on mathlib (or more precisely on a certain commit of mathlib). Then <code>leanpkg configure</code> would download that particular commit and put it into <code>_target</code>, and then, if you have all the user tools installed, <code>update-mathlib</code> would download compiled binaries for the version of mathlib you chose. </p>
<p>Having a stable version of Lean is eminently sensible. 3.5.1 is just a bugfix for 3.4.2 really, I think, so you should probably use that. But I have always downloaded my own mathlibs when using lean on cocalc, because different project rely on different things and mathlib changes can be non-backwards-compatible.</p>

<a name="188571963"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188571963" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188571963">William Stein (Feb 19 2020 at 18:41)</a>:</h4>
<p>I just tried typing <code>leanpkg install /ext/lean/lean-3.4.2-linux/mathlib-lean-3.4.2/</code> in a cocalc project, then creating a lean file and putting a bunch of code that uses mathlib from <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/theories/naturals.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/theories/naturals.md">here</a> in, and it works (no errors in output).</p>

<a name="188572058"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188572058" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188572058">Rob Lewis (Feb 19 2020 at 18:42)</a>:</h4>
<p>Kevin, <code>leanpkg install</code> is different than <code>leanpkg add</code>.</p>

<a name="188572277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188572277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188572277">Rob Lewis (Feb 19 2020 at 18:45)</a>:</h4>
<p>Hmm. When you're outside a Lean project (ie no leanpkg.toml in a directory below you), the <code>leanpkg_path_file</code> value shown by <code>lean --path</code> is different. It doesn't exist on my machine. I wonder if creating that file would act as a "default" path file, and what exactly needs to go in to direct it to a default mathlib install.</p>

<a name="188572285"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188572285" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188572285">William Stein (Feb 19 2020 at 18:45)</a>:</h4>
<p>I could make it so that when cocalc is about to start the lean server it first checks to see if ~/.lean is empty, and in that case runs <code>leanpkg install /ext/lean/lean-3.4.2-linux/mathlib-lean-3.4.2/</code>.  Then mathlib would work for random users (esp without internet access on cocalc), but if anybody needs to do something custom, they can just delete and customize ~/.lean however they want and it won't get touched.</p>

<a name="188572401"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188572401" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188572401">William Stein (Feb 19 2020 at 18:46)</a>:</h4>
<p>Anyway, making a change to run a leanpkg install of mathlib when first running lean wouldn't be too hard...  it also doesn't waste disk space.</p>

<a name="188572459"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188572459" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188572459">Rob Lewis (Feb 19 2020 at 18:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116034">William Stein</span> <a href="#narrow/stream/113488-general/topic/Lean.20installation.20in.20CoCalc/near/188572285" title="#narrow/stream/113488-general/topic/Lean.20installation.20in.20CoCalc/near/188572285">said</a>:</p>
<blockquote>
<p>I could make it so that when cocalc is about to start the lean server it first checks to see if ~/.lean is empty, and in that case runs <code>leanpkg install /ext/lean/lean-3.4.2-linux/mathlib-lean-3.4.2/</code>.  Then mathlib would work for random users (esp without internet access on cocalc), but if anybody needs to do something custom, they can just delete and customize ~/.lean however they want and it won't get touched.</p>
</blockquote>
<p>That would work, except manually editing a hidden directory isn't the normal way people will try to update mathlib. More likely they'll have a local Lean project and run <code>leanpkg add ...</code> to get a copy from GitHub. The pre-installed one might still be available and cause conflicting imports, I'm not sure.</p>

<a name="188572689"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188572689" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188572689">William Stein (Feb 19 2020 at 18:50)</a>:</h4>
<p>My main motivation is new students and random people who want to solve some problems using mathlib + lean that say <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span>  tweets about.   They wouldn't have access to github if they are using cocalc for free, and anyways it would be nice to avoid the friction of opening a terminal and using <code>leanpkg add</code>.  The question is if both of these audiences can be served without confusion.</p>

<a name="188572755"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188572755" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188572755">Rob Lewis (Feb 19 2020 at 18:51)</a>:</h4>
<p>Right. It seems like a reasonable default.</p>

<a name="188572765"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188572765" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188572765">William Stein (Feb 19 2020 at 18:51)</a>:</h4>
<blockquote>
<p>That would work, except manually editing a hidden directory isn't the normal way people will try to update mathlib. </p>
</blockquote>
<p>If one does <code>leanpkg install /ext/lean/lean-3.4.2-linux/mathlib-lean-3.4.2/</code> in a clean account, then later does <code>leanpkg add ...</code>, what happens?   Maybe the second command gives them the latest mathlib version and all is good?</p>

<a name="188572960"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188572960" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188572960">William Stein (Feb 19 2020 at 18:53)</a>:</h4>
<p>I've made this issue, which I'll look into later today (have to go now): <a href="https://github.com/sagemathinc/cocalc/issues/4393" target="_blank" title="https://github.com/sagemathinc/cocalc/issues/4393">https://github.com/sagemathinc/cocalc/issues/4393</a></p>

<a name="188572962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188572962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188572962">Rob Lewis (Feb 19 2020 at 18:53)</a>:</h4>
<p>I'm starting a VM to try it from a clean slate.</p>

<a name="188573083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188573083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188573083">William Stein (Feb 19 2020 at 18:54)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> thanks.   You can also easily get a new anonymous throw-away cocalc project by opening the following link in a private browsing session:  <a href="https://cocalc.com/app?anonymous=true" target="_blank" title="https://cocalc.com/app?anonymous=true">https://cocalc.com/app?anonymous=true</a>  </p>
<p>Never mind -- that wouldn't have internet access.</p>

<a name="188574943"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%20installation%20in%20CoCalc/near/188574943" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/56079LeaninstallationinCoCalc.html#188574943">Rob Lewis (Feb 19 2020 at 19:14)</a>:</h4>
<p>Okay, I think you're safe with this setup. Run <code>leanpkg install /ext/...</code> in/below <code>~</code>. If someone creates a Lean project anywhere in <code>~</code>, the new <code>leanpkg.path</code> seems to override the global install. This happens whether or not mathlib is added to the project with <code>leanpkg add</code>. The global install is unavailable in the project as soon as the project is created.</p>


{% endraw %}

{% include archive_update.html %}