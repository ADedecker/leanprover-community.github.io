---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/36642Proofsize.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/36642Proofsize.html">Proof size</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="182374889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Proof%20size/near/182374889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/36642Proofsize.html#182374889">Patrick Massot (Dec 02 2019 at 18:33)</a>:</h4>
<p>This is a meta-question. How would you measure the size of a proof? Consider for instance <code>rat.mul_one</code>, from <code>data/rat/basic.lean</code>. This is a two lines, 111 characters long tactic proof, including a call to <code>simp</code>. </p>
<div class="codehilite"><pre><span></span><span class="kn">protected</span> <span class="kn">theorem</span> <span class="n">mul_one</span> <span class="o">:</span> <span class="n">a</span> <span class="bp">*</span> <span class="mi">1</span> <span class="bp">=</span> <span class="n">a</span> <span class="o">:=</span>
<span class="n">num_denom_cases_on&#39;</span> <span class="n">a</span> <span class="err">$</span> <span class="bp">λ</span> <span class="n">n</span> <span class="n">d</span> <span class="n">h</span><span class="o">,</span>
<span class="k">by</span> <span class="n">change</span> <span class="o">(</span><span class="mi">1</span><span class="o">:</span><span class="n">ℚ</span><span class="o">)</span> <span class="k">with</span> <span class="mi">1</span> <span class="bp">/.</span> <span class="mi">1</span><span class="bp">;</span> <span class="n">simp</span> <span class="o">[</span><span class="n">h</span><span class="o">]</span>
</pre></div>


<p>Then try:</p>
<div class="codehilite"><pre><span></span><span class="kn">open</span> <span class="n">tactic</span>
<span class="n">run_cmd</span>
<span class="n">do</span> <span class="n">env</span> <span class="err">←</span> <span class="n">get_env</span><span class="o">,</span>
   <span class="n">decl</span> <span class="err">←</span> <span class="n">env</span><span class="bp">.</span><span class="n">get</span> <span class="bp">`</span><span class="n">rat</span><span class="bp">.</span><span class="n">mul_one</span><span class="o">,</span>
   <span class="n">trace</span> <span class="o">(</span><span class="n">sizeof</span> <span class="err">$</span> <span class="n">to_string</span> <span class="n">decl</span><span class="bp">.</span><span class="n">value</span><span class="o">)</span>

<span class="n">run_cmd</span>
<span class="n">do</span> <span class="n">env</span> <span class="err">←</span> <span class="n">get_env</span><span class="o">,</span>
   <span class="n">decl</span> <span class="err">←</span> <span class="n">env</span><span class="bp">.</span><span class="n">get</span> <span class="bp">`</span><span class="n">rat</span><span class="bp">.</span><span class="n">mul_one</span><span class="o">,</span>
   <span class="k">proof</span> <span class="err">←</span> <span class="n">pp</span> <span class="n">decl</span><span class="bp">.</span><span class="n">value</span><span class="o">,</span>
   <span class="n">trace</span> <span class="o">(</span><span class="n">sizeof</span> <span class="err">$</span> <span class="n">to_string</span> <span class="k">proof</span><span class="o">)</span>
</pre></div>


<p>The first command says this proof is 7751 character long, and the second one says it pretty prints to 2015 characters. How long would you say this proof is? Do you have a better way to ask Lean what it thinks about this?</p>


{% endraw %}

{% include archive_update.html %}