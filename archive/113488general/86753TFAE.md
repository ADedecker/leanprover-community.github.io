---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/86753TFAE.html
---

## Stream: [general](index.html)
### Topic: [TFAE](86753TFAE.html)

---

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 07 2018 at 21:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133533223):
What's the best way to structure the statement and proof when I want to prove (1), (2), and (3) are equivalent by showing (1) => (2) => (3) => (1)?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 07 2018 at 22:01)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133533668):
Let's say (1) is the definition of something, and (2) and (3) are alternate definitions and I'd like to end up with (1) <=> (2) and (1) <=> (3).
I could just do something very straightforward (prove (1) => (2), (2) => (3), (3) => (1) as separate top-level lemmas, then conclude (1) <=> (2) and (1) <=> (3) manually) but maybe there is a better idea.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Keeley Hoek (Sep 08 2018 at 05:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133552573):
it'd be cool if there was a tactic for this

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 08 2018 at 05:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133552679):
I'm not sure how a tactic could help. The problem is the proof structuring, you don't want all three major parts to be in one big proof

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 08 2018 at 05:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133552721):
It is easy enough to encode the idea of a cycle in a preorder, and deduce equivalence of all parts, which you could prove once and for all and apply as a theorem for your 11-part theorem

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 08 2018 at 05:53)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133552726):
For the case of 2 or 3 statements, it's easier just to use the lemmas as given

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 08 2018 at 05:54)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133552773):
I'm not sure I've ever had a case of 4+ statements proven in cyclic order where I actually care about all 4 equivalences

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Keeley Hoek (Sep 08 2018 at 06:26)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133553769):
I was just thinking of a tactic which turns a single goal "a iff b iff c iff d iff ..." into a cyclic set of goals "a=>b", "b=>c", etc. Probably itd be too yuck for anything big?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 08 2018 at 06:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133553893):
There are two problems with that: (1) the goals might be big - if they aren't there isn't really a need for this (2) The output is `a iff b iff c` - what is that? If it is a big conjunction then there is still work to be done to make a usable lemma

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Keeley Hoek (Sep 08 2018 at 06:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133553898):
yep ok sure

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 08 2018 at 10:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133559919):
```quote
(2) The output is `a iff b iff c` - what is that? If it is a big conjunction then there is still work to be done to make a usable lemma
```
Yeah, this is where I really got stuck

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Chris Hughes (Sep 08 2018 at 11:32)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133561811):
Also `a iff b iff c` is not the same as `a iff b and b iff c`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 08 2018 at 11:45)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133562136):
I guess one out-there idea is to define
```lean
def the_following_are_equivalent (ps : list Prop) := ∀ p q ∈ ps, p ↔ q
```
and then a helper function which extracts for a given pair of indices implication (or bi-implication) between the corresponding Props

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 08 2018 at 11:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133562550):
Mario I do agree that when the list is really long, typically some of the equivalent statements are not included for later use, but rather to elucidate the structure of the argument. Or to say: here is a variant definition of something and you might wonder whether it is equivalent to the official one; it is (and now we never need to talk about it again).

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Simon Hudon (Sep 09 2018 at 01:54)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133586841):
I could imagine a presentation like:

```lean
lemma my_interesting_equivalences :
   the_following_are_equivalent 
    [ formula1,
      formula2,
      formula3 ] :=
begin
  circular_implication,
  { /- proof1 -/ },
  { /- proof2 -/ },
  { /- proof3 -/ },
end
```

and have `circular_implication` extract the two by two equivalences as separate lemmas: `my_interesting_equivalences_1_2`, my_interesting_equivalences_1_3`, my_interesting_equivalences_2_3`.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Simon Hudon (Sep 09 2018 at 01:56)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133586909):
Or, even better:

```lean
lemma my_interesting_equivalences :
   the_following_are_equivalent
    [ Reids_defn ::= formula1,
      Simons_defn ::= formula2,
      Marios_defn ::= formula3 ] :=
begin
  circular_implication,
  { /- proof1 -/ },
  { /- proof2 -/ },
  { /- proof3 -/ },
end
```

and then have `my_interesting_equivalences_Reids_defn_iff_Simons_defn` etc and make `Reids_defn`, `Simons_defn` and `Marios_defn` into stand alone definitions.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 09 2018 at 02:01)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133587038):
This won't work inside a theorem, you can't make new definitions

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 09 2018 at 02:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133587079):
Also, that's a quadratic number of generated lemmas

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Simon Hudon (Sep 09 2018 at 02:06)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133587184):
```quote
This won't work inside a theorem, you can't make new definitions
```
I'm fairly sure that you can.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Simon Hudon (Sep 09 2018 at 02:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133587234):
```quote
Also, that's a quadratic number of generated lemmas
```
Yes it is but that's what you're trying to prove if you use this approach, no? You could also state only consecutive equivalences but I think that would make the use of those lemmas harder.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Kenny Lau (Sep 09 2018 at 02:16)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133587455):
I know there's a tactic that can generate iff statements for any inductive type

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 09 2018 at 02:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133587500):
Here's how I think you can do it with just definitions:
```lean
import data.list.basic

namespace list

@[simp] def last' {α} : α → list α → α
| a []     := a
| a (b::l) := last' b l

def TFAE (l : list Prop) : Prop := ∀ x ∈ l, ∀ y ∈ l, x ↔ y

theorem TFAE_of_cycle {a b} {l : list Prop} :
  list.chain (→) a (b::l) → (last' b l → a) → TFAE (a::b::l) :=
sorry

def TFAE.out {l} (h : TFAE l) (n₁ n₂)
 (h₁ : n₁ < list.length l . tactic.exact_dec_trivial)
 (h₂ : n₂ < list.length l . tactic.exact_dec_trivial) :
  list.nth_le l n₁ h₁ ↔ list.nth_le l n₂ h₂ :=
h _ (list.nth_le_mem _ _ _) _ (list.nth_le_mem _ _ _)

theorem TFAE_test (x y : ℕ) : TFAE [true, x = x, y = y] :=
TFAE_of_cycle (by simp) (λ _, trivial)

example (x y : ℕ) : x = x ↔ y = y := (TFAE_test x y).out 1 2

end list
```

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 09 2018 at 02:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133587508):
A tactic could be used to unfold the definitions involved in `TFAE_of_cycle`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 09 2018 at 02:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133587509):
then again, `simp` already does that

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Kenny Lau (Sep 09 2018 at 02:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133587554):
wow that's so magical

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 09 2018 at 02:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133587995):
Another option besides `TFAE.out` is to use
```
theorem TFAE_iff_iff {a l} : TFAE (a::l) ↔ ∀ b ∈ l, a ↔ b := sorry
```
as a simp lemma, that way you can simplify a `TFAE` into a bunch of iffs with the first thing in the list (which is usually what you will want to have as the output theorems)

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 11 2018 at 18:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133745529):
@**Assia Mahboubi** pointed this thread to me. It is funny because I was considering adding such a feature to mathcomp: https://github.com/math-comp/math-comp/commit/0d41046cff37af7b85da0e771e3d25a4c640edbf

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Patrick Massot (Sep 11 2018 at 19:55)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133748935):
What is the interface you chose then? It's hard to tell from the link  without knowing Coq

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 12 2018 at 13:23)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133792495):
@**Patrick Massot** I chose something like: `[↔ P0; ...; Pn] := (all_iff P0 [P1; ...; Pn]) := ((P0 → P1) ∧ (P1 → P2) ∧ ... ∧ (Pn → P0))` (pseudo syntax)
And the main theorem `all_iffLR` says roughly that `[↔ P0; ...; Pn] → ∀i j, Pi → Pj` (pseudo syntax again), and is a coercion to a function, so that a lemma `mylemma : [↔ P0; ...; Pn]` can be applied to natural numbers to give `mylemma i j`, a proof of `Pi → Pj`.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133792868):
That looks like a really nice way to attack this.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:32)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133792930):
As a mathematician I wonder if we could use tactics to allow for even more general ways of proving an `all_iff` instead of only cycles.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 12 2018 at 13:33)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133792958):
One of the improvements I have in mind is to provide a graph. And have the computational part of the system check it is strongly connected, then ask to prove only the edges. (so no deep tactic involved, just reflexion)

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:34)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793003):
Right.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:34)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793006):
But it would allow for more convenience.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 12 2018 at 13:34)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793017):
Yes

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:35)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793019):
The interactive version would first ask the user to supply a graph. Then the system does the connectedness check (or asks the user for a proof). And then the tactic goes on to supply you all the edges 1-by-1

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:35)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793042):
I mean, check this out: https://stacks.math.columbia.edu/tag/04GG

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793116):
Too bad we don't have a lot about graphs in Lean.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 12 2018 at 13:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793117):
I would start my proof by applying the lemma `all_iff_from [(2,1);(5,3)...]`(implicit arguments + unification would do the job of checking the connectedness of the graph, and a split would ask for all the implications, that is why I see no need for a tactic...

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 12 2018 at 13:38)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793166):
And since we have graphs in coq with math-comp, I am really eager to try :)

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:38)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793173):
But do you have henselian local rings?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:38)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793175):
Just kidding...

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793184):
I would love to have this kind of stuff in Lean!

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793189):
How hard is the connectedness check? I guess that shouldn't be too hard, right?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 12 2018 at 13:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793241):
it is just a dfs

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793242):
/me walks over to his copy of TAOCP

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793250):
Right, and you need to generate a proof along the way.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793266):
(I've never really written tactics before... so I'm just thinking out loud.)

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793352):
Hmmm... but most of this isn't even `meta`.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793369):
@**Cyril Cohen** Two questions: (1) Do you have any experience in Lean? (2) Where can we find your coq implementation?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 12 2018 at 13:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793540):
@**Johan Commelin** (1) I only saw @**Mario Carneiro** and @**Johannes Hölzl** in action, I have no more experience than that. (2) my current coq implementation does not support graphs yet, only what I described in the message you replied to and it is here: https://github.com/math-comp/math-comp/commit/0d41046cff37af7b85da0e771e3d25a4c640edbf (waiting patiently to be cleaned and merged since august)

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 13:50)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793720):
Ok, understood :thumbs_up:

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Patrick Massot (Sep 12 2018 at 13:55)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133793964):
Nice! So the current implementation in Coq is about using a chain of equivalences, not proving it. But clearly both ways are useful. I'm sure we'll soon have this in Lean

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 12 2018 at 13:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133794023):
@**Patrick Massot** it's also about proving it, but only from circular implications `P0 -> ... -> Pn -> P0` (no arbitrary strongly connected graph)

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Patrick Massot (Sep 12 2018 at 14:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133794539):
ok, nice

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Patrick Massot (Sep 12 2018 at 14:11)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133794566):
I guess it already covers most use cases, you only need to list the conditions in the order you intend to prove the chain of implications, and then you can use any implication

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 14:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133794674):
```lean
import data.vector

@[pattern] def vector.mk {α : Type*} {n : ℕ} (l : list α) (pr : l.length = n) :
  vector α n := ⟨l, pr⟩

def all_iff : ∀ {n : ℕ}, vector Prop n → Prop
| 0     Ps := true
| 1     Ps := Ps.head
| (n+2) Ps := (Ps.head → Ps.tail.head) ∧ (all_iff Ps.tail)

local notation `[↔` l:(foldr `, ` (h t, list.cons h t) list.nil `]`) :=
  all_iff (vector.mk l rfl)

example : [↔ true, false] := sorry

def all_iff_LR {n : ℕ} {Ps : vector Prop n} (H : all_iff Ps) : ∀ (i j : fin n), Ps.nth i → Ps.nth j :=
begin
  sorry
end
```

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 14:16)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133794856):
Oops, there is a bug. I'm not closing the cycle.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 14:24)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133795209):
Somewhere on Twitch there is now a video of me having proved 1 => 2 and 2 => 3 and 3 => 1 and then taking several minutes to figure out how to prove 2 <=> 1 and 3 <=> 1 and then later being unable to remember whether I had proved 2 <=> 1 or 1 <=> 2. So I guess there is some real non-zero value to this.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 14:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133796095):
This is better:
```lean
import tactic.interactive
import data.vector

@[pattern] def vector.mk {α : Type*} {n : ℕ} (l : list α) (pr : l.length = n) :
  vector α n := ⟨l, pr⟩

@[reducible] def all_iff' : Prop → list Prop → Prop
| P₀ []               := true
| P₀ (P₁ :: [])       := P₁ → P₀
| P₀ (P₁ :: P₂ :: Ps) := (P₁ → P₂) ∧ all_iff' P₀ (P₂ :: Ps)

def all_iff {n : ℕ} : vector Prop n → Prop
| ⟨[],             h⟩ := true
| ⟨P :: [],        h⟩ := true
| ⟨P₀ :: P₁ :: Ps, h⟩ := (P₀ → P₁) ∧ all_iff' P₀ (P₁ :: Ps)

local notation `[↔` l:(foldr `, ` (h t, list.cons h t) list.nil `]`) :=
  all_iff (vector.mk l rfl)

example : [↔ true, true, true] :=
begin
  split, tauto,
  dsimp [all_iff'], tauto
end
```

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 14:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133796112):
I would like to not have the `dsimp [all_iff']` in the example. I marked the definition `reducible`, but that didn't help.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 14:45)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133796235):
I don't know whether this matters here, but when I was playing around with this stuff I found you can also do
```lean
local notation `[↔` p0 `, ` l:(foldr `, ` (h t, list.cons h t) list.nil `]`) :=
  all_iff (vector.mk (p0 :: l) rfl)
```

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 14:45)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133796240):
which lets you guarantee that the list is nonempty

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 14:48)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133796412):
I'm not sure if we want that guarantee... for interaction sure. But maybe this code will also be used in automation or something. And then it would be nice if `[]` is not a problem.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 14:50)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133796518):
If you `dsimp only [all_iff, all_iff', vector.mk]` first then you get a conjunction of the 3 iffs

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 14:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133796551):
I thought it might be more likely that allowing `[]` is a problem for automation than that disallowing it is a problem. But I'm not sure either, just thought I would mention the possibility.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 14:55)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133796744):
I think a very simple tactic which turns an `all_iff` goal with list of length N into N subgoals (or possibly a conjunction of N implications) will probably be useful. Otherwise, I think it will be hard to avoid making the intermediate goals confusing.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 14:56)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133796811):
True, something like that is necessary.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 15:04)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133797157):
@**Cyril Cohen** I am very bad at reading coq code, apparently...

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 15:05)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133797191):
I'm trying to prove `all_iff_LR` in Lean. I'm exploding into different cases. Is there a good strategy to prove this by induction?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 15:05)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133797194):
Do you case on `i < j` or something similar?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 12 2018 at 15:09)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133797383):
@**Johan Commelin**  I am using a lemma saying (roughly) that a function `f : nat -> T` respects the order (`<` for nat, and an arbitrary order on `T` (`->` on `Prop` in our case)) if one can prove that `f i  < f (i + 1)` (or `f i -> f (i + 1)` in our case). Only then, I do an induction.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 15:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133797460):
Hmm, I see. That seems smart.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 15:11)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133797517):
So now I need to find that lemma in mathlib. @**Kenny Lau** Do you know the function that Cyril is talking about?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Kenny Lau (Sep 12 2018 at 15:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133797578):
is it even in mathlib?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Kenny Lau (Sep 12 2018 at 15:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133797582):
I'd just use induction to prove it

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 15:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133797584):
Dunno.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 15:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133798133):
```lean
lemma foobar {X : Type*} [preorder X] (f : ℕ → X) : monotone f ↔ ∀ i, f i ≤ f (i+1) :=
begin
  split,
  { intros h i, exact h (nat.le_succ i) },
  { intro H,
    unfold monotone,
    intros a b h,
    induction h with x h ih,
    { refl },
    { exact le_trans ih (H x) }
  }
end
```

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 15:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133798146):
It still needs a name and golfing (-;

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 16:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133802962):
Ok, I'm making slow progress. I'll try to post something later tonight.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 16:46)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133803540):
@**Scott Morrison** @**Keeley Hoek**  I think I found a missing feature in `tidy`. It doesn't split `\iff` in the assumptions into two implications. If it did, I guess it could have solved more of my goals.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Keeley Hoek (Sep 12 2018 at 17:07)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133804789):
@**Johan Commelin** Could you give me an example? In the (admittedly baby) example
````
constants a b : Prop

def lol : iff a b := begin
  tidy,
  admit
end
````
`tidy` does do what you're saying, I think.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Keeley Hoek (Sep 12 2018 at 17:09)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133804897):
Or are you talking about `tidy` not converting `iff` hypotheses into a pair of `implies` hypotheses? Maybe it should do that...

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Keeley Hoek (Sep 12 2018 at 17:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133805759):
For the latter, give https://github.com/leanprover/mathlib/pull/344 (i.e. https://github.com/leanprover-community/mathlib/tree/auto-cases-iff) a try.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 18:53)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133811896):
@**Keeley Hoek** Cool! That kills of another goal (-;

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 19:14)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133812980):
What was wrong with the sketch I gave earlier for `TFAE_of_cycle`? It should be isomorphic to cyril's definition

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Keeley Hoek (Sep 12 2018 at 19:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133813298):
that `list.chain` syntax is sick Mario

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 19:46)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133814801):
Here's the whole proof:
```

namespace list

@[simp] def last' {α} : α → list α → α
| a []     := a
| a (b::l) := last' b l

theorem last'_mem {α} : ∀ a l, @last' α a l ∈ a :: l
| a []     := or.inl rfl
| a (b::l) := or.inr (last'_mem b l)

def TFAE (l : list Prop) : Prop := ∀ x ∈ l, ∀ y ∈ l, x ↔ y

theorem TFAE_nil : TFAE [] := forall_mem_nil _
theorem TFAE_singleton (p) : TFAE [p] := by simp [TFAE]

theorem TFAE_cons_of_mem {a b} {l : list Prop} (h : b ∈ l) :
  TFAE (a::l) ↔ (a ↔ b) ∧ TFAE l :=
⟨λ H, ⟨H a (by simp) b (or.inr h), λ p hp q hq, H _ (or.inr hp) _ (or.inr hq)⟩,
 begin
   rintro ⟨ab, H⟩ p (rfl | hp) q (rfl | hq),
   { refl },
   { exact ab.trans (H _ h _ hq) },
   { exact (ab.trans (H _ h _ hp)).symm },
   { exact H _ hp _ hq }
 end⟩

theorem TFAE_cons_cons {a b} {l : list Prop} : TFAE (a::b::l) ↔ (a ↔ b) ∧ TFAE (b::l) :=
TFAE_cons_of_mem (or.inl rfl)

theorem TFAE_of_cycle {a b} {l : list Prop} :
  list.chain (→) a (b::l) → (last' b l → a) → TFAE (a::b::l) :=
begin
  induction l with c l IH generalizing a b; simp [TFAE_cons_cons, TFAE_singleton] at *,
  { exact iff.intro },
  intros ab bc ch la,
  have := IH bc ch (ab ∘ la),
  exact ⟨⟨ab, la ∘ (this.2 c (or.inl rfl) _ (last'_mem _ _)).1 ∘ bc⟩, this⟩
end

theorem TFAE.out {l} (h : TFAE l) (n₁ n₂)
 (h₁ : n₁ < list.length l . tactic.exact_dec_trivial)
 (h₂ : n₂ < list.length l . tactic.exact_dec_trivial) :
  list.nth_le l n₁ h₁ ↔ list.nth_le l n₂ h₂ :=
h _ (list.nth_le_mem _ _ _) _ (list.nth_le_mem _ _ _)

theorem TFAE_test (x y : ℕ) : TFAE [true, x = x, y = y] :=
TFAE_of_cycle (by simp) (λ _, trivial)

example (x y : ℕ) : x = x ↔ y = y := (TFAE_test x y).out 1 2

end list
```

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 19:49)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133814995):
There is a theorem that says that you can put a `list.chain` together over a transitive relation, but I had to prove the rest by induction anyway so it wasn't necessary

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 19:53)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815251):
@**Mario Carneiro** I think the only thing that was wrong with it was that I didn't understand what you were doing...

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 19:54)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815331):
`list.chain` says that you have forward implications along the list, `last l -> a` gives the final backward arrow

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 19:55)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815344):
and they are both defined naturally by recursion making the proofs easy

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 19:56)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815437):
@**Mario Carneiro** Ok, so I was almost done with a slightly clunkier implementation. :lol:

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 19:56)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815453):
Would you mind pushing your stuff to a `tfae` branch on community?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 19:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815472):
I think we should put everything into a `tfae` namespace.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 19:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815506):
I would just put it all in `list.basic`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 19:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815535):
and in the `list` namespace, as you can see

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 19:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815542):
Ok, fine with me.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 19:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815556):
Do you want to capitalise TFAE?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 19:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815569):
dunno, seemed nicer that way

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 19:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815582):
`tfae` could be misread?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 19:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815591):
Maybe. `TFAE` feels like shouting.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 19:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815594):
I wouldn't mind having `tfae`.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 19:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815600):
it's always the way I see it on the blackboard

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:00)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815668):
That is true. But on the blackboard I also see `Lemma` and `Thm`...

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:01)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815706):
I would also not have any notation. for me `tfae [p, q, r]` is sufficient

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:01)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815719):
`[<-> p, q, r]` doesn't seem to buy much

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815762):
Right, I also came to that conclusion

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815778):
It is even easier to read.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815782):
(none of this is to cast aspersions on Cyril's work; the style and design decisions are different there)

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:03)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815809):
If you push your stuff, I would like to see if I can do anything with `tfae_of_graph`.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:03)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133815842):
Some how you need to show that the transitive closure of the relation that is your graph is everything. Would an `auto_param` be able to do that?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:09)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816149):
you are talking about Cyril's extension? I wouldn't want to try that without using a tactic to guide the whole process

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816223):
Why not?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816232):
because the number of goals is very nonuniform

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816246):
the types are too complicated to get much help from lean

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:11)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816275):
again, this reflects a difference in design from Coq. It's easier to do strongly connected checking in the kernel in Coq

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816318):
in lean we would do it with a tactic

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:15)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816459):
Pseudo-code:
```lean
lemma tfae_of_graph (Ps : list Prop) (G : list (fin n x fin n)) (H : proof_that_G_generates_everything) 
(proofs : \forall (i,j) \in G, Ps i \implies Ps j) : tfae Ps
```

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:15)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816476):
Ok, I agree that maybe the Lean way is to use tactics

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:16)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816547):
You would have to supply `proofs` manually which is not nice

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:16)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816551):
I don't know anything about `auto_param`s but I would definitely want `H` to be automated by some tactic.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816571):
Right, so `proofs` better be a list of `mvar`s, is that what you mean?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Patrick Massot (Sep 12 2018 at 20:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816572):
this would not be interactive because of the proofs parameter

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816600):
Well, if you `apply` it, you would then be left with a goal that asks for `proofs`.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816605):
Here's a conjecture: Given any SC graph on 1...n, there is a way to connect 1-2, 2-3, ..., n-1 by disjoint paths in the graph

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816612):
And you would want to split that into a bunch of goals.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816675):
What is SC?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816691):
strongly connected

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816707):
I see.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816728):
if true, the generalization is always redundant

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816808):
if you supply 1<->2 and 2<->3 then you have four proofs, and you could have just composed the proofs 3->2 and 2->1 to get a result in the form for `tfae_of_cycle`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816824):
Here is a graph: `1 -> 3 -> 2 -> 1`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816848):
of course

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816862):
Did I misunderstand your conjecture?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816867):
so I guess we need a theorem about permuting the graph

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816870):
no, that's a counterexample

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133816918):
I'dd just do a `meta` dfs

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834471):
new conjecture: there is a way to permute the vertices so that the first conjecture holds

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834478):
That is trivial

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834483):
is it?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834484):
Hmm, maybe not.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:24)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834580):
But, why do you not want to reuse edges?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:25)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834619):
because that way you can achieve the same with a straight line proof where you inline the relevant parts in each subproof

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:25)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834636):
i.e. the proof 3->2 only appears as part of the proof 3->1 in my example

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:26)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834680):
so it doesn't need to be stored and reused

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:26)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834686):
Here is another graph: `1 -> 2 -> 3 -> 1;   2 -> 4 -> 1;   2 -> 5 -> 1`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:27)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834726):
foiled again

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:29)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834833):
Hmm, you don't even need vertex `5`.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:29)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834839):
okay so we definitely need a tactic to manage this kind of structure

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834952):
So the tactic takes a graph as input, and then proves that it is SC, and generates a list of goals, right?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:31)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834966):
yes

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 20:31)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133834999):
it might be worth considering the aforementioned https://stacks.math.columbia.edu/tag/04GG when imagining what the UI might look like

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Patrick Massot (Sep 12 2018 at 20:31)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835001):
Do we really want the tactic to decide on a list of implications to prove? Sometimes there will be several solutions, some easier than others

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:32)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835061):
No, you provide a list of edges.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:32)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835070):
You get to prove those. And the tactic shows that this is enough.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Patrick Massot (Sep 12 2018 at 20:32)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835078):
ok, I prefer that

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 20:32)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835080):
for example, listing all the edges and then, separately, all the proofs might be less nice than being able to interleave them

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:33)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835110):
My suggestion: suppose the goal is `tfae [p1, p2, p3, p4, p5]`, then you can call `tfae [1 -> 2, 2 -> 3, 3 -> 1, 2 -> 4, 4 -> 1, 1 <-> 5]` and get six goals like `|- p1 -> p2` and `|- p1 <-> p5`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:33)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835123):
@**Reid Barton**  Hmmm... but then it feels like you'll need a separate mode, like `conv` and `calc`.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:34)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835191):
ooh, should it be zero-based indexing?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:34)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835197):
In principal that is fine, but in practice we see that `conv` is limited by the fact that not all tactics that we'dd like to be there actually work.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:35)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835221):
I guess `0`-based is easier to implement. But I don't know if it is user friendly.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:35)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835257):
1 based is probably more user friendly, but I'm sure it will surprise someone either way

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:36)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835270):
@**Mario Carneiro** Do you think Reid's idea can be implemented in usual tactic mode?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 20:36)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835323):
maybe rather than a plain list in tfae we should use an association list indexed by
`inductive roman_number | i | ii | iii | iv | ...`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:36)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835342):
and how long does that `...` go? :P

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835351):
at least till `xiii`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835362):
anyway it's not an actual type, it's just an input format

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835398):
`1 -> 2` isn't well typed

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 20:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835403):
What I really mean though is if you actually had 13 things to prove equivalent, you wouldn't really want to have to count them whether you use 0-based or 1-based indexing

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835410):
neither is `i -> ii`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:38)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835478):
I don't see an alternative

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:38)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835493):
lean can try to give you help in filling out the tactic arguments, but that's it

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835504):
@**Reid Barton** Do you have an idea for an "interleaving UI"?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835523):
syntax, I mean

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835532):
What would you like to write?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835541):
it sounds like what `case` does, but in that case you already know what the goals are

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 20:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835603):
something like `case` in terms of syntax, yeah

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835610):
`have : i -> ii := bla`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835657):
`tfae` could take an `itactic` argument, I'm not sure if the parsing will work but then you could have one huge tactic with subblocks like:
```
tfae:
1 -> 2 {
  ...
}
2 -> 1 {
  ...
},
```

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835674):
And then, somehow Lean should keep track of them. And once you think you are done, you type `tfae_done`, and it checks that your graph is SC.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835723):
in my example it's just one tactic invocation (note lack of comma)

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835740):
I see. And inside the `{ ... }` you would be in regular tactic mode?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835743):
yes

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835752):
Then I think that syntax is really cool!

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835762):
I don't know if I can make it work though

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835777):
`itactic` isn't a parser

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835780):
I know that I can't

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835811):
I think I would call the tactic `tfae_cases`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:45)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835929):
I would stick to my original proposal though, these syntaxes are crazy

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:46)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835982):
you can put the numbers in comments if you forgot which is which

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:46)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133835987):
Ok, too bad.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836020):
But, if you think it is really hard to do, then I won't even try thinking about it (-;

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836027):
also you could have `tfae?` which would just print out a numbered list of the elements of the `tfae` for referral

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:48)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836058):
It should be a hole command (-;

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:48)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836111):
And fill out those comments!

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:48)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836117):
I want more "implicit" hole commands (without the `{!!}` markers), but alas

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:50)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836226):
Mario, could we have `have : tfae_case i ii := ...`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:50)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836245):
and then a finishing tactic `tfae_done`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 20:50)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836275):
Oh, `have` is a better analogy. I would certainly be happy with `have_tfae 1 -> 3, blah, have_tfae ..., ..., tfae_finish`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836289):
sorry, that's not well typed. The best you can do is `have : p1 -> p2` and have `tfae_done` figure it out

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836317):
But it's just notation, like before...

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836325):
Ok, my example won't work.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836366):
But Reid's could, not?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 20:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836369):
It would need to refer to the goal

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 20:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836372):
Yours I mean

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836377):
Actually `have_tfae 1 -> 3` might make sense: if the goal is `tfae [p1, ..., p5]` then it is just the same as `have : p1 -> p3`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836402):
Exactly. (And can we make it `tfae_have`?)

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 20:53)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836445):
It should also support <-> btw

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:53)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836448):
So the `tfae_have` should generate a new goal, and record an edge in some graph. And then `tfae_finish` checks that the graph is SC.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:54)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836450):
naturally

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:54)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836501):
I really like where this is going!

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:54)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836507):
`tfae_have` doesn't need to do anything

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 20:54)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836510):
`tfae_finish` could almost just be `solve_by_elim` it seems

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:55)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836546):
A smart `tfae_finish` could suggest a list of edges that still needs to be done...

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:55)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836571):
`tfae_finish` has to apply `tfae_of_cycle`, reduce the subproofs to implications of the given stuff, and then use the existing implications

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:56)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836620):
and produce any unproven parts as subgoals

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:56)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836630):
that way you can use `tfae` either forwards or backwards

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836644):
What would those unproven parts look like?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836660):
Just unproven edges in the default cycle?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836666):
yes

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836684):
Ok, so by default `tfae_finish` generates `n` goals.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836737):
(I would just call this one `tfae` btw)

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836752):
If you want to use it both forwards and backward, that makes sense.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 20:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836773):
Semantically I don't like `tfae`, but short names are useful.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 12 2018 at 20:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133836787):
`tfae` can still take a list of edges, and it would just add to this the list of edges that have already been `have`'d

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 12 2018 at 21:04)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133837161):
Ok, once this tactic is there, we need to make sure `obviously` in fact tackles the first nine cases of the Hensel's lemma TFAE proof.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Reid Barton (Sep 12 2018 at 21:09)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133837469):
tpwe = the preceding were equivalent for the finisher

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Cyril Cohen (Sep 13 2018 at 09:00)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133866415):
```quote
you can put the numbers in comments if you forgot which is which
```
That's what I do

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Keeley Hoek (Sep 13 2018 at 11:33)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133872603):
@**Mario Carneiro** is there a version of `chain` which lets me apply a function to each pair?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Scott Morrison (Sep 13 2018 at 11:36)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133872777):
What do you mean, @**Keeley Hoek**?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Keeley Hoek (Sep 13 2018 at 11:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133873151):
id like to apply an `α → α → β` function to pairs of adjacent elements of a `list α`, and get a `list β`. It feels a bit like `chain` but not just for `Prop`s

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 13 2018 at 19:07)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133898963):
@**Mario Carneiro** Are you working on this tactic? Or do you think this could be a good exercise for me trying to learn how to write tactics?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 13 2018 at 19:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133899025):
I'm not working on it right now. If you would like to try your hand at it, go ahead

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Sep 13 2018 at 19:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/133899046):
@**Keeley Hoek** I would suggest defining an element of `α × β` using `list.foldl`

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Sep 26 2018 at 17:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/134684999):
@**Reid Barton** @**Simon Hudon** and me have worked on this a bit. There is now a PR: https://github.com/leanprover/mathlib/pull/373

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johan Commelin (Oct 04 2018 at 10:33)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/135159468):
@**Johannes Hölzl**  @**Mario Carneiro** Is there anything blocking this PR? I've been hitting a couple of "the following are equivalent" lemmas recently, and I wouldn't mind using this machinery.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johannes Hölzl (Oct 04 2018 at 10:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/135159627):
Looks good for me. I'm fine with merging it.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johannes Hölzl (Oct 04 2018 at 10:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/135159652):
I don't know if Mario still has some concerns?

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Mario Carneiro (Oct 04 2018 at 15:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/135176877):
no, I have just been busy with school. Go ahead and merge it if you have looked it over.

#### [![Click to go to Zulip](../../assets/img/zulip2.png) Johannes Hölzl (Oct 04 2018 at 15:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/TFAE/near/135178091):
okay I merged it

