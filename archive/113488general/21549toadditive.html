---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/21549toadditive.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/21549toadditive.html">to_additive</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="135545903"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135545903" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21549toadditive.html#135545903">Patrick Massot (Oct 10 2018 at 14:40)</a>:</h4>
<p>Is there any hope <code>to_additive</code> could be improved to avoid things like <a href="https://github.com/leanprover/mathlib/blob/2594f48f20392f84b0743eb0867c030913eca627/group_theory/quotient_group.lean#L40-L47" target="_blank" title="https://github.com/leanprover/mathlib/blob/2594f48f20392f84b0743eb0867c030913eca627/group_theory/quotient_group.lean#L40-L47">https://github.com/leanprover/mathlib/blob/2594f48f20392f84b0743eb0867c030913eca627/group_theory/quotient_group.lean#L40-L47</a>?</p>

<a name="135612824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135612824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21549toadditive.html#135612824">Mario Carneiro (Oct 11 2018 at 14:41)</a>:</h4>
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> Would you like to take a look at this? I am thinking that the <code>to_additive</code> attribute should recursively copy any suffixed versions of the input mapping that happen to be in the term being traversed. For example if you are translating <code>foo =&gt; bar</code> and you run across <code>foo._match_1</code>, and this does not already have a translation, then it should translate <code>foo._match_1 =&gt; bar._match_1</code> and then try again</p>

<a name="135614750"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135614750" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21549toadditive.html#135614750">Simon Hudon (Oct 11 2018 at 15:06)</a>:</h4>
<p>Interesting! Sure, I'll have a look. I assume at the moment, it only does the <code>foo =&gt; bar</code> translation?</p>

<a name="135614773"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135614773" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21549toadditive.html#135614773">Mario Carneiro (Oct 11 2018 at 15:07)</a>:</h4>
<p>yes</p>

<a name="135614844"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135614844" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21549toadditive.html#135614844">Simon Hudon (Oct 11 2018 at 15:08)</a>:</h4>
<p>Cool, I'll look into it.</p>

<a name="135615706"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135615706" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21549toadditive.html#135615706">Simon Hudon (Oct 11 2018 at 15:19)</a>:</h4>
<p>Do you have an example that's giving you trouble now?</p>

<a name="135618269"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135618269" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21549toadditive.html#135618269">Mario Carneiro (Oct 11 2018 at 15:59)</a>:</h4>
<p>Well, any definition or theorem that contains (usually autogenerated) sub-definitions. In Patrick's example, it is because it is an instance with a data type and some proofs; in this case the proofs are automatically turned into sub-lemmas. The same sort of thing happens if you use <code>match</code> or <code>\lam &lt;a, b&gt;, ...</code> in a proof, or use the equation compiler</p>

<a name="135618508"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135618508" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/21549toadditive.html#135618508">Simon Hudon (Oct 11 2018 at 16:03)</a>:</h4>
<p>Sorry I missed Patrick's initial comment</p>


{% endraw %}
