---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/13234cerw.html
---

## Stream: [general](https://leanprover-community.github.io/archive/113488general/index.html)
### Topic: [cerw](https://leanprover-community.github.io/archive/113488general/13234cerw.html)

---

<base href="https://leanprover.zulipchat.com">
{% raw %}
#### [ Johan Commelin (Nov 18 2018 at 19:23)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147925618):
<p>I am a complete newbie when it comes to tactic writing. Here is a request for a tactic, and I have no idea how realistic it is. Suppose I have an isomorphism <code>h : X ≅ Y</code> in some category <code>C</code>. And suppose I have some other term <code>foo : bar X</code>, then I would like to have a tactic <code>cerw</code> (category-<code>erw</code>) that tries to figure out if <code>bar</code> is some sort of <code>category_theory.functor.obj</code> and if so, replaces <code>X</code> with <code>Y</code>.<br>
I realise this request is a bit vague. I would be happy to flesh out the details.</p>

#### [ Scott Morrison (Nov 18 2018 at 21:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147929231):
<p>HI Johan,</p>

#### [ Scott Morrison (Nov 18 2018 at 21:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147929239):
<p>I started writing this, as <code>iso_induction</code>.</p>

#### [ Scott Morrison (Nov 18 2018 at 21:14)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147929248):
<p>This is intended as my start of an answer to all our questions about transport of structure.</p>

#### [ Scott Morrison (Nov 18 2018 at 21:14)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147929296):
<p>It is not at all done, but it is certainly doable, and I would love to do it!</p>

#### [ Scott Morrison (Nov 18 2018 at 21:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147929420):
<p>Have a look at <a href="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/iso_induction.lean" target="_blank" title="https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/iso_induction.lean">https://github.com/semorrison/lean-category-theory/blob/master/src/category_theory/iso_induction.lean</a></p>

#### [ Scott Morrison (Nov 18 2018 at 21:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147929421):
<p>for the idea</p>

#### [ Scott Morrison (Nov 18 2018 at 21:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147929468):
<p>It is not quite that same as <code>iso_rw</code>, but the same tooling would be required to make that work.</p>

#### [ Scott Morrison (Nov 18 2018 at 21:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147929531):
<p><code>iso_induction</code> takes a hypotheses <code>X \iso Y</code>, and tries to replace all appearances of <code>X</code> with <code>Y</code>, by writing everything in a form where <code>X</code> appears as the argument of a functor.</p>

#### [ Johan Commelin (Nov 19 2018 at 06:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147946598):
<p>Cool. That's going to be very useful!</p>

#### [ Johan Commelin (Nov 19 2018 at 06:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147946650):
<p>I am afraid that <code>monoid.ext</code> will be considered intollerable abuse of the type class system.</p>

#### [ Scott Morrison (Nov 19 2018 at 09:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147951652):
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span>, what's wrong with <code>monoid.ext</code>?</p>
<div class="codehilite"><pre><span></span>@[extensionality] lemma monoid.ext {α : Type u} (m n : monoid α)
  (mul : ∀ x y : α, (by haveI := m; exact x * y) = (by haveI := n; exact x * y)) : m = n :=
</pre></div>

#### [ Mario Carneiro (Nov 19 2018 at 09:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147951699):
<p>looks good to me</p>

#### [ Scott Morrison (Nov 19 2018 at 09:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147951701):
<p>Is it the two different uses of <code>haveI</code> that you're worried about?</p>

#### [ Johan Commelin (Nov 19 2018 at 09:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147951704):
<p>Aah, wait. You aren't actually asking that there are two instances of <code>monoid α</code></p>

#### [ Johan Commelin (Nov 19 2018 at 09:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147951707):
<p>I read to fast.</p>

#### [ Scott Morrison (Nov 19 2018 at 09:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147951709):
<p>No, no square brackets for this lemma!</p>

#### [ Mario Carneiro (Nov 19 2018 at 09:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147951792):
<p>do you have groupoids? that's an obvious thing to prove about <code>isos</code></p>

#### [ Mario Carneiro (Nov 19 2018 at 09:24)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/cerw/near/147951911):
<p>also it's not clear to me why <code>monoid_transport</code> isn't proven directly and it becomes the map part of <code>monoid_type_constructor</code></p>


{% endraw %}
