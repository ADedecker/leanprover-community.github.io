---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/06518sanitycheck.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html">sanity_check</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="177325441"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177325441" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177325441">Johan Commelin (Oct 04 2019 at 10:03)</a>:</h4>
<p>What is the attribute to mark something that shouldn't be checked by sanity check? I couldn't find it in the docs</p>

<a name="177325571"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177325571" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177325571">Rob Lewis (Oct 04 2019 at 10:05)</a>:</h4>
<p><code>@[sanity_skip]</code></p>

<a name="177326962"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177326962" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177326962">Sebastian Ullrich (Oct 04 2019 at 10:29)</a>:</h4>
<p>Should really be <code>@[insane]</code></p>

<a name="177330833"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177330833" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177330833">Johan Commelin (Oct 04 2019 at 11:41)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> Currently, if everything is fine in the file, then <code>#sanity_check</code> still prints some output. Would it be possible to have a version that only prints something if it finds something "insane"?</p>

<a name="177330883"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177330883" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177330883">Johan Commelin (Oct 04 2019 at 11:42)</a>:</h4>
<p>Because then it would be possible to have <code>#sanity_check</code> at the end of every file in a project, and it wouldn't create any noise during compilation, unless something is wrong.</p>

<a name="177330892"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177330892" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177330892">Johan Commelin (Oct 04 2019 at 11:42)</a>:</h4>
<p><code>#doc_blame</code> already does this: it is silent if everything is fine.</p>

<a name="177331001"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177331001" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177331001">Johan Commelin (Oct 04 2019 at 11:44)</a>:</h4>
<p>Also... could it (maybe with some config option) report which file it is checking? Here is a snippet coming from a compilation of the perfectoid project:</p>
<div class="codehilite"><pre><span></span>/home/jmc/data/math/lean-perfectoid-spaces/src/for_mathlib/topological_groups.lean: parsing at line 294/- Note: This command is still in development. -/
/- Checking 23 declarations in the current file -/

/- OK: No unused arguments. -/
/- OK: All declarations correctly marked as def/lemma. -/
/- OK: No declarations have a duplicate namespace. -/
/- OK: No illegal constants in declarations. -/

linear_ordered_comm_group_with_zero.to_linear_ordered_comm_monoid
linear_ordered_comm_group_with_zero.to_comm_group_with_zero
/home/jmc/data/math/lean-perfectoid-spaces/src/valuation/basic.lean: valuation.comap_comp/- Note: This command is still in development. -/
/- Checking 26 declarations in the current file -/

/- UNUSED ARGUMENTS: -/
#print linear_ordered_comm_group_with_zero.ne_zero_filter_basis /- argument 4: (h : x ≠ 0) -/
#print linear_ordered_comm_group_with_zero.discrete_ordered_comm_group /- argument 2: [_inst_2 : linear_ordered_comm_group α] -/
</pre></div>

<a name="177331024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177331024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177331024">Johan Commelin (Oct 04 2019 at 11:45)</a>:</h4>
<p>The unused arguments are in the file <code>src/valuation/with_zero_topology.lean</code>...</p>

<a name="177331066"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177331066" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177331066">Johan Commelin (Oct 04 2019 at 11:45)</a>:</h4>
<p>(Ooh, and let me stress that I'm only complaining about this tool because it is so incredibly useful that it deserves to have these tiny improvements as well. Without this tool, these clean ups would be almost impossible.)</p>

<a name="177331119"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177331119" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177331119">Johan Commelin (Oct 04 2019 at 11:46)</a>:</h4>
<p>Once again: big kudos from me. <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>

<a name="177331632"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/sanity_check/near/177331632" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/06518sanitycheck.html#177331632">Johan Commelin (Oct 04 2019 at 11:56)</a>:</h4>
<p><span class="user-mention" data-user-id="111080">@Floris van Doorn</span> Here is another thing: <code>#sanity_check</code> complains about</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">directed_lt</span> <span class="o">:</span> <span class="n">directed</span> <span class="o">(</span><span class="bp">≥</span><span class="o">)</span> <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">γ₀</span> <span class="o">:</span> <span class="n">units</span> <span class="err">Γ₀</span><span class="o">),</span> <span class="n">principal</span> <span class="o">{</span><span class="n">γ</span> <span class="o">:</span> <span class="err">Γ₀</span> <span class="bp">|</span> <span class="n">γ</span> <span class="bp">&lt;</span> <span class="err">↑</span><span class="n">γ₀</span><span class="o">})</span> <span class="o">:=</span>
</pre></div>


<p>because this lemma mentions <code>≥</code>. I can mark this as <code>[sanity_skip]</code>, but I wonder if we can somehow detect that this is not something like <code>(h : a ≥ b)</code>...</p>


{% endraw %}

{% include archive_update.html %}