---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/78272universesinstructures.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html">universes in structures</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">
{% raw %}
<a name="162501867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162501867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162501867">Kevin Buzzard (Apr 04 2019 at 07:36)</a>:</h4>
<p>I defined a presheaf like this:</p>
<div class="codehilite"><pre><span></span><span class="kn">structure</span> <span class="n">presheaf_of_types</span> <span class="o">(</span><span class="n">X</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">X</span><span class="o">]</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">F</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span> <span class="bp">→</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">)</span>
<span class="o">(</span><span class="n">res</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">U</span> <span class="n">V</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⊆</span> <span class="n">U</span><span class="o">),</span> <span class="n">F</span> <span class="n">U</span> <span class="bp">→</span> <span class="n">F</span> <span class="n">V</span><span class="o">)</span>
<span class="o">(</span><span class="n">id</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span> <span class="n">U</span><span class="o">),</span> <span class="n">res</span> <span class="o">(</span><span class="n">le_refl</span> <span class="n">U</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span>
<span class="o">(</span><span class="n">comp</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">U</span> <span class="n">V</span> <span class="n">W</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">X</span><span class="o">}</span> <span class="o">(</span><span class="n">hUV</span> <span class="o">:</span> <span class="n">V</span> <span class="err">⊆</span> <span class="n">U</span><span class="o">)</span> <span class="o">(</span><span class="n">hVW</span> <span class="o">:</span> <span class="n">W</span> <span class="err">⊆</span> <span class="n">V</span><span class="o">)</span> <span class="o">(</span><span class="n">x</span> <span class="o">:</span> <span class="n">F</span> <span class="n">U</span><span class="o">),</span>
  <span class="n">res</span> <span class="n">hVW</span> <span class="o">(</span><span class="n">res</span> <span class="n">hUV</span> <span class="n">x</span><span class="o">)</span> <span class="bp">=</span> <span class="n">res</span> <span class="o">(</span><span class="n">set</span><span class="bp">.</span><span class="n">subset</span><span class="bp">.</span><span class="n">trans</span> <span class="n">hVW</span> <span class="n">hUV</span><span class="o">)</span> <span class="n">x</span><span class="o">)</span>
</pre></div>


<p>I had to make a call about the target of <code>presheaf_of_types.F</code>. I went for the same universe as X, because I have this vaguely uncomfortable feeling about having universes in my structures which are not extractable from the input data.</p>
<p>I now realise that I can't define pushforwards of presheaves along continuous maps, at least continuous maps X -&gt; Y where X is in universe u1 and Y in universe u2.</p>
<p>There are lots of solutions to this. </p>
<p>1) Let F take values in universe v (and then feed in v manually later)<br>
2) Restrict the theory to continuous maps X -&gt; Y living in universe u<br>
3) Openly question this whole universe polymorphism stuff and let everything take values in Type.</p>
<p>I developed a bunch of the schemes repo over Type and never had any problems.</p>
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> any comments?</p>

<a name="162501889"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162501889" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162501889">Kevin Buzzard (Apr 04 2019 at 07:36)</a>:</h4>
<p>I should stress that I spent 25 years doing research whilst living in Type and I never had any problems.</p>

<a name="162501985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162501985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162501985">Mario Carneiro (Apr 04 2019 at 07:38)</a>:</h4>
<p>I will tentatively recommend that you restrict the theory to continuous maps in Type u</p>

<a name="162501998"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162501998" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162501998">Kevin Buzzard (Apr 04 2019 at 07:38)</a>:</h4>
<p>If I bundle everything, and I'm going to try, then I feel like I'll be spending my life feeding universes into things anyway. It seems to me that (2) is a cop-out, I am either polymorphic or I am not, and (2) seems like a half way house that will satisfy nobody. I am unclear about the dangers of (1). Is it simply that I have to just put {u v} in a few places?</p>

<a name="162501999"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162501999" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162501999">Mario Carneiro (Apr 04 2019 at 07:38)</a>:</h4>
<p>and we will see if an issue arises later</p>

<a name="162502014"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502014" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502014">Kevin Buzzard (Apr 04 2019 at 07:39)</a>:</h4>
<p>So you are (1)-averse?</p>

<a name="162502020"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502020" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502020">Mario Carneiro (Apr 04 2019 at 07:39)</a>:</h4>
<p>(1) will cause you to put .{u v} in lots of places</p>

<a name="162502022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502022">Kevin Buzzard (Apr 04 2019 at 07:39)</a>:</h4>
<p>Keep in mind that Scott convinced me on the equiv thread in #maths to try bundling.</p>

<a name="162502024"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502024" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502024">Mario Carneiro (Apr 04 2019 at 07:39)</a>:</h4>
<p>I think the friction isn't worth it to you</p>

<a name="162502081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502081">Kevin Buzzard (Apr 04 2019 at 07:40)</a>:</h4>
<p>If the friction isn't worth it then you're telling me I should use (3)</p>

<a name="162502093"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502093" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502093">Mario Carneiro (Apr 04 2019 at 07:40)</a>:</h4>
<p>(2) is about as good as (3) in terms of "don't worry about it" ism</p>

<a name="162502094"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502094" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502094">Kevin Buzzard (Apr 04 2019 at 07:40)</a>:</h4>
<p>Or are you saying the philosophy is that I should be as polymorphic as possible whilst avoiding at all costs the pain of having to annotate my universes?</p>

<a name="162502115"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502115" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502115">Mario Carneiro (Apr 04 2019 at 07:41)</a>:</h4>
<p>There are still ways to recover maps between different universes with (2), but they are more cumbersome</p>

<a name="162502164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502164">Kevin Buzzard (Apr 04 2019 at 07:42)</a>:</h4>
<p><span class="user-mention" data-user-id="110087">@Scott Morrison</span> if I were approaching these definitions with bundling and categories in mind (I want to define an equiv of presheaves of types) then what would your choice be?</p>

<a name="162502169"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502169" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502169">Mario Carneiro (Apr 04 2019 at 07:42)</a>:</h4>
<p>and that seems like a reasonable tradeoff: make additional universes cumbersome in order to make the common case nicer</p>

<a name="162502174"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502174" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502174">Mario Carneiro (Apr 04 2019 at 07:42)</a>:</h4>
<p>if indeed everything is in Type eventually then this shouldn't ever happen anyway</p>

<a name="162502185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502185">Kevin Buzzard (Apr 04 2019 at 07:42)</a>:</h4>
<p>Grothendieck would have just observed that (1) and (2) were the same because you can just move to a bigger universe</p>

<a name="162502195"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502195" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502195">Mario Carneiro (Apr 04 2019 at 07:43)</a>:</h4>
<p>That's what I mean</p>

<a name="162502196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502196">Kevin Buzzard (Apr 04 2019 at 07:43)</a>:</h4>
<p>but I have no experience of the pain that this would involve in Lean</p>

<a name="162502197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502197">Kevin Buzzard (Apr 04 2019 at 07:43)</a>:</h4>
<p>and I am pain averse</p>

<a name="162502199"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502199" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502199">Mario Carneiro (Apr 04 2019 at 07:43)</a>:</h4>
<p>you have to use <code>ulift</code></p>

<a name="162502206"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502206" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502206">Kevin Buzzard (Apr 04 2019 at 07:43)</a>:</h4>
<p>ulift is a closed book to me</p>

<a name="162502214"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502214" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502214">Mario Carneiro (Apr 04 2019 at 07:43)</a>:</h4>
<p>it's a universe shifting function that preserves all structure</p>

<a name="162502216"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502216" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502216">Kevin Buzzard (Apr 04 2019 at 07:43)</a>:</h4>
<p>I thought Reid's comment was telling in the other thread -- he stuck to Type because he could not be bothered to ulift the reals</p>

<a name="162502267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502267">Kevin Buzzard (Apr 04 2019 at 07:44)</a>:</h4>
<p>is it canonical?</p>

<a name="162502268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502268">Mario Carneiro (Apr 04 2019 at 07:44)</a>:</h4>
<p>ah, there is that</p>

<a name="162502274"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502274" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502274">Kevin Buzzard (Apr 04 2019 at 07:44)</a>:</h4>
<p>Fortunately the valuations I have on my stalks are not real-valued</p>

<a name="162502275"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502275" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502275">Mario Carneiro (Apr 04 2019 at 07:44)</a>:</h4>
<p>sure it's canonical</p>

<a name="162502286"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502286" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502286">Mario Carneiro (Apr 04 2019 at 07:44)</a>:</h4>
<p>it's like the canonical injection map</p>

<a name="162502287"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502287" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502287">Kevin Buzzard (Apr 04 2019 at 07:44)</a>:</h4>
<p>they are taking values in a totally ordered monoid</p>

<a name="162502293"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502293" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502293">Kevin Buzzard (Apr 04 2019 at 07:45)</a>:</h4>
<p>I love that I managed to get you to say canonical</p>

<a name="162502298"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502298" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502298">Mario Carneiro (Apr 04 2019 at 07:45)</a>:</h4>
<p>in ZFC it is just inclusion</p>

<a name="162502304"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502304" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502304">Kevin Buzzard (Apr 04 2019 at 07:45)</a>:</h4>
<p>when neither of us know what it means</p>

<a name="162502313"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502313" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502313">Kevin Buzzard (Apr 04 2019 at 07:45)</a>:</h4>
<p>that's just how it works in maths too</p>

<a name="162502318"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502318" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502318">Mario Carneiro (Apr 04 2019 at 07:45)</a>:</h4>
<p>it's canonical in lean because it's a function :P</p>

<a name="162502323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502323">Kevin Buzzard (Apr 04 2019 at 07:45)</a>:</h4>
<p>we sagely nod and agree that it's canonical</p>

<a name="162502369"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502369" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502369">Kevin Buzzard (Apr 04 2019 at 07:46)</a>:</h4>
<p>is it functorial?</p>

<a name="162502376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502376">Mario Carneiro (Apr 04 2019 at 07:46)</a>:</h4>
<p>yep, it is all the things</p>

<a name="162502393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502393">Kevin Buzzard (Apr 04 2019 at 07:46)</a>:</h4>
<p>I don't know why people are so afraid of it then</p>

<a name="162502396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502396">Mario Carneiro (Apr 04 2019 at 07:46)</a>:</h4>
<p>it's also a thing</p>

<a name="162502407"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502407" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502407">Mario Carneiro (Apr 04 2019 at 07:47)</a>:</h4>
<p>which is one more than no thing</p>

<a name="162502409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502409">Kevin Buzzard (Apr 04 2019 at 07:47)</a>:</h4>
<p>You can look forward to the "ulift hell" thread</p>

<a name="162502429"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502429" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502429">Kevin Buzzard (Apr 04 2019 at 07:47)</a>:</h4>
<p>Thanks for the comments. Scott, I'd be interested to hear yours.</p>

<a name="162502530"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162502530" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162502530">Kevin Buzzard (Apr 04 2019 at 07:49)</a>:</h4>
<p>I guess one final observation is that I have now coded up presheaves of types twice (once for schemes, once for this), Ramon coded it up for Schemes Reloaded, Johan did it, probably Scott did it, and somehow it's still not in mathlib. Maybe it's time someone PR'ed it...</p>

<a name="162523639"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523639" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523639">Scott Morrison (Apr 04 2019 at 13:17)</a>:</h4>
<p>Ok, per request, I PR'd <a href="https://github.com/leanprover-community/mathlib/pull/886" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/886">one version of (bundled) presheaves</a>. The definition is I hope inarguably the correct one. :-)</p>

<a name="162523657"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523657" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523657">Scott Morrison (Apr 04 2019 at 13:17)</a>:</h4>
<p>The essential definitions are:</p>
<div class="codehilite"><pre><span></span>structure Presheaf :=
(X : Top.{v})
(𝒪 : (opens X)ᵒᵖ ⥤ C)

structure Presheaf_hom (F G : Presheaf.{v} C) :=
(f : F.X ⟶ G.X)
(c : G.𝒪 ⟹ ((opens.map f).op ⋙ F.𝒪))
</pre></div>


<div class="codehilite"><pre><span></span>instance category_of_presheaves : category (Presheaf.{v} C) :=
{ hom := Presheaf_hom,
  ... }
</pre></div>


<p>and</p>
<div class="codehilite"><pre><span></span>def functor.map_presheaf (F : C ⥤ D) : Presheaf.{v} C ⥤ Presheaf.{v} D := ...
</pre></div>

<a name="162523746"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523746" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523746">Scott Morrison (Apr 04 2019 at 13:18)</a>:</h4>
<p>There are still some things I'm unhappy with --- some places I need to use <code>erw</code>, where <code>simp</code> should suffice.</p>

<a name="162523780"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523780" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523780">Johan Commelin (Apr 04 2019 at 13:19)</a>:</h4>
<p>Scott, I think what we are probably also interested in is the category of presheaves on a space <code>X</code>.</p>

<a name="162523794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523794">Johan Commelin (Apr 04 2019 at 13:19)</a>:</h4>
<p>I.e. unbundled presheaves on bundled spaces.</p>

<a name="162523806"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523806" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523806">Johan Commelin (Apr 04 2019 at 13:19)</a>:</h4>
<p>Of course this is just a functor category...</p>

<a name="162523824"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162523824" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162523824">Johan Commelin (Apr 04 2019 at 13:19)</a>:</h4>
<p>But we might want some specialised coercions/simp lemmas</p>

<a name="162524028"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162524028" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162524028">Scott Morrison (Apr 04 2019 at 13:21)</a>:</h4>
<p>Hmm... so what do you want besides <code>def presheaf (X : Top) := (opens X)^op \func C</code>?</p>

<a name="162524137"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162524137" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162524137">Johan Commelin (Apr 04 2019 at 13:22)</a>:</h4>
<p>The push-forward functor should be easily accessible</p>

<a name="162524210"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162524210" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162524210">Johan Commelin (Apr 04 2019 at 13:23)</a>:</h4>
<p>And maybe for terms of type <code>presheaf</code> we can actually make <code>F.obj</code> a coercion?</p>

<a name="162524225"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162524225" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162524225">Johan Commelin (Apr 04 2019 at 13:23)</a>:</h4>
<p>I didn't experiment with it though</p>

<a name="162524268"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162524268" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162524268">Johan Commelin (Apr 04 2019 at 13:24)</a>:</h4>
<p>Need to run to catch a train</p>

<a name="162530083"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162530083" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162530083">Reid Barton (Apr 04 2019 at 14:27)</a>:</h4>
<p>I actually don't see what this particular bundled <code>Presheaf</code> is useful for, other than as an example</p>

<a name="162530196"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162530196" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162530196">Reid Barton (Apr 04 2019 at 14:28)</a>:</h4>
<p>For example, I don't see how you could build "<code>Sheaf</code>" out of "<code>Presheaf</code>"</p>

<a name="162530848"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162530848" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162530848">Reid Barton (Apr 04 2019 at 14:34)</a>:</h4>
<p>(Also, "presheaf" for me just means a (contravariant) functor from some category to sets. So there isn't really anything to define for presheaves that we don't have already.)</p>

<a name="162531042"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162531042" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162531042">Reid Barton (Apr 04 2019 at 14:36)</a>:</h4>
<p>It might make sense though to define pseudofunctors to categories and the Grothendieck construction</p>

<a name="162531170"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162531170" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162531170">Reid Barton (Apr 04 2019 at 14:38)</a>:</h4>
<p>maybe this opens too many cans of worms at once</p>

<a name="162555613"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162555613" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162555613">Kevin Buzzard (Apr 04 2019 at 18:45)</a>:</h4>
<p>I wrote an unbundled version of presheaves of types.</p>

<a name="162555711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162555711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162555711">Kevin Buzzard (Apr 04 2019 at 18:46)</a>:</h4>
<p><a href="https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851" target="_blank" title="https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851">https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851</a></p>

<a name="162555757"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162555757" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162555757">Kevin Buzzard (Apr 04 2019 at 18:47)</a>:</h4>
<p>I needed the notion of an <code>equiv</code> for them. But I was not convinced I had got it right until I had proved refl, symm and trans. They took me some time. I had to deal with heqs.</p>

<a name="162556436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556436">Kevin Buzzard (Apr 04 2019 at 18:53)</a>:</h4>
<p>My understanding is that Scott has done something less general than what I need. I need the notion of an equiv of pairs (X,F), i.e. two possibly distinct topological spaces equipped with presheaves.</p>

<a name="162556574"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556574" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556574">Mario Carneiro (Apr 04 2019 at 18:54)</a>:</h4>
<p>heqs sounds bad, where did they come up?</p>

<a name="162556767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556767">Kevin Buzzard (Apr 04 2019 at 18:56)</a>:</h4>
<p>In fact Scott it makes sense to tell you <em>exactly</em> what I need, just out of interest. I need the notion of an isomorphism of the following data: a topological space X, a presheaf of topological rings on X, and equivalence class of valuations on the stalks (where the direct limits are the limit of a direct system of rings only, not topological rings). I know how to do this. It's just a case of working out what is the best way to do this.</p>
<p>I have never used the category theory library. I did equivs of data (X,F) with X a top space and F a presheaf on X today so I know it can all be done. I went with Mario's annoying solution to the universe issue by staying in one universe for everything (X : type u and F U : type u).</p>

<a name="162556778"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556778" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556778">Kevin Buzzard (Apr 04 2019 at 18:56)</a>:</h4>
<p>heqs came up because I was changing X.</p>

<a name="162556800"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556800" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556800">Kevin Buzzard (Apr 04 2019 at 18:57)</a>:</h4>
<p>I instantly turned every heq into an eq</p>

<a name="162556851"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556851" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556851">Kevin Buzzard (Apr 04 2019 at 18:57)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">structure</span><span class="w"> </span><span class="n">f_map</span><span class="w"> </span><span class="p">(</span><span class="err">𝒢</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">presheaf_of_typesU</span><span class="w"> </span><span class="nc">Y</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="err">ℱ</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">presheaf_of_typesU</span><span class="w"> </span><span class="nc">X</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"></span>
<span class="p">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="nc">Y</span><span class="p">)</span><span class="w"></span>
<span class="p">[</span><span class="n">hf</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">continuous</span><span class="w"> </span><span class="n">f</span><span class="p">]</span><span class="w"></span>
<span class="p">(</span><span class="err">ρ</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="nc">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">opens</span><span class="w"> </span><span class="nc">Y</span><span class="p">,</span><span class="w"> </span><span class="err">𝒢</span><span class="o">.</span><span class="nc">F</span><span class="w"> </span><span class="nc">V</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">ℱ</span><span class="o">.</span><span class="nc">F</span><span class="w"> </span><span class="err">⟨</span><span class="n">f</span><span class="w"> </span><span class="err">⁻¹&#39;</span><span class="w"> </span><span class="nc">V</span><span class="p">,</span><span class="w"> </span><span class="n">hf</span><span class="w"> </span><span class="o">_</span><span class="w"> </span><span class="nc">V</span><span class="o">.</span><span class="mi">2</span><span class="err">⟩</span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="n">nat</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="nc">U</span><span class="w"> </span><span class="nc">V</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">opens</span><span class="w"> </span><span class="nc">Y</span><span class="p">,</span><span class="w"> </span><span class="err">∀</span><span class="w"> </span><span class="n">hUV</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nc">V</span><span class="w"> </span><span class="err">⊆</span><span class="w"> </span><span class="nc">U</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="err">∀</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="err">𝒢</span><span class="o">.</span><span class="nc">F</span><span class="w"> </span><span class="nc">U</span><span class="p">,</span><span class="w"> </span><span class="err">ρ</span><span class="w"> </span><span class="nc">V</span><span class="w"> </span><span class="p">(</span><span class="err">𝒢</span><span class="o">.</span><span class="n">res</span><span class="w"> </span><span class="n">hUV</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">ℱ</span><span class="o">.</span><span class="n">res</span><span class="w"> </span><span class="p">(</span><span class="n">by</span><span class="w"> </span><span class="p">{</span><span class="n">intros</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">hx</span><span class="p">,</span><span class="w"> </span><span class="n">exact</span><span class="w"> </span><span class="n">hUV</span><span class="w"> </span><span class="n">hx</span><span class="p">})</span><span class="w"> </span><span class="p">(</span><span class="err">ρ</span><span class="w"> </span><span class="nc">U</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w"></span>
</pre></div>


<p>That's a definition of a morphism in my category</p>

<a name="162556944"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162556944" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162556944">Kevin Buzzard (Apr 04 2019 at 18:58)</a>:</h4>
<p>But when defining equivs I wanted to say that two morphisms were equal, and this involved saying the f's were equal and then the rho's were ==</p>

<a name="162557059"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557059" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557059">Kevin Buzzard (Apr 04 2019 at 18:59)</a>:</h4>
<p>rho is not a good notation, it's not a restriction, rho is the map between the presheaves. f is the map between the spaces and rho, soon to be renamed, is the map between the presheaves. I think heq is inevitable here. But I managed to battle all of them off.</p>

<a name="162557662"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557662" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557662">Kevin Buzzard (Apr 04 2019 at 19:04)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">ext</span> <span class="o">(</span><span class="n">α</span> <span class="n">β</span> <span class="o">:</span> <span class="n">f_map</span> <span class="err">𝒢</span> <span class="n">ℱ</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">α</span><span class="bp">.</span><span class="n">f</span> <span class="bp">=</span> <span class="n">β</span><span class="bp">.</span><span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">hρ</span> <span class="o">:</span> <span class="n">α</span><span class="bp">.</span><span class="n">ρ</span> <span class="bp">==</span> <span class="n">β</span><span class="bp">.</span><span class="n">ρ</span><span class="o">)</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">=</span> <span class="n">β</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">cases</span> <span class="n">α</span> <span class="k">with</span> <span class="n">αf</span> <span class="n">αhf</span> <span class="n">αρ</span> <span class="n">αnat</span><span class="o">,</span> <span class="n">cases</span> <span class="n">β</span> <span class="k">with</span> <span class="n">βf</span> <span class="n">βhf</span> <span class="n">βρ</span> <span class="n">βnat</span><span class="o">,</span>
  <span class="n">rw</span> <span class="n">presheaf_of_typesU</span><span class="bp">.</span><span class="n">f_map</span><span class="bp">.</span><span class="n">mk</span><span class="bp">.</span><span class="n">inj_eq</span><span class="o">,</span>
  <span class="n">exact</span> <span class="bp">⟨</span><span class="n">hf</span><span class="o">,</span> <span class="n">hρ</span><span class="bp">⟩</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>That was what Lean gave me, so I went with it.</p>

<a name="162557713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557713">Mario Carneiro (Apr 04 2019 at 19:05)</a>:</h4>
<p>first observation: this should be a definition</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">opens</span><span class="bp">.</span><span class="n">comap</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">α</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">f</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">U</span><span class="o">,</span> <span class="n">hf</span> <span class="bp">_</span> <span class="n">U</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span>
</pre></div>

<a name="162557735"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557735" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557735">Kevin Buzzard (Apr 04 2019 at 19:05)</a>:</h4>
<p>Yeah, I couldn't find that!</p>

<a name="162557812"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557812" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557812">Kevin Buzzard (Apr 04 2019 at 19:06)</a>:</h4>
<p>I read all of topology.opens :-)</p>

<a name="162557838"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557838" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557838">Mario Carneiro (Apr 04 2019 at 19:06)</a>:</h4>
<p>It's not very complete, I think it's just what is needed to define the category</p>

<a name="162557855"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557855" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557855">Mario Carneiro (Apr 04 2019 at 19:06)</a>:</h4>
<p>you may also want to bundle continuous maps for this purpose</p>

<a name="162557907"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557907" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557907">Kevin Buzzard (Apr 04 2019 at 19:07)</a>:</h4>
<p>I'm still not very good at understanding sentences with the word <code>bundle</code> in.</p>

<a name="162557971"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557971" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557971">Kevin Buzzard (Apr 04 2019 at 19:07)</a>:</h4>
<p>Oh -- you mean <code>continuous_map X Y</code>?</p>

<a name="162557980"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162557980" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162557980">Mario Carneiro (Apr 04 2019 at 19:07)</a>:</h4>
<p>yes</p>

<a name="162558222"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162558222" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162558222">Kevin Buzzard (Apr 04 2019 at 19:10)</a>:</h4>
<p>I am very interested in hearing the way Scott would handle this stuff. My understanding of his PR is that he has not yet defined the morphisms I need -- <code>f_map</code>. They caused me some pain, I don't know whether they will cause him more or less pain, or whether he can use my work.</p>

<a name="162559483"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559483" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559483">Kevin Buzzard (Apr 04 2019 at 19:24)</a>:</h4>
<blockquote>
<p>first observation: this should be a definition</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">opens</span><span class="bp">.</span><span class="n">comap</span> <span class="o">{</span><span class="n">α</span> <span class="n">β</span><span class="o">}</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">topological_space</span> <span class="n">β</span><span class="o">]</span>
  <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">α</span> <span class="bp">→</span> <span class="n">β</span><span class="o">)</span> <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">continuous</span> <span class="n">f</span><span class="o">)</span> <span class="o">(</span><span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">β</span><span class="o">)</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">α</span> <span class="o">:=</span>
<span class="bp">⟨</span><span class="n">f</span> <span class="bp">⁻¹</span><span class="err">&#39;</span> <span class="n">U</span><span class="o">,</span> <span class="n">hf</span> <span class="bp">_</span> <span class="n">U</span><span class="bp">.</span><span class="mi">2</span><span class="bp">⟩</span>
</pre></div>


</blockquote>
<p>Is <code>{f : α → β}</code> ok here? It was only after reading your code that I discovered that <code>continuous</code> wasn't a typeclass :-)</p>

<a name="162559577"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559577" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559577">Mario Carneiro (Apr 04 2019 at 19:25)</a>:</h4>
<p>It can be, but you end up with unhelpful <code>opens.comap _ U</code> terms in your goal, like <code>classical.some _</code></p>

<a name="162559715"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559715" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559715">Mario Carneiro (Apr 04 2019 at 19:27)</a>:</h4>
<p>also <code>opens</code> seems to be a bit indecisive about whether to use <code>\sub</code> or <code>\le</code> for subsets</p>

<a name="162559728"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559728" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559728">Kevin Buzzard (Apr 04 2019 at 19:27)</a>:</h4>
<p>And why is this called <code>opens.comap</code> (which I assume is topological_space.opens.comap) and not <code>continuous.comap</code>? I am still not very good at naming.</p>

<a name="162559857"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559857" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559857">Mario Carneiro (Apr 04 2019 at 19:29)</a>:</h4>
<p>You can use projection notation either way, but the distinguishing feature is that <code>opens</code> is the thing being comapped. You aren't going to comap <code>opens</code> with something other than a continuous function, but continuous functions can comap other things</p>

<a name="162559985"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162559985" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162559985">Kevin Buzzard (Apr 04 2019 at 19:30)</a>:</h4>
<p>I make your change and I now have to fix errors like</p>
<div class="codehilite"><pre><span></span>type mismatch at application
  ℱ.res _ x
term
  x
has type
  ℱ.F V
but is expected to have type
  ℱ.F (topological_space.opens.comap (λ (x : X), x) continuous_id V)
</pre></div>


<p>I guess this is to be expected.</p>

<a name="162560159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162560159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162560159">Kevin Buzzard (Apr 04 2019 at 19:32)</a>:</h4>
<p>Lovely lines such as </p>
<div class="codehilite"><pre><span></span>    change ℱ.res _ (ℱ.res _ (ℱ.res _ x)) = ℱ.res _ x,
</pre></div>


<p>now don't compile at all :-(</p>

<a name="162561187"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162561187" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162561187">Kevin Buzzard (Apr 04 2019 at 19:44)</a>:</h4>
<p>no that's a complete lie, I fixed the first error and all the other errors magically fixed themselves. I've got it working :D</p>

<a name="162561443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162561443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162561443">Kevin Buzzard (Apr 04 2019 at 19:47)</a>:</h4>
<p>Revised version at <a href="https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851" target="_blank" title="https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851">https://gist.github.com/kbuzzard/567b88f2afae5730016c392ec2efc851</a></p>

<a name="162561475"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162561475" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162561475">Kevin Buzzard (Apr 04 2019 at 19:47)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> would using category theory stuff make any of this easier?</p>

<a name="162561504"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/universes%20in%20structures/near/162561504" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/78272universesinstructures.html#162561504">Kevin Buzzard (Apr 04 2019 at 19:47)</a>:</h4>
<p>Conversely, could I use this to make a bundled version of presheaves of types easier to implement? I think what I have that Scott doesn't have is that I am allowed to change my base with morphisms</p>


{% endraw %}
