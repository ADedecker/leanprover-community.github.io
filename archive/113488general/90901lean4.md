---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/90901lean4.html
---

## Stream: [general](index.html)
### Topic: [lean4](90901lean4.html)

---


{% raw %}
#### [ Chris Hughes (Mar 10 2018 at 17:24)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539240):
<p>Just noticed this. <a href="https://github.com/leanprover/lean/commit/16f28315eeddf996f85bff96954cd31a94aa4562" target="_blank" title="https://github.com/leanprover/lean/commit/16f28315eeddf996f85bff96954cd31a94aa4562">https://github.com/leanprover/lean/commit/16f28315eeddf996f85bff96954cd31a94aa4562</a> Is this something happening imminently or ages away? How badly will this break mathlib?</p>

#### [ Andrew Ashworth (Mar 10 2018 at 17:29)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539336):
<p>heh, that's news to me. lean 3 had a good run</p>

#### [ Andrew Ashworth (Mar 10 2018 at 17:31)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539391):
<p>if-then-else moves from coercing from Prop to bool to traditional reflection using boolean-valued function</p>

#### [ Andrew Ashworth (Mar 10 2018 at 17:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539534):
<p>this design doc is very exciting, it seems to hold a lot of improvements for using lean as a programming language</p>

#### [ Patrick Massot (Mar 10 2018 at 17:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539628):
<p>Can anyone see anything which could be related to using Lean as a proof assistant in this design notes?</p>

#### [ Simon Hudon (Mar 10 2018 at 17:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539677):
<p>This looks really good :)</p>

#### [ Andrew Ashworth (Mar 10 2018 at 17:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539678):
<p>no, not in the sense the mathematicians in this channel are using lean, except for scott, since he uses many tactics</p>

#### [ Simon Hudon (Mar 10 2018 at 17:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539679):
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> Not sure yet. I'll keep poring over it and let you know</p>

#### [ Andrew Ashworth (Mar 10 2018 at 17:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539684):
<p>obviously all of mathlib is going to break since lean4 isn't going to have an algebraic hierarchy</p>

#### [ Andrew Ashworth (Mar 10 2018 at 17:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539685):
<p>and that's just one of many big problems</p>

#### [ Patrick Massot (Mar 10 2018 at 17:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539726):
<p>Moving the algebraic hierarchy from core to mathlib rather sounds like good news</p>

#### [ Patrick Massot (Mar 10 2018 at 17:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539727):
<p>It was strange to see it in core</p>

#### [ Patrick Massot (Mar 10 2018 at 17:45)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539737):
<p>And it currently prevent us from changing anything there</p>

#### [ Andrew Ashworth (Mar 10 2018 at 17:45)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539738):
<p>well, i could understand why, having a model of integers and rational numbers is important for computing</p>

#### [ Andrew Ashworth (Mar 10 2018 at 17:46)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539778):
<p>it also means Leo is punting on redoing the algebraic hierarchy</p>

#### [ Andrew Ashworth (Mar 10 2018 at 17:49)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539844):
<p>ahhh, the new vm is going to support unboxed types...!</p>

#### [ Sebastian Ullrich (Mar 10 2018 at 17:53)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123539950):
<p><span class="user-mention" data-user-id="110025">@Andrew Ashworth</span> You seem to have missed the "incrementally rebuild core lib" part :)</p>

#### [ Andrew Ashworth (Mar 10 2018 at 17:55)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540003):
<p>i did, but you've been holding out on this important piece of news!</p>

#### [ Sebastian Ullrich (Mar 10 2018 at 17:56)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540054):
<p>I did expect someone in here to find it soon enough</p>

#### [ Patrick Massot (Mar 10 2018 at 17:56)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540055):
<p>Was it different when going from Lean2 to Lean3?</p>

#### [ Sebastian Ullrich (Mar 10 2018 at 17:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540060):
<p>We don't want to change the language, esp. syntax, this time (apart from fixing things). I think.</p>

#### [ Patrick Massot (Mar 10 2018 at 17:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540105):
<p>Would I see any difference then?</p>

#### [ Patrick Massot (Mar 10 2018 at 17:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540106):
<p>Or is it only about Andrew-syle use of Lean?</p>

#### [ Sebastian Ullrich (Mar 10 2018 at 18:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540207):
<p>The parser will enable better tooling and mathy notation. Most other things will enable more powerful and faster tactics.</p>

#### [ Patrick Massot (Mar 10 2018 at 18:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540210):
<p>More math automation?</p>

#### [ Andrew Ashworth (Mar 10 2018 at 18:03)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540220):
<p>only if someone like mario or scott decides to write a tactic to do so, i imagine</p>

#### [ Kevin Buzzard (Mar 10 2018 at 18:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540483):
<p>Is any time frame known for Lean 4?</p>

#### [ Sebastian Ullrich (Mar 10 2018 at 18:14)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540522):
<p>Kinda hard to say since we haven't even started yet</p>

#### [ Kevin Buzzard (Mar 10 2018 at 18:15)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540533):
<p>So we can at least say that it will not happen, say, within 1 month. Is the idea just to stop working on Lean 3 completely?</p>

#### [ Sebastian Ullrich (Mar 10 2018 at 18:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540623):
<p>No, we'll probably start on Monday</p>

#### [ Sebastian Ullrich (Mar 10 2018 at 18:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540624):
<p>:)</p>

#### [ Patrick Massot (Mar 10 2018 at 18:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540631):
<p>So you finish the monad stuff and stop working in Lean 3?</p>

#### [ Sebastian Ullrich (Mar 10 2018 at 18:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540633):
<p>I wouldn't expect many new features for Lean 3 at least. Well, the important ones are on the lean4 list anyway.</p>

#### [ Patrick Massot (Mar 10 2018 at 18:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540683):
<p>How long did it take last time you rewrote Lean from scratch?</p>

#### [ Patrick Massot (Mar 10 2018 at 18:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540688):
<p>I'm asking only out of curiosity, I'm very very far from having exhausted Lean 3 possibilities for math</p>

#### [ Sebastian Ullrich (Mar 10 2018 at 18:23)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540734):
<p>I'd have to check, I didn't participate in the Lean 3 rewrite. I still had a thesis to write in Lean 2.</p>

#### [ Kevin Buzzard (Mar 10 2018 at 18:25)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540779):
<p>This is only tangentially related, but would it be possible to get more devs from somewhere? Will MS pay for more? Can people apply for grant money for more? Or is there some problem of the form "Leo doesn't trust anyone enough to mess with his code"?</p>

#### [ Kevin Buzzard (Mar 10 2018 at 18:26)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540819):
<p>Also only tangentially related, but is there any chance of some sort of "stable release" i.e. announce that what we currently have is called Lean 3.4?</p>

#### [ Andrew Ashworth (Mar 10 2018 at 18:28)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540863):
<p>is that helpful for you if mathlib continues to keep up with nightly lean?</p>

#### [ Sebastian Ullrich (Mar 10 2018 at 18:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540908):
<p>Yes, there will be a stable release before branching. I don't know if mathlib wants to stick with that or the new nightlies for random bug fixes.</p>

#### [ Kevin Buzzard (Mar 10 2018 at 18:31)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540918):
<p>That's great news about the stable release. I will be using Lean as part of my course</p>

#### [ Kevin Buzzard (Mar 10 2018 at 18:31)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540921):
<p>in October, and if Lean 4 is still quite chaotic it will be very easy to explain to the students to use Lean 3.4</p>

#### [ Kevin Buzzard (Mar 10 2018 at 18:31)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123540922):
<p>There is enough in mathlib and Lean 3 for me to be able to do what I want to do</p>

#### [ Andrew Ashworth (Mar 10 2018 at 18:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123541568):
<blockquote>
<p>This is only tangentially related, but would it be possible to get more devs from somewhere? Will MS pay for more? Can people apply for grant money for more? Or is there some problem of the form "Leo doesn't trust anyone enough to mess with his code"?</p>
</blockquote>
<p>I am curious about how MSR allocates funding for internal projects; I don't know how it works when you're self-funded by a large company</p>

#### [ Moses Schönfinkel (Mar 10 2018 at 19:28)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123542318):
<p><span class="user-mention" data-user-id="110045">@Sean Leather</span> Heh... so my comment about Lean4 turns out to be prophetic rather than funny! :)</p>

#### [ Mario Carneiro (Mar 10 2018 at 20:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123544573):
<p>IIRC the lean 3 rewrite took about a year, maybe a bit more</p>

#### [ Mario Carneiro (Mar 10 2018 at 21:01)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123544626):
<p>The lean 4 plan there is basically the union of all the large scale lean projects currently under consideration. I expect it will take at least 6 months as a low estimate</p>

#### [ Mario Carneiro (Mar 10 2018 at 21:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123544673):
<p>As far as "will it break mathlib", I would say probably yes, but in a good way - moving things out of core lib is music to my ears</p>

#### [ Kevin Buzzard (Mar 10 2018 at 21:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123546023):
<p>I honestly think that writing maths again from scratch might be a lot of fun. I have never seen mathematics grown from the axioms before. There are still huge chunks of mathlib that I haven't read properly. Has anyone in the world read the Matiysevich stuff, for example? I am a number theorist and I know the theory, and I know exactly what the statement of the main theorem is, but I have no idea how he is proving it. Some of the later code looks quite unlike anything I've seen before in Lean. If I had to code up that mathematics it would take me months. Is there a chance that that high-powered stuff will have to be substantially rewritten to port it to Lean 4, or might it just be a case of redoing the basics?</p>

#### [ Scott Morrison (Mar 10 2018 at 22:06)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123546266):
<p>My very uninformed guess from reading Leo's roadmap is that the high-powered stuff may not actually need a complete rewrite. I'm glad you see it as "an opportunity, not a problem".</p>

#### [ Sean Leather (Mar 12 2018 at 15:16)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123610181):
<p>Eish! I go away for a few days (family visiting) and return to find the Lean world flipped upside down again. At what point do we get past the always-started-never-finished phase? That is, I've understood Lean 3 to be “experimental” since it began, and now Lean 4 is being started, but Lean 3 never officially dropped the label. Why not just continue incrementally developing Lean 3 using the same goals instead of starting over?</p>

#### [ Patrick Massot (Mar 12 2018 at 15:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123611142):
<p>I don't understand anything about the C++ code of Lean, but I think there is not much news here. We knew big changes were coming (at least <a href="https://github.com/leanprover/lean/issues/1601" target="_blank" title="https://github.com/leanprover/lean/issues/1601">#1601</a>,  <a href="https://github.com/leanprover/lean/issues/1674" target="_blank" title="https://github.com/leanprover/lean/issues/1674">#1674</a>,  <a href="https://github.com/leanprover/lean/issues/1692" target="_blank" title="https://github.com/leanprover/lean/issues/1692">#1692</a>). I don't see how one could rewrite the parser from scratch without going through an unusable state.  So there is clearly a need for a separate branch doing that. Why not calling it Lean4? Also <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> told us the syntax should not change much this time. On top of that we learn that Mario and Johannes will be given complete freedom do handle mathlib instead of having some part of it stuck in core lib. It looks like the ideal solution to enjoy the greatness of all those people without the recent tension.</p>

#### [ Patrick Massot (Mar 12 2018 at 15:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123611182):
<p>And we can still use Lean 3 in the mean time</p>

#### [ Sebastian Ullrich (Mar 12 2018 at 15:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123611306):
<p>Well said. Maybe we'll decide to call it Lean 3.5 after all in the end if there aren't many breaking changes</p>

#### [ Sebastian Ullrich (Mar 12 2018 at 15:48)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123611373):
<p>Though I'm not sure when "let's temporarily shrink core lib" became "let's remove the algebraic hierarchy from core lib forever" :)</p>

#### [ Sean Leather (Mar 12 2018 at 16:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123612679):
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I have nothing against anything you're saying. I just wonder if it's not possible to remove stuff, rather than start over and add it back. But <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> certainly knows better.</p>

#### [ Kevin Buzzard (Mar 12 2018 at 16:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123613435):
<p><span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> -- Leo has made it completely clear that he felt that "now" was not the time to be developing mathlib. Of course what he cannot control is the fact that you guys have made a system in which doing mathematics is quite fun, and hence it is simply inevitable that there will be people doing mathematics in Lean. I hope to have students publishing simple papers in undergraduate mathematics journals about how they have used Lean, for example, and this is not going away whatever Leo's opinion is [in fact I think this fits well with Leo's views because Leo likes one-off projects, and writing a small paper saying "this compiles with Lean commit X and mathlib commit Y" means Leo doesn't have to worry about breaking it]. The happy medium which I think we're currently trying to seek is that Mario and his team continue to develop mathlib but (a) try extremely hard not to bother Leo with requests, even reasonable ones such as "please fix ^, it would take 2 minutes" and (b) don't complain when Leo breaks stuff.</p>

#### [ Kevin Buzzard (Mar 12 2018 at 16:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123613466):
<p>On the other hand, if Lean 4 appears with a temporarily-shrunken core lib then I am almost sure that a bunch of people will immediately just add what has disappeared to mathlib and then there's every chance that they will edit it to make it what one might call "better". In my mind there is no doubt that Mario's opinion on how to write a mathematics library is an opinion well worth listening to and to be quite frank I suspect he knows more about this subject than Leo. Or, at least, one might argue that Mario knows how to write a library which mathematicians can use better than Leo does (although this is probably not a question Leo is even interested in).</p>

#### [ Kevin Buzzard (Mar 12 2018 at 16:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123613513):
<p>But at some point the question "is Leo ready for mathlib yet?" will come around again. For example, on the day Lean 4 is released. Will he be?</p>

#### [ Sebastian Ullrich (Mar 12 2018 at 18:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123616805):
<p>I believe the only reason the algebraic hierarchy is in the core lib right now is that it's used by the C++ implementation of <code>norm_num</code>. So yes, in Lean 4 it may actually be realistic to move it to mathlib because it should be possible to build a high-performance <code>norm_num</code> in Lean.</p>

#### [ Simon Hudon (Mar 12 2018 at 20:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123622134):
<p>Regarding the planned change to <code>decidability</code> and <code>ite</code>, are we going to keep <code>dite</code> with access to the assumption that the condition is true / false?</p>

#### [ Mario Carneiro (Mar 13 2018 at 00:00)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123629973):
<p>The changes to <code>decidable</code> and <code>ite</code> are the ones I am most dubious of. I do not think it would actually be better to define <code>decidable</code> as a bool plus a proof of <code>b = tt &lt;-&gt; p</code>, and the concerns that make this reasonable in Coq don't apply directly in lean (in particular because we don't use kernel computation as much). For <code>ite</code>, we already have <code>cond</code>, <code>ite</code> and <code>dite</code> and these three functions are needed regardless of any notations attached to them. But I don't see any obvious alternate way to interpret <code>if h : p then t else e</code> other than using <code>dite</code>, and anything that uses <code>bool</code> here will be too cumbersome. For the nondependent <code>if p then t else e</code>, it's not really a big deal if this is interpreted as <code>cond</code> or <code>ite</code>, but there should not be any relative performance penalty between the two in any case, and if there is this is a fault of the code generator not the functions.</p>

#### [ Mario Carneiro (Mar 13 2018 at 00:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123630039):
<p>Note: if you want to write a <code>decidable p</code> program by defining a <code>bool</code> program and prove it is correct, you can do this by using <code>decidable_of_iff (my_bool = tt &lt;-&gt; p) &lt;proof&gt;</code> with essentially no performance penalty. There is no need to change the definition for this.</p>

#### [ Simon Hudon (Mar 13 2018 at 00:04)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123630108):
<p>In this situation, I think we can identify two changes: <code>ite</code> taking a bool instead of a decidable proposition and <code>decidable</code> being redefined. I think regardless of the definition of <code>decidable</code>, we can keep <code>if _ then _ else _</code> the same.  In the non dependent case, I can see how a boolean condition would make the condition easier to rewrite.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123630553):
<p>Coq is a lot more cumbersome in this regard. You end up writing something like <code>if Z_lt_dec a b</code> instead of <code>if h : a &lt; b</code>; the later is naturally a lot more readable (where <code>Z_lt_dec</code> is unsurprisingly something like <code>{a &lt; b} + {~a &lt; b}</code> which is just Coq notation for sumbools). There is a weird notation-al dissonance between props and their "boolean" (decidable) alter-egos in Coq</p>

#### [ Simon Hudon (Mar 13 2018 at 00:25)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123630761):
<p>Yeah that's true. It's a really cool thing about Lean. It seems like just writing an obvious program is so much easier and that way of defining <code>if _ then _ else _</code> has something to do with it.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:28)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123630871):
<p>Notation is just too important, regardless of the amount of bikeshedding blame ending up being bestowed upon those partaking in the discussion :P. (I guess Iverson would agree!)</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:29)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123630883):
<p>Which is twice as amusing because then what on Earth was he thinking with APL.</p>

#### [ Simon Hudon (Mar 13 2018 at 00:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123630955):
<p>That's what I was about to ask. I only know Iverson from APL and APL is only an example of how to make a miserable mess of your syntax</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:33)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631020):
<p>Well his Turing award lecture was named <code>Notation as a tool of thought</code> so one would <em>think</em> that he of all people would understand the importance.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:33)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631023):
<p>And then he goes on to explain what makes good notation with some very valid points.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:34)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631069):
<p>And then he proceeds to use APL to demonstrate those valid points and at this point everyone is like "are you serious?".</p>

#### [ Simon Hudon (Mar 13 2018 at 00:34)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631072):
<p>Interesting. I haven't read it. I'll have a look.</p>

#### [ Simon Hudon (Mar 13 2018 at 00:35)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631083):
<p>My reference for mathematical notation is Dijkstra and his idea of "letting the symbols do the work"</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:36)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631132):
<p>I have mixed feelings about DIjkstra ^^.</p>

#### [ Simon Hudon (Mar 13 2018 at 00:36)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631143):
<p>He wrote a note on his notational choices in EWD 1300: <a href="https://www.cs.utexas.edu/users/EWD/index13xx.html" target="_blank" title="https://www.cs.utexas.edu/users/EWD/index13xx.html">https://www.cs.utexas.edu/users/EWD/index13xx.html</a></p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631156):
<p>Why am I not one bit surprised that it's hand-written. He would also write computer programs in English... argh! :)</p>

#### [ Simon Hudon (Mar 13 2018 at 00:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631157):
<p>Yeah you can take all his opinions as holy writ. What bothers you in his ideas?</p>

#### [ Simon Hudon (Mar 13 2018 at 00:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631161):
<p>:D</p>

#### [ Simon Hudon (Mar 13 2018 at 00:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631164):
<p>I love his handwriting :D</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:38)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631206):
<p>It's more like his personality and actions not coinciding with what he actually says.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:38)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631207):
<p>For example "the humble programmer".</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:38)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631208):
<p>Humility was probably his weakest point :P.</p>

#### [ Simon Hudon (Mar 13 2018 at 00:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631231):
<p>Haha! Yeah but the humility he speaks of in that is something he did: he did assume his problems were too hard to just approach head on so he worked on reducing their intellectual demands</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631350):
<p>Have you seen his correspondence with Backus? For some reason my personal feelings towards Dijsktra make me like even his ideas less :(.</p>

#### [ Simon Hudon (Mar 13 2018 at 00:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631355):
<p>No, where can I find it?</p>

#### [ Simon Hudon (Mar 13 2018 at 00:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631358):
<p>By "his ideas" do you mean Backus?</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631395):
<p>Nono, I mean Dijsktra.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631398):
<p><a href="https://medium.com/@acidflask/this-guys-arrogance-takes-your-breath-away-5b903624ca5f" target="_blank" title="https://medium.com/@acidflask/this-guys-arrogance-takes-your-breath-away-5b903624ca5f">https://medium.com/@acidflask/this-guys-arrogance-takes-your-breath-away-5b903624ca5f</a></p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631401):
<p>Backus would talk about functional programming and liberation from von-neumman architecture and thinking in bytes.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631404):
<p>And Dijstrka would unleash a flurry of what is difficult to describe :).</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:46)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631473):
<p>It's a fairly long chain of replies tho, which makes me dislike Dijsktra from a really silly personal standpoint.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631492):
<p>Putting personal feelings aside tho, objectively Dijsktra was an excellent computer scientist.</p>

#### [ Simon Hudon (Mar 13 2018 at 00:48)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631554):
<p>That's interesting. I started off taking Dijkstra's word as holy gospel and followed his approach for my master's. It's been very enlightening for me to learn to disagree with him and to stop tearing down projects that I would not personally undertake</p>

#### [ Simon Hudon (Mar 13 2018 at 00:50)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631582):
<p>Specifically, I had to eventually dismiss his "Computer Science is no more about computers than astronomy is about telescopes" comment. Z3 is actually what led me there. Having fast computers makes such a difference in building large formal proofs. I had to rethink my views in the field</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631624):
<p>I think we also often somehow disregard that there exist proofs that are "computational" in their nature, which the 4-colour theorem is a prime example of. I am guessing they arise when your "domain" is constrained but still colossal.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631672):
<p>But perhaps Kevin or Patrick would be of different opinion.</p>

#### [ Simon Hudon (Mar 13 2018 at 00:54)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631718):
<p>That kind of proof still bother me a bit. I think they are a valid certificate for their claim but I wonder if they limit the amount of insight that one can gain from reading it.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 00:54)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631724):
<p>Does an alternative that doesn't need to check &lt;many&gt; cases exist yet?</p>

#### [ Kevin Buzzard (Mar 13 2018 at 00:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631834):
<p>Nope, not as far as I know.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 00:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631844):
<p>Although I think &lt;many&gt; went down from the original 2000 or so</p>

#### [ Simon Hudon (Mar 13 2018 at 00:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631846):
<p>Not that I know of. My point is that I'm hesitant to accept the computational nature of the proof. I'm not sure how useful that particular fact is but a proof that is inscrutable proves one fact but if the proof can show people how to do mathematics or computer science, it does so more to advance the field. Admittedly if the theorem is referenced all the time but the proof is uninteresting, it still moves the field forward</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:00)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631849):
<p>I don't know much about proofs which are computational in nature, the proofs I know are all about building elaborate structures.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:00)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631891):
<p>This particular theorem is super-interesting!</p>

#### [ Simon Hudon (Mar 13 2018 at 01:00)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631913):
<p>How enlightening was the proof for you?</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:01)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631920):
<p>Not one bit.</p>

#### [ Simon Hudon (Mar 13 2018 at 01:02)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123631976):
<p>What is so interesting about the theorem?</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:04)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632039):
<p>Its applications. People optimize compilers with it, people use it to cover areas with signal with it. It's a useful, therefore interesting??? theorem.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:04)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632044):
<p>It's not some claim about perfectoid spaces :P.</p>

#### [ Simon Hudon (Mar 13 2018 at 01:05)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632057):
<p>I was not aware of that. That's pretty cool :) Do you know how it helps with compilers?</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:05)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632058):
<p>I think something to do with assigning variables to registers.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:05)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632060):
<p>To avoid spilling perhaps?</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:06)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632106):
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> At one point in the past Kevin told me he's not very fond of proofs that rely purely on human understanding of the world (such as commutativity of multiplication being explained "geometrically" by counting soldiers rows first / cols first and noting that their number doesn't change) - any observations in this regard?</p>

#### [ Simon Hudon (Mar 13 2018 at 01:06)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632107):
<p>That makes sense. I'm still not sure where the planarity of the graph intervenes though</p>

#### [ Andrew Ashworth (Mar 13 2018 at 01:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632163):
<p>the trouble is intuition will only get you so far, and that's why appeals to informal proofs like counting soldiers is not ideal</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632168):
<p>That's a similar argument to Kevin's. I just wonder if you would accept "simple" proofs like that as proofs.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:09)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632169):
<p>Lean would of course not.</p>

#### [ Simon Hudon (Mar 13 2018 at 01:09)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632180):
<p>Interesting, yes I do. I don't like proofs by analogy, not in technical texts anyway. I have no problems with proofs that purely shuffle symbols around. But I like them to be arranged in way that is obvious so that most of the proof is of the sort "there is only one thing you can do now" with as little surprises as possible. To me, it boils down to this: do you want to impress your audience or do you want to teach them something beyond this particular fact.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632239):
<p>But it's still a proof... for a human, right?</p>

#### [ Andrew Ashworth (Mar 13 2018 at 01:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632240):
<p>i would prefer something that does both? a well written paper interspersed with reasoning and formal proof</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632291):
<p>If I were to tell you that you can count soldiers from "either perspective" to get the same result, would you be convinced that this is the case for an arbitrary number of soldiers?</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632321):
<p>How would one formulate this kind of proof in Lean?</p>

#### [ Simon Hudon (Mar 13 2018 at 01:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632323):
<blockquote>
<p>But it's still a proof... for a human, right?</p>
</blockquote>
<p>Yes exactly. So you should have a <code>calc</code> block that spans pages and pages even if it's valid. You're losing people's attention. On the other hand don't, for the sake of being intuitive, jump into the rabbit hole that is the breaking down of equivalences into mutual implication or the analysis of multiple cases. I like efficiency in (human) formal reasoning</p>

#### [ Simon Hudon (Mar 13 2018 at 01:14)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632366):
<blockquote>
<p>How would one formulate this kind of proof in Lean?</p>
</blockquote>
<p>I wouldn't even try but I'm curious about what you'd come up with</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:15)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632378):
<p>I am not sure. In general, if I were to call this a "geometrical proof", how would one begin in a mechanized / formalized setting.</p>

#### [ Simon Hudon (Mar 13 2018 at 01:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632440):
<p>I would venture the opinion that it is impossible because its justification is not in any set of axiom but in an experience of space that is common to most humans.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632485):
<p>I think the only proof of the "counting soldiers in a rectangle" which I can accept is induction on one of the sides. I was ranting about this in the finite sequences thread though -- I don't know whether the statement "partition X into m disjoint subobjects each of size d -&gt; size of X is m*d" should be a theorem about finite sets, finsets or fintypes. In reality it's a theorem about objects in a rectangle</p>

#### [ Simon Hudon (Mar 13 2018 at 01:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632486):
<p>And it is a big weakness. It's a bit of stage magic: you make it appear like you solved the problem but the only criterion is that "people agree"</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632489):
<p>Sounds very reasonable. Could one formulate a model of such intuitive understanding that would be consistent with our perception thereof? Like ZFC but... with more hand-waving :P.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632490):
<p>and I think it's a bit weird that one theorem in maths / reality threatens to become three in Lean.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632498):
<p>Right. But that's what proofs are, by definition. "People agree."</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632540):
<p>Not any more.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632545):
<p>Not in mathematics.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632546):
<p>It's not?</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632547):
<p>Oh, nice.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632548):
<p>I think it's going too fast. That's why I'm here.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632553):
<p>I think what is commonly accepted as a proof in mathematics is "the experts look at the techniques and figure that they should be enough"</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632558):
<p>Ufffff...</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632560):
<p>and then the rest of the people just say "well the experts seem to believe it"</p>

#### [ Simon Hudon (Mar 13 2018 at 01:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632565):
<p>I would venture the opinion that it's moving towards "people agree on a fixed number of rules and once they agreed, you have to decide whether the rules have been followed"</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632566):
<p>That doesn't sound reassuring.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632613):
<p>Patrick goes on about Scholze. But the number of people who have read all of his recent work is probably 0 (other than Scholze) now, because he's been branching out a bit. On the other hand, he has form, and some people have checked some of his stuff very carefully</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632616):
<p>so there's a certain amount of trust involved.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632619):
<p>But he is not perfect even though he's a genius, and this is what makes me scared.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:23)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632625):
<p>because mathematics is being done at a ludicrously quick rate at the minute, with it being so easy to knock up a pdf and stick it on ArXiv</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:26)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632726):
<p>Of course there's "perfectoid space" on Scholze's wiki page.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:27)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632740):
<p>So I guess you guys are, and this is a terminus technicus, "in a pickle".</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:27)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632742):
<p>Checking proofs is apparently hard.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:28)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632781):
<p>Well, I think that people don't think we are in a pickle.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:28)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632783):
<p>and I am kind-of concerned that we might find out too late that some important thing was wrong and then everyone will have egg on their face.</p>

#### [ Mario Carneiro (Mar 13 2018 at 01:28)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632784):
<p>Here's my kind of formalization of soldiers-in-a-rectangle proof of commutativity:</p>
<ul>
<li>Why should we believe that counting from one direction or another should give the same number?<ul>
<li>because it's the same soldiers</li>
</ul>
</li>
<li>But why should counting the same soldiers in a different order give the same number?<ul>
<li>Because that's what we mean by the "same number" (alternatively, you can push on this intuition but I will stick to conventional cardinality)</li>
</ul>
</li>
<li>But how do we know we aren't double counting or something? That would clearly mess up the count<ul>
<li>Because we are sweeping from one side to another in the count in some definite order, which prevents a double count</li>
</ul>
</li>
</ul>
<p>At this point, I see the formal proof clearly: it is a bijection between <code>fin m x fin n</code> and itself that counts lexicographically in two different ways</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632853):
<p>On the other hand I am open to the opinion that I am just getting old. I am happy that FLT is proved but then again I had time to read the proof (I was a post-doc and it was in my area so I had to read it). But ever since then I've felt less and less convinced that people have been checking all the details of absolutely everything, however perhaps I'm just more paranoid and slower now.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:32)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632904):
<p>Meh but when you write down the bijection between fin m x fin n and fin (m x n) ... oh no you're right, you don't seem to need induction!</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:32)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632907):
<p>But now you have to prove that if fin x and fin y are in bijective correspondence then x=y.</p>

#### [ Kevin Buzzard (Mar 13 2018 at 01:33)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632913):
<p>Mario's proof is the categorification proof. Don't prove a * b = b * a in nat, prove A x B bijects with B x A in the category of sets.</p>

#### [ Simon Hudon (Mar 13 2018 at 01:34)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123632956):
<blockquote>
<p>I'm just more paranoid and slower now.</p>
</blockquote>
<p>That sounds like a good thing to have in an audience. If the smartest of the smart are the ones reviewing the FLT proof, what will be left of that understanding once those people will have died? Will you need people dedicated to learning and understanding that particular proof and transmitting that understanding from generation to generation?</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123633187):
<p>Remember Fermat had a beautiful proof that just barely didn't fit the margin in his notebook or what was it ;). Surely we can easily understand 17th century mathematics!</p>

#### [ Simon Hudon (Mar 13 2018 at 01:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123633232):
<p>I think that's mathematician code for "... and then magic happens ..."</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:45)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123633250):
<p>What sounds better is: Magician's code for "... and then mathematics happens ...".</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123633303):
<p>Oh man, I'll be getting like 4 hours of sleep. Yey... off to bed, nite.</p>

#### [ Mario Carneiro (Mar 13 2018 at 01:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123633304):
<blockquote>
<p>But now you have to prove that if fin x and fin y are in bijective correspondence then x=y.<br>
Mario's proof is the categorification proof. Don't prove a * b = b * a in nat, prove A x B bijects with B x A in the category of sets.</p>
</blockquote>
<p>The goal with that proof was to try to establish what formal proof underlies the confidence in the result given from the "geometric proof" of this theorem. But most of this is actually just pinning down what we mean when we say things. When I say there are 10 soldiers in a line, what does that mean? I guess I should be able to count up 10 times while naming the soldiers, but then 10 is defined in terms of itself which isn't good. Perhaps we have some internal conception of 10 as a number, and then we map this internal representation onto the soldiers; in that case it looks like we're talking about bijecting our set <code>A</code> of soldiers with <code>fin n</code> where <code>n : nat</code> is our abstract conception of numbers.</p>
<p>So where is <code>fin n = fin m -&gt; n = m</code> hiding? I would argue it is in the intuitive notion that there are a well defined number of soldiers in the line in the first place, which is generally unchallenged. One may worry at this point that this is an empirical fact, that it just so happens that in our universe every time we count the same thing twice we get the same number (which obviously is false for a variety of reasons like miscounting), but we can push the theorem back to the platonic realm by counting our own abstract numbers, i.e. forming a bijection {1,...,n}-&gt;{1,...,m} and showing that always n=m in this case.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:50)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123633410):
<p>^ This follows the "intuitive" notion of how cardinality is extended beyond finite. Just form a bijection with something nice (such as natural numbers) and then put your faith in the nice set.</p>

#### [ Moses Schönfinkel (Mar 13 2018 at 01:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123633418):
<p>I really need to sleep. Bai.</p>

#### [ Sean Leather (Mar 13 2018 at 08:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123643461):
<p>Some questions on the design notes:</p>
<blockquote>
<p><code>if-then-else</code> using <code>bool</code> instead of <code>Prop</code>. As soon as we started programming with Lean (version 3), it became clear that <code>if-then-else</code> with <code>Prop</code> creates more problems that it solves.</p>
</blockquote>
<p>Can anyone elaborate on the problems created?</p>
<blockquote>
<p>The elaborator already has support for a coercion from <code>Prop</code> to <code>bool</code> (for decidable propositions). The dependent <code>if H : p then t else e</code> may look cute, but it is unnecessary now that we have <code>match</code>.</p>
</blockquote>
<p>Doesn't the “now that we have <code>match</code>” statement apply equally well to the non-dependent <code>if-then-else</code>? Stated another way: why would you want <code>if-then-else</code> for non-dependent propositions if you don't want <code>if-then-else</code> for dependent propositions? (I'm not arguing one way or another, just trying to understand the logic.)</p>

#### [ Simon Hudon (Mar 13 2018 at 18:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123664272):
<p>I'm worried about those statements too. I wouldn't want to see those two <code>if-then-else-</code> disappear. More worrisome still is the introduction of <code>match</code> in the expression language. In Coq, they tend to make expressions larger than necessary. I really like that we're using auxiliary definitions instead</p>

#### [ Sebastian Ullrich (Mar 13 2018 at 18:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123664331):
<p>Uh? There is no planned change to <code>match</code>.</p>

#### [ Simon Hudon (Mar 13 2018 at 19:00)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123664656):
<p>Glad to hear it! So what does Leo mean what he says those things?</p>

#### [ Joe Hendrix (Mar 13 2018 at 23:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123676054):
<p>In the "SSA or SIL" question in the design notes referring to LLVM IR vis Swift IL?</p>

#### [ Mario Carneiro (Mar 13 2018 at 23:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123676114):
<p>SIL indeed stands for swift IL, SSA is static single assignment form in general. I think LLVM is off the table now</p>

#### [ Simon Hudon (Mar 14 2018 at 00:03)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123676509):
<blockquote>
<p>I think LLVM is off the table now</p>
</blockquote>
<p>Yes? What disqualified it?</p>

#### [ Mario Carneiro (Mar 14 2018 at 00:09)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123676702):
<p>It's very complicated with its own gotchas, and it's unlikely to produce better results than just having our own IL</p>

#### [ Mario Carneiro (Mar 14 2018 at 00:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123676768):
<p>Leo works with Nuno Lopes, who has done formalization of LLVM and I think is the source of this view</p>

#### [ Simon Hudon (Mar 14 2018 at 00:11)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123676776):
<p>That's interesting. I thought having that kind of formalization might be a good reason to use it</p>

#### [ Mario Carneiro (Mar 14 2018 at 00:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123676834):
<p>I think it's more like once you've formalized a big language you know all the little suboptimalities in it. Like how I now have a better understanding of lean's theory to see why non-transitive definitional equality is a problem</p>

#### [ Mario Carneiro (Mar 14 2018 at 00:14)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123676890):
<p>plus we're not talking a formalization in a proof assistant, I think it comes in the form of papers and compiler optimization checking tools</p>

#### [ Simon Hudon (Mar 14 2018 at 00:24)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123677247):
<p>Ah ok. I thought you were talking of someone from the Vellvm project</p>

#### [ Joe Hendrix (Mar 14 2018 at 00:31)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123677476):
<p>If you target Swift IL, then you are implicitly saying that you are fine with LLVM IR since SIL is translated to LLVM.</p>

#### [ Mario Carneiro (Mar 14 2018 at 00:32)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123677523):
<p>I think it's just being used for inspiration</p>

#### [ Joe Hendrix (Mar 14 2018 at 00:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123678090):
<p>GHC's compilation is essentially "System F core -&gt; STG -&gt; Cmm -&gt; (native | LLVM)".  I would expect a similar flow would work well for Lean.</p>

#### [ Simon Hudon (Mar 14 2018 at 01:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123678816):
<p><span class="user-mention" data-user-id="110994">@jhx</span> Do you think it will be problematic to use Haskell techniques in Lean even though Lean is strict by default?</p>

#### [ Joe Hendrix (Mar 14 2018 at 08:35)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123691650):
<p>It's true.  I could imagine Lean maps a system F like core directly to a low-level Cmm representation.  My understanding is that STG is provides a uniform closure representation and is where strictness analysis is performed prior to Cmm generation.</p>

#### [ Johannes Hölzl (Mar 14 2018 at 09:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123692580):
<blockquote>
<p>Glad to hear it! So what does Leo mean what he says those things?</p>
</blockquote>
<p>Leo didn't write to get rid of <code>match</code>, in the (unpolished) document he writes that dependent if-then-else(<code>dite</code>) is not necessary anymore due to having <code>match</code> now. But I hope that we can implement <code>if h : p then a else b</code> with the parser in Lean4 ourself.</p>

#### [ Mario Carneiro (Mar 14 2018 at 09:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123692631):
<p>I don't understand that comment either. AFAIK lean has had match since lean 1, what's new?</p>

#### [ Johannes Hölzl (Mar 14 2018 at 09:25)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123692959):
<p>My guess is that in later Lean versions <code>match</code> got improved support for the dependent case? But I also don't see how <code>match</code> should replace the dependent if case. The later also includes the construction of the decidable predicate.</p>

#### [ Joe Hendrix (Mar 14 2018 at 17:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/lean4/near/123709552):
<p>Assuming the decidable changes are implemented, should the <code>h</code> in <code>if h : p then a else b</code> syntax ensure <code>h</code> has type <code>p</code> (resp. <code>not p</code>)?  That syntax would then hide the underlying representation choice.</p>


{% endraw %}
