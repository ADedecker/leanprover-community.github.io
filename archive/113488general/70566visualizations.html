---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/70566visualizations.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html">visualizations</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="177675847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177675847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177675847">Daniel Selsam (Oct 09 2019 at 02:00)</a>:</h4>
<p>Here is a visualization of the Mathlib instance graph, courtesy of <span class="user-mention" data-user-id="110024">@Sebastian Ullrich</span> :<br>
<a href="/user_uploads/3121/dDiHJfmKIDWc1DZ89USvowFl/mathlib_instances_alt3.png" target="_blank" title="mathlib_instances_alt3.png">mathlib_instances_alt3.png</a> <br>
There are many visualization parameters that we haven't gotten to experiment with yet.</p>
<div class="message_inline_image"><a href="/user_uploads/3121/dDiHJfmKIDWc1DZ89USvowFl/mathlib_instances_alt3.png" target="_blank" title="mathlib_instances_alt3.png"><img src="/user_uploads/3121/dDiHJfmKIDWc1DZ89USvowFl/mathlib_instances_alt3.png"></a></div>

<a name="177676265"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177676265" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177676265">Mario Carneiro (Oct 09 2019 at 02:11)</a>:</h4>
<p>that is cool for reasons entirely unrelated to the mathlib instance hierarchy</p>

<a name="177693906"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177693906" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177693906">Rob Lewis (Oct 09 2019 at 08:51)</a>:</h4>
<p>These never got posted to a public channel here, but Patrick and I were experimenting with some graphs last week.<br>
<a href="https://zulip-uploads.s3.amazonaws.com/3121/Vqgd9SI4NxEKwYyfZLGvvGEG/reduced_imports.pdf?Signature=D14e1arJW3c%2BxJQYnlwPtr6vtBE%3D&amp;Expires=1570610618&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ" target="_blank" title="https://zulip-uploads.s3.amazonaws.com/3121/Vqgd9SI4NxEKwYyfZLGvvGEG/reduced_imports.pdf?Signature=D14e1arJW3c%2BxJQYnlwPtr6vtBE%3D&amp;Expires=1570610618&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ">mathlib import hierarchy, tactic and meta folders removed</a><br>
<a href="https://zulip-uploads.s3.amazonaws.com/3121/g3iNpH6yzxUs3Majam54hngZ/graph_experiments_no_meta.pdf?Signature=TLPgfn1QXe1%2FVvIzu7qtSyrgYeo%3D&amp;Expires=1570610798&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ" target="_blank" title="https://zulip-uploads.s3.amazonaws.com/3121/g3iNpH6yzxUs3Majam54hngZ/graph_experiments_no_meta.pdf?Signature=TLPgfn1QXe1%2FVvIzu7qtSyrgYeo%3D&amp;Expires=1570610798&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ">same thing, different display</a><br>
<a href="https://zulip-uploads.s3.amazonaws.com/3121/d8_8jioot4ntr6AsJw9KKP5L/graph_experiments_directed.pdf?Signature=54%2BxfOgVUnAqQ%2Fl0zgC7ZlDQnRc%3D&amp;Expires=1570610953&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ" target="_blank" title="https://zulip-uploads.s3.amazonaws.com/3121/d8_8jioot4ntr6AsJw9KKP5L/graph_experiments_directed.pdf?Signature=54%2BxfOgVUnAqQ%2Fl0zgC7ZlDQnRc%3D&amp;Expires=1570610953&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ">full mathlib import hierarchy, how Mathematica thinks it should be clustered</a><br>
<a href="https://zulip-uploads.s3.amazonaws.com/3121/7feFKK6vmfpLSz45pflS26Y7/mathlib.png?Signature=SQVfz8y4ps5lScdiPHG1FJjSIao%3D&amp;Expires=1570611048&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ" target="_blank" title="https://zulip-uploads.s3.amazonaws.com/3121/7feFKK6vmfpLSz45pflS26Y7/mathlib.png?Signature=SQVfz8y4ps5lScdiPHG1FJjSIao%3D&amp;Expires=1570611048&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ">Patrick's visualization of that</a><br>
<a href="https://zulip-uploads.s3.amazonaws.com/3121/wVHutiUCjbkfFxM4U5CCtpGg/mathlib_structures_patrick.pdf?Signature=0PuPPR9s%2FbYVUG8veebLhnLOX%2Fc%3D&amp;Expires=1570610858&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ" target="_blank" title="https://zulip-uploads.s3.amazonaws.com/3121/wVHutiUCjbkfFxM4U5CCtpGg/mathlib_structures_patrick.pdf?Signature=0PuPPR9s%2FbYVUG8veebLhnLOX%2Fc%3D&amp;Expires=1570610858&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ">an approximation to the "structure hierarchy", not the same as the instance graph</a><br>
<a href="https://zulip-uploads.s3.amazonaws.com/3121/LzwNQzMxBDiJoEGONYkhPzAt/mathlib_structures.pdf?Signature=wAkrgkJbJ3sLRj8bXCFHtUV8odM%3D&amp;Expires=1570610909&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ" target="_blank" title="https://zulip-uploads.s3.amazonaws.com/3121/LzwNQzMxBDiJoEGONYkhPzAt/mathlib_structures.pdf?Signature=wAkrgkJbJ3sLRj8bXCFHtUV8odM%3D&amp;Expires=1570610909&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ">a different approximation to the same thing</a></p>

<a name="177694288"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177694288" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177694288">Sebastian Ullrich (Oct 09 2019 at 08:56)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> Attachments shared privately are not accessible from other channels</p>

<a name="177694713"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177694713" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177694713">Rob Lewis (Oct 09 2019 at 09:02)</a>:</h4>
<p>Oops, Zulip has better security than I expected. Fixed?</p>

<a name="177695493"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177695493" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177695493">Sebastian Ullrich (Oct 09 2019 at 09:13)</a>:</h4>
<p><span class="user-mention" data-user-id="110596">@Rob Lewis</span> Yes!</p>

<a name="177696468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177696468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177696468">Sebastian Ullrich (Oct 09 2019 at 09:25)</a>:</h4>
<p>What were your approximations for the structure hierarchy?</p>

<a name="177696885"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177696885" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177696885">Rob Lewis (Oct 09 2019 at 09:31)</a>:</h4>
<p>The first one is from <span class="user-mention" data-user-id="110031">@Patrick Massot</span> . "meta-programming to get all classes and all instances. And then grep to guess which instances are extensions." The second is mine, it's all and only uses of the <code>extends</code> keyword.</p>

<a name="177701434"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177701434" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177701434">Sebastian Ullrich (Oct 09 2019 at 10:44)</a>:</h4>
<p>Interesting. So yours is naturally diamond-free. I believe the best-effort approximation would be to only include edges from instances of the form <code>[A xs] : B ys</code> where <code>xs</code> is a subset of <code>ys</code>. That excludes undesired edges like <code>monad -&gt; alternative</code> from <code>monad m -&gt; alternative (option_t m)</code></p>

<a name="177702026"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177702026" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177702026">Rob Lewis (Oct 09 2019 at 10:55)</a>:</h4>
<p>Mine is an underapproximation, and Patrick's is an overapproximation because it has some edges like that. The problem is I don't know exactly what we're trying to approximate. That sounds like a reasonable heuristic.</p>

<a name="177702406"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177702406" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177702406">Mario Carneiro (Oct 09 2019 at 11:01)</a>:</h4>
<p>using <code>extends</code> isn't naturally diamond free unless you never use old structure commands, and we usually use old structure command when we are about to make a diamond...</p>

<a name="177702514"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177702514" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177702514">Mario Carneiro (Oct 09 2019 at 11:03)</a>:</h4>
<p>It's also obviously not diamond free</p>

<a name="177702520"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177702520" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177702520">Rob Lewis (Oct 09 2019 at 11:03)</a>:</h4>
<p>Indeed, you can see diamonds in both my and Patrick's graphs.</p>

<a name="177703022"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177703022" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177703022">Sebastian Ullrich (Oct 09 2019 at 11:12)</a>:</h4>
<p>Ah, right...</p>

<a name="177708582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177708582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177708582">Patrick Massot (Oct 09 2019 at 12:34)</a>:</h4>
<p>More details about my method:</p>
<ul>
<li>run the <code>make_all.sh</code> script</li>
<li>change the master <code>all.lean</code> to  <a href="/user_uploads/3121/P0ZqV8wTCTD_Nd7qrDPuT4kq/all.lean" target="_blank" title="all.lean">all.lean</a></li>
<li>run <code>lean all.lean 2&gt; mathlib.yaml</code>, get <a href="/user_uploads/3121/Gxvw2FRrknPjGx5-Msm4AmtY/mathlib.yaml" target="_blank" title="mathlib.yaml">mathlib.yaml</a></li>
<li>run <a href="/user_uploads/3121/YFM8FNi8dE78SKZf2X7gnGeB/instance_graph.py" target="_blank" title="instance_graph.py">instance_graph.py</a>,  get <a href="/user_uploads/3121/80hv2dOEQvquKJZub3Fr1wwY/instances.graphml" target="_blank" title="instances.graphml">instances.graphml</a> </li>
</ul>
<p>See <a href="https://www.yworks.com/yed-live/?file=https://gist.githubusercontent.com/PatrickMassot/1f0d0f74661d43489379b2c464a798e8/raw/instances" target="_blank" title="https://www.yworks.com/yed-live/?file=https://gist.githubusercontent.com/PatrickMassot/1f0d0f74661d43489379b2c464a798e8/raw/instances">https://www.yworks.com/yed-live/?file=https://gist.githubusercontent.com/PatrickMassot/1f0d0f74661d43489379b2c464a798e8/raw/instances</a></p>

<a name="177728409"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177728409" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177728409">Patrick Massot (Oct 09 2019 at 15:58)</a>:</h4>
<p>Mathematical components visualization at: <a href="https://math-comp.github.io/math-comp/htmldoc/libgraph.html" target="_blank" title="https://math-comp.github.io/math-comp/htmldoc/libgraph.html">https://math-comp.github.io/math-comp/htmldoc/libgraph.html</a></p>

<a name="177900580"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177900580" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177900580">Sebastian Ullrich (Oct 11 2019 at 12:05)</a>:</h4>
<p>Okay, here is my version of the class inheritance graph: <a href="/user_uploads/3121/yKkbcfVZLynWe5UaZ33TYTvq/mathlib-coercions.svg" target="_blank" title="mathlib-coercions.svg">mathlib-coercions.svg</a><br>
With 320 edges, it has still a few more than the other versions. Fun fact: the highest number of distincts paths between two classes is <strong>407</strong> between <code>discrete_linear_ordered_field</code> and <code>has_add</code>. Which are actually all in core, not mathlib.</p>

<a name="177901326"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177901326" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177901326">Patrick Massot (Oct 11 2019 at 12:17)</a>:</h4>
<p>Nice!</p>

<a name="177906711"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177906711" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177906711">Mario Carneiro (Oct 11 2019 at 13:30)</a>:</h4>
<p>wow, that's less than I expected</p>

<a name="177906731"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/visualizations/near/177906731" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/70566visualizations.html#177906731">Mario Carneiro (Oct 11 2019 at 13:31)</a>:</h4>
<p>but it explains why the exponential blowup problem hasn't hit us that hard</p>


{% endraw %}

{% include archive_update.html %}