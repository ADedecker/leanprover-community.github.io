---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/21549toadditive.html
---

## Stream: [general](index.html)
### Topic: [to_additive](21549toadditive.html)

---


{% raw %}
#### [ Patrick Massot (Oct 10 2018 at 16:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135545903):
<p>Is there any hope <code>to_additive</code> could be improved to avoid things like <a href="https://github.com/leanprover/mathlib/blob/2594f48f20392f84b0743eb0867c030913eca627/group_theory/quotient_group.lean#L40-L47" target="_blank" title="https://github.com/leanprover/mathlib/blob/2594f48f20392f84b0743eb0867c030913eca627/group_theory/quotient_group.lean#L40-L47">https://github.com/leanprover/mathlib/blob/2594f48f20392f84b0743eb0867c030913eca627/group_theory/quotient_group.lean#L40-L47</a>?</p>

#### [ Mario Carneiro (Oct 11 2018 at 16:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135612824):
<p><span class="user-mention" data-user-id="110026">@Simon Hudon</span> Would you like to take a look at this? I am thinking that the <code>to_additive</code> attribute should recursively copy any suffixed versions of the input mapping that happen to be in the term being traversed. For example if you are translating <code>foo =&gt; bar</code> and you run across <code>foo._match_1</code>, and this does not already have a translation, then it should translate <code>foo._match_1 =&gt; bar._match_1</code> and then try again</p>

#### [ Simon Hudon (Oct 11 2018 at 17:06)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135614750):
<p>Interesting! Sure, I'll have a look. I assume at the moment, it only does the <code>foo =&gt; bar</code> translation?</p>

#### [ Mario Carneiro (Oct 11 2018 at 17:07)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135614773):
<p>yes</p>

#### [ Simon Hudon (Oct 11 2018 at 17:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135614844):
<p>Cool, I'll look into it.</p>

#### [ Simon Hudon (Oct 11 2018 at 17:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135615706):
<p>Do you have an example that's giving you trouble now?</p>

#### [ Mario Carneiro (Oct 11 2018 at 17:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135618269):
<p>Well, any definition or theorem that contains (usually autogenerated) sub-definitions. In Patrick's example, it is because it is an instance with a data type and some proofs; in this case the proofs are automatically turned into sub-lemmas. The same sort of thing happens if you use <code>match</code> or <code>\lam &lt;a, b&gt;, ...</code> in a proof, or use the equation compiler</p>

#### [ Simon Hudon (Oct 11 2018 at 18:03)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135618508):
<p>Sorry I missed Patrick's initial comment</p>


{% endraw %}
