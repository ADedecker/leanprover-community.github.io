---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/21549toadditive.html
---

## Stream: [general](index.html)
### Topic: [to_additive](21549toadditive.html)

---


{% raw %}
#### [ Patrick Massot (Oct 10 2018 at 16:40)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135545903):
Is there any hope `to_additive` could be improved to avoid things like https://github.com/leanprover/mathlib/blob/2594f48f20392f84b0743eb0867c030913eca627/group_theory/quotient_group.lean#L40-L47?

#### [ Mario Carneiro (Oct 11 2018 at 16:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135612824):
@**Simon Hudon** Would you like to take a look at this? I am thinking that the `to_additive` attribute should recursively copy any suffixed versions of the input mapping that happen to be in the term being traversed. For example if you are translating `foo => bar` and you run across `foo._match_1`, and this does not already have a translation, then it should translate `foo._match_1 => bar._match_1` and then try again

#### [ Simon Hudon (Oct 11 2018 at 17:06)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135614750):
Interesting! Sure, I'll have a look. I assume at the moment, it only does the `foo => bar` translation?

#### [ Mario Carneiro (Oct 11 2018 at 17:07)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135614773):
yes

#### [ Simon Hudon (Oct 11 2018 at 17:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135614844):
Cool, I'll look into it.

#### [ Simon Hudon (Oct 11 2018 at 17:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135615706):
Do you have an example that's giving you trouble now?

#### [ Mario Carneiro (Oct 11 2018 at 17:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135618269):
Well, any definition or theorem that contains (usually autogenerated) sub-definitions. In Patrick's example, it is because it is an instance with a data type and some proofs; in this case the proofs are automatically turned into sub-lemmas. The same sort of thing happens if you use `match` or `\lam <a, b>, ...` in a proof, or use the equation compiler

#### [ Simon Hudon (Oct 11 2018 at 18:03)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/to_additive/near/135618508):
Sorry I missed Patrick's initial comment


{% endraw %}
