---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/113488general/37206Lean342.html
---

## Stream: [general](index.html)
### Topic: [Lean 3.4.2](37206Lean342.html)

---


{% raw %}
#### [ Sebastian Ullrich (Jan 06 2019 at 22:05)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531080):
<p>I kind of forgot about it, and so did everyone else, I guess. Still, how about a Lean patch release in time for Lean Together? It looks like most discussions are back to complaining about general issues instead of specific bugs.</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:07)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531144):
<p>is this adding anything new or is it just the fixes that are already on master?</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:07)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531151):
<p>Just that</p>

#### [ Patrick Massot (Jan 06 2019 at 22:07)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531152):
<p>It looks like at least PR <a href="https://github.com/leanprover/lean/issues/1982" target="_blank" title="https://github.com/leanprover/lean/issues/1982">lean#1982</a> and <a href="https://github.com/leanprover/lean/issues/1983" target="_blank" title="https://github.com/leanprover/lean/issues/1983">lean#1983</a> wouldn't be hard to merge though</p>

#### [ Patrick Massot (Jan 06 2019 at 22:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531160):
<p>(deleted)</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531204):
<p>use <a href="https://github.com/leanprover/lean/issues/1982" target="_blank" title="https://github.com/leanprover/lean/issues/1982">lean#1982</a></p>

#### [ Mario Carneiro (Jan 06 2019 at 22:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531274):
<p>I'm not sure <a href="https://github.com/leanprover/lean/issues/1983" target="_blank" title="https://github.com/leanprover/lean/issues/1983">lean#1983</a> is correct</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:10)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531277):
<p>Yeah, that's at most fixing a symptom</p>

#### [ Patrick Massot (Jan 06 2019 at 22:11)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531286):
<p>Oh sorry, I read only the headline, and it seemed innocuous</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:11)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531294):
<p>And 1982 is a triviality, I'm not opening that can of worms</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531344):
<p>I guess this isn't an offer for actual maintenance of the core lib...</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:14)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531402):
<p>the doc PR seems innocuous enough</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:14)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531406):
<p><a href="https://github.com/leanprover/lean/issues/1960" target="_blank" title="https://github.com/leanprover/lean/issues/1960">lean#1960</a></p>

#### [ Mario Carneiro (Jan 06 2019 at 22:16)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531473):
<p>can we get coinductive_predicates removed from lean core?</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:16)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531477):
<p>that should really be in mathlib instead</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:18)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531541):
<p>Right, <span class="user-mention" data-user-id="110026">@Simon Hudon</span> mentioned that. I mean, I can wait.</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531556):
<p>just saying, if you are prepping a release then now's a good time</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531624):
<p>Yes, if someone wants to do it, I'll wait</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531626):
<p>You want me to make a PR?</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531683):
<p>Ah, it's even more trivial than I thought, yes?</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531689):
<p>it should be just a clean remove, it's not used</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:23)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531701):
<p><code>transfer</code> is used, so that would be more work, but <code>coinductive</code> is not</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:24)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531756):
<p>it might be in some tests</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:25)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531766):
<p>I see <code>coinductive</code> is still registered as a built-in token, oops</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:25)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531767):
<p><code>coinductive</code> is a token in C++, but I think that was there even before the <code>coinductive_predicates</code> file</p>

#### [ Mario Carneiro (Jan 06 2019 at 22:25)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154531771):
<p>it shouldn't be any harm to have it as an undefined token</p>

#### [ Simon Hudon (Jan 06 2019 at 22:32)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154532023):
<p>I second the suggestion :)</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154532283):
<p>done. I've removed the token as well.</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:41)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154532291):
<p>Do I want to know what the hell is going on with the MacOS builds...?</p>

#### [ Simon Hudon (Jan 06 2019 at 22:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154532332):
<p>I think we should keep the token though. We'll make use of it in mathlib</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154532340):
<p>Then you can introduce it there</p>

#### [ Simon Hudon (Jan 06 2019 at 22:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154532358):
<p>I withdraw my objection then</p>

#### [ Simon Hudon (Jan 06 2019 at 22:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154532361):
<p>Thanks!</p>

#### [ Simon Hudon (Jan 06 2019 at 22:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154532405):
<p>What's up with the MacOS build?</p>

#### [ Sebastian Ullrich (Jan 06 2019 at 22:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154532485):
<p>I don't know</p>

#### [ Simon Hudon (Jan 06 2019 at 22:48)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154532536):
<p>Mystery!</p>

#### [ Bryan Gin-ge Chen (Jan 09 2019 at 17:50)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154738515):
<p>Will a macOS binary be provided at some point or is something broken?</p>

#### [ Sebastian Ullrich (Jan 09 2019 at 18:05)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154739682):
<p>Something is broken</p>

#### [ Kevin Buzzard (Jan 09 2019 at 23:24)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154762716):
<p>Is it possible to stop mathlib recompiling a bunch of times on Windows?</p>

#### [ Kevin Buzzard (Jan 09 2019 at 23:24)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154762744):
<p>Mathlib is horrible to compile and this issue is holding Chris and Kenny back. All the machines at Xena are Windows machines too.</p>

#### [ Kevin Buzzard (Jan 09 2019 at 23:26)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154762838):
<p>The issue Mario had in live coding</p>

#### [ Gabriel Ebner (Jan 10 2019 at 09:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154823371):
<p>Does anybody have a windows machine <em>which can compile Lean</em> to test out a hacky workaround?</p>

#### [ Jeremy Avigad (Jan 10 2019 at 09:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154823628):
<p>You are welcome to use mine. But I'll be angry if you melt the keyboard.</p>

#### [ Rob Lewis (Jan 10 2019 at 09:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154823693):
<p>You could also use mine.</p>

#### [ Gabriel Ebner (Jan 10 2019 at 09:23)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154823801):
<p>Thanks, I'll get to you during coffee/lunch.</p>

#### [ Bryan Gin-ge Chen (Jan 10 2019 at 18:05)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154854545):
<p>From comparing the macOS build logs <a href="https://travis-ci.org/leanprover/lean/jobs/477775262#L1091" target="_blank" title="https://travis-ci.org/leanprover/lean/jobs/477775262#L1091">here (failing)</a> and <a href="https://travis-ci.org/leanprover/lean/jobs/467292242#L1890" target="_blank" title="https://travis-ci.org/leanprover/lean/jobs/467292242#L1890">here (working)</a>, it seems that the issue is that rvm <a href="https://github.com/rvm/rvm/issues/4520" target="_blank" title="https://github.com/rvm/rvm/issues/4520">added a new maintainer</a> so that the old GPG key doesn't work anymore.</p>
<p>PR here: <a href="https://github.com/leanprover/lean/pull/1987" target="_blank" title="https://github.com/leanprover/lean/pull/1987">https://github.com/leanprover/lean/pull/1987</a></p>

#### [ Johan Commelin (Jan 11 2019 at 12:46)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154911792):
<p>Can we turn the <code>[ ... ]</code> notation for list into a type class <code>has_bracket</code>?</p>

#### [ Johan Commelin (Jan 11 2019 at 12:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154911817):
<p>Lie algebras have a binary operation denoted <code>[x,y]</code> and it is very common to write <code>[n]</code> for <code>fin (n+1)</code>.</p>

#### [ Johan Commelin (Jan 11 2019 at 12:48)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154911878):
<p>But maybe this wont actually solve the conflict with list notation... I dunno</p>

#### [ Sebastian Ullrich (Jan 11 2019 at 13:23)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154913468):
<p>At some point, <code>::</code> was overloaded to also mean <code>vector.cons</code>. Everybody who just wanted to use lists hated the ambiguity issues and so it was removed. I don't think overloading <code>[...]</code> (or making it a class) would fare any better.</p>

#### [ Kenny Lau (Jan 11 2019 at 13:26)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154913559):
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> I have changed the Lie bracket notation to use <code>\([</code></p>

#### [ Johan Commelin (Jan 11 2019 at 13:26)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154913605):
<p>So now there are 29 people who "just want to use lists" and 29 people who don't care about lists at all, and want to use <code>[...]</code> for other things. (Ooh, and there is 1 logician.)</p>

#### [ Johan Commelin (Jan 11 2019 at 13:26)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154913610):
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> I saw it. And it doesn't look anything like a Lie bracket.</p>

#### [ Chris Hughes (Jan 11 2019 at 13:26)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154913611):
<p>mathematicians care about lists.</p>

#### [ Kenny Lau (Jan 11 2019 at 13:27)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154913624):
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> it looks very like a Lie bracket</p>

#### [ Kevin Buzzard (Jan 11 2019 at 13:27)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154913632):
<p>Not enough to take something as important as <code>[</code></p>

#### [ Kevin Buzzard (Jan 11 2019 at 13:27)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154913642):
<p>and to render it unusable for all the things we use it for</p>

#### [ Reid Barton (Jan 11 2019 at 15:16)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154919498):
<p>The <code>[]</code> list notation is used a lot in tactics in the core library, so it would be inconvenient to remove</p>

#### [ Reid Barton (Jan 11 2019 at 15:16)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154919524):
<p>In Lean 4 it could be scoped somehow I guess</p>

#### [ Sebastian Ullrich (Jan 11 2019 at 15:21)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/154919933):
<p>Exactly, you can open just the notation you need in a file or even section</p>

#### [ Sebastian Ullrich (Jan 18 2019 at 16:07)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156374339):
<p>Lean 3.4.2 has been released</p>

#### [ Bryan Gin-ge Chen (Jan 18 2019 at 16:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156374851):
<p>I'm still waiting on the macos binary to appear and I happened to notice this broken build: <a href="https://travis-ci.org/leanprover/lean/jobs/481381766" target="_blank" title="https://travis-ci.org/leanprover/lean/jobs/481381766">https://travis-ci.org/leanprover/lean/jobs/481381766</a> does something need to be done for the smt2_interface ?</p>

#### [ Sebastian Ullrich (Jan 18 2019 at 16:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156375127):
<p>Yes, I need to create <code>lean-3.4.2</code> branches in those repos</p>

#### [ Kevin Buzzard (Jan 18 2019 at 16:17)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156375134):
<p>Thanks so much for this Sebastian. As you have seen last week, there are more and more people working with Lean 3, both in mathematics and computer science, and even though we have clearly heard Leo's message that Lean 4 makes no guarantees of compatibility with Lean 3, I am sure that the growing user base and code base will ultimately teach you developers something about how Lean is used in the wild and in particular where it performs well and where it performs less well. You are an invaluable bridge between us and Leo at this time.</p>

#### [ Floris van Doorn (Jan 18 2019 at 16:44)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156377271):
<p>How do I update <code>lean</code> using <code>elan</code> and set it to use <code>3.4.2</code> by default?</p>
<div class="codehilite"><pre><span></span>Floris@MSI MINGW64 /d/projects
$ elan update
info: syncing channel updates for &#39;stable&#39;
info: latest update on stable, lean version v3.4.2
info: downloading component &#39;lean&#39;
info: installing component &#39;lean&#39;
info: checking for self-updates
info: downloading self-update

  stable updated - Lean (version 3.4.2, commit cbd2b6686ddb, Release)

Floris@MSI MINGW64 /d/projects/mathlib
$ elan which lean
C:\Users\Floris\.elan\toolchains\3.4.1\bin\lean.exe

Floris@MSI MINGW64 /d/projects/mathlib
$ elan default 3.4.2
info: downloading component &#39;lean&#39;
info: installing component &#39;lean&#39;
info: default toolchain set to &#39;3.4.2&#39;

  3.4.2 installed - Lean (version 3.4.2, commit cbd2b6686ddb, Release)

Floris@MSI MINGW64 /d/projects/mathlib
$ elan which lean
C:\Users\Floris\.elan\toolchains\3.4.1\bin\lean.exe
</pre></div>

#### [ Bryan Gin-ge Chen (Jan 18 2019 at 16:45)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156377380):
<p><code>leanpkg.toml</code> in <code>mathlib</code> is still specifying 3.4.1 so it will override the system default. The current master of mathlib also isn't compatible with 3.4.2 yet.</p>

#### [ Patrick Massot (Jan 18 2019 at 16:46)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156377450):
<p>But we now have two open PR switching to Lean 3.4.2</p>

#### [ Johan Commelin (Jan 18 2019 at 16:47)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156377538):
<p>If I understand <code>elan</code> correctly, the upgrade should be transparent, once <code>mathlib</code> has merged (one of) those PRs.</p>

#### [ Floris van Doorn (Jan 18 2019 at 16:49)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156377707):
<p>Oh, that makes sense. So if the <code>leanpkg.toml</code> file states it uses version <code>3.4.2</code>, then that version of Lean would also be automatically downloaded when running <code>leanpkg build</code>? That's neat!</p>

#### [ Kenny Lau (Jan 20 2019 at 21:59)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156497448):
<p>so why aren't we upgrading to 3.4.2?</p>

#### [ Mario Carneiro (Jan 21 2019 at 02:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156507032):
<p>still some build issue in the PR</p>

#### [ Mario Carneiro (Jan 21 2019 at 02:37)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156507222):
<p>To all who are anxious to see this merged: Please make sure the PR <em>actually builds</em> before asking me to hurry up on merging it. I have other obligations with school right now, so I don't have a lot of time to devote to troubleshooting here</p>

#### [ Bryan Gin-ge Chen (Jan 21 2019 at 02:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156507837):
<p>Sorry, I'd thought that the problem was a Travis cache issue. I'm taking a look at it now.</p>

#### [ Bryan Gin-ge Chen (Jan 21 2019 at 03:06)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156508099):
<p>OK, I think the issue is that there's a <code>constant foo</code> in <code>tests/finish1.lean</code> and this conflicts with the <code>coinductive foo</code> in <code>tests/coinductive.lean</code>. I've renamed the latter <code>foo</code> to <code>coind_foo</code> and it works now. Pushing...</p>

#### [ Bryan Gin-ge Chen (Jan 21 2019 at 03:35)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156509001):
<p>Green now! <span class="emoji emoji-1f389" title="tada">:tada:</span></p>

#### [ Mario Carneiro (Jan 21 2019 at 04:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156511438):
<p>merged now</p>

#### [ Mario Carneiro (Jan 21 2019 at 04:51)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156511449):
<p>the <code>foo</code> thing is a bit weird. <span class="user-mention" data-user-id="110043">@Gabriel Ebner</span> You might know what's happening here - are all the tests executing in the same environment?</p>

#### [ Gabriel Ebner (Jan 21 2019 at 11:01)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156525675):
<p>No, the tests are not run in the same environment.  But we then we export all files <a href="https://github.com/leanprover/mathlib/blob/c1e594bc3dfb6c9357e94196cc3ae5d435bb07f1/.travis.yml#L40" target="_blank" title="https://github.com/leanprover/mathlib/blob/c1e594bc3dfb6c9357e94196cc3ae5d435bb07f1/.travis.yml#L40">into the plain-text format for leanchecker</a>.  This ensures that there are no clashes in the top-level declaration names, and that you can actually import all of mathlib together.<br>
That said, now everything is in <code>src/</code>, we could easily exclude the tests here: just change that line to <code>lean --recursive --export=mathlib.txt src/</code></p>

#### [ Johannes Hölzl (Jan 21 2019 at 11:14)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156526303):
<p>done</p>

#### [ Patrick Massot (Jan 21 2019 at 12:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156529907):
<p>Oh, that explains why we couldn't reproduce this failure locally. I'm not doing this leanchecker thing</p>

#### [ Kevin Buzzard (Jan 22 2019 at 18:00)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156620335):
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> The 3.4.1 branch woes of mathlib should now be over, right? All you need to do is to point the branch at a random recent commit which worked with 3.4.1 and then never think about it again -- future mathlib commits are not guaranteed to work with 3.4.1 from now on.</p>

#### [ Kevin Buzzard (Jan 22 2019 at 18:01)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156620383):
<p>e.g. fa2e3991e1199afa8029c5417c2f719b3a326a77 I guess</p>

#### [ Kevin Buzzard (Jan 22 2019 at 18:01)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156620389):
<p>(not that I checked...)</p>

#### [ Bryan Gin-ge Chen (Jan 22 2019 at 18:11)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156621110):
<p>The commit right before the 3.4.2 PR is this one <a href="https://github.com/leanprover/mathlib/commit/2c5bc214d1391659611591f4c6af222f2bea8e05" target="_blank" title="https://github.com/leanprover/mathlib/commit/2c5bc214d1391659611591f4c6af222f2bea8e05">https://github.com/leanprover/mathlib/commit/2c5bc214d1391659611591f4c6af222f2bea8e05</a></p>

#### [ Patrick Massot (Jan 22 2019 at 18:22)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156621993):
<blockquote>
<p>future mathlib commits are not guaranteed to work with 3.4.1 from now on.</p>
</blockquote>
<p>For future reference, note that a stronger statement is true. mathlib is now guaranteed not to work with Lean 3.4.1. The reason is that some stuff moved from core library to mathlib. Hence trying to compile mathlib with Lean 3.4.1 will result in errors complaining some stuff is already defined.</p>

#### [ Simon Hudon (Jan 22 2019 at 18:29)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156622422):
<p>Should we have a lean-3.4.1 tag for mathlib for those determined not to upgrade to Lean 3.4.2?</p>

#### [ Patrick Massot (Jan 22 2019 at 18:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156622511):
<p>There is already a branch doing that</p>

#### [ Patrick Massot (Jan 22 2019 at 18:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156622523):
<p>But I guess we could have a release tag as well</p>

#### [ Kevin Buzzard (Jan 22 2019 at 18:36)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156622951):
<p>Aah! Is this <code>logic.relator</code> or something? I just had this because I download elan finally but still had 3.4.1 hard coded in VS code.</p>

#### [ Edward Ayers (Jan 24 2019 at 12:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156766066):
<p>Hi I've just upgraded my system to Lean 3.4.2 and I'm confused about what I need to do to get mathlib working. I'm probably missing something obvs. <br>
At the moment the <code>logic/relator.lean</code> file is broken in mathlib because it can't find <code>left_unique</code>. As far as I can tell the <code>init/relator.lean</code> has been removed from Lean 3.4.2<br>
I've got the latest version of master for each.<br>
Lean git commit: <code>cbd2b6686 - (6 days ago) chore(*): release version 3.4.2</code> <br>
Mathlib git commit : <code>4aacae3 - (3 hours ago) feat(data/equiv/algebra): instances for transporting algebra across an equiv (#618)</code></p>

#### [ Edward Ayers (Jan 24 2019 at 12:42)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156766191):
<p>FIXED</p>

#### [ Edward Ayers (Jan 24 2019 at 12:43)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156766240):
<p>my bad</p>

#### [ Kevin Buzzard (Jan 24 2019 at 14:19)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156771259):
<p>I had an analogous question but was too embarrassed to ask it here :-) The answer to my relator woes was "yes lean at the command line is 3.4.2 but you forgot that you told VS Code a direct link to lean 3.4.1"</p>

#### [ Edward Ayers (Jan 24 2019 at 14:28)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156771725):
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">:</span> <span class="s2">&quot;git fetch&quot;</span> <span class="bp">≠</span> <span class="s2">&quot;git pull&quot;</span> <span class="o">:=</span> <span class="n">dec_trivial</span>
</pre></div>

#### [ Johan Commelin (Jan 24 2019 at 14:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156773702):
<p>I think <code>git pull = (git merge) ∘ (git fetch)</code>. It might even be defeq.</p>

#### [ Jean Lo (Jan 24 2019 at 15:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156776595):
<p>how was this issue eventually resolved?</p>
<p>I'm experiencing a similar problem after getting 3.4.2 then attempting to compile mathlib (<code>4aacae3</code>). <code>lean --version</code> reports <code>Lean (version 3.4.2, commit b13ac127fd83, Release)</code>, but attempting <code>leanpkg build</code>in the mathlib directory results in many error noises, beginning with <code>WARNING: Lean version mismatch: installed version is master, but package requires 3.4.2</code>. Most of the errors that follow seem to be related to <code>coinductive_predicates</code> and <code>relator</code>.</p>

#### [ Bryan Gin-ge Chen (Jan 24 2019 at 15:48)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156777247):
<p>The "officially-released" Lean 3.4.2 is at commit <code>cbd2b6686ddb</code>, so you may want to check that.</p>

#### [ Jean Lo (Jan 24 2019 at 16:29)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156780668):
<p>oh, thanks.</p>
<p>I'm building lean following the instructions on this page: <a href="https://github.com/leanprover/lean/blob/master/doc/make/index.md" target="_blank" title="https://github.com/leanprover/lean/blob/master/doc/make/index.md">https://github.com/leanprover/lean/blob/master/doc/make/index.md</a></p>
<p><code>git log</code> tells me in the cloned repo that my <code>HEAD</code> is on the correct commit, but after the build concludes <code>lean -v</code> still says <code>b13ac127fd83</code>. surely i'm missing something?</p>

#### [ Sebastian Ullrich (Jan 24 2019 at 16:31)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156780844):
<p>Are you sure you're calling the right <code>lean</code>?</p>

#### [ Kevin Buzzard (Jan 24 2019 at 16:52)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156782691):
<p>Just some comments in case they help: (1) the <code>relator</code> stuff was moved from core Lean to mathlib, so if you have complaints that it's being defined twice then this is evidence that you're using an old Lean and a new mathlib. (2) Any nightly binary of Lean released since 3.4.1 displays "version 3.4.2, ..." with <code>lean -v</code> and in particular just because it says <code>3.4.2</code> doesn't mean that it's a version of Lean released on or after the 3.4.2 release. If a major bug was found in Lean today and fixed by Leo tomorrow as a nightly then that nightly would I think say it was 3.4.3. Aah! In fact commit b13ac1... is from last August, so that's definitely your problem.</p>

#### [ Jean Lo (Jan 24 2019 at 17:06)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156783871):
<p>yes, and attempting to fix that problem has led me to recompile lean from the correct-version source, but now I'm confused about why that hasn't changed the output of <code>lean -v</code>. how might i check whether i'm 'calling the right <code>lean</code>?'</p>

#### [ Bryan Gin-ge Chen (Jan 24 2019 at 17:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156784032):
<p>try running <code>which lean</code> and seeing if the output matches the path to the lean that you built</p>

#### [ Kevin Buzzard (Jan 24 2019 at 17:08)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156784072):
<p>Jean is using emacs so there is also the issue of which Lean emacs is using. I don't know how to figure that out.</p>

#### [ Kevin Buzzard (Jan 24 2019 at 17:09)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156784096):
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> will though.</p>

#### [ Jean Lo (Jan 24 2019 at 17:12)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156784372):
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span>  oh lore, of course! I thought <code>make</code> would have tossed the binaries into <code>/usr/bin</code> for me D:</p>

#### [ Reid Barton (Jan 24 2019 at 17:13)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156784460):
<p>I guess <code>C-h v lean-rootdir</code> and <code>C-h v lean-executable-name</code> will tell you what lean emacs is invoking</p>

#### [ Reid Barton (Jan 24 2019 at 17:15)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156784578):
<p>I use elan which automatically picks the version of lean specified by the project, so I don't have to configure anything in emacs</p>

#### [ Jean Lo (Jan 24 2019 at 17:15)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156784614):
<p><span class="user-mention" data-user-id="123965">@Bryan Gin-ge Chen</span>  huh, I thought I could fix that by moving the contents of <code>bin</code> in the lean folder into <code>/usr/bin</code> by hand, but I don't know what <code>lean-gdb.py</code> and <code>leanpkg.bat</code> are and hesitate to try anything silly. What would be the correct way to proceed?</p>

#### [ Reid Barton (Jan 24 2019 at 17:16)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156784729):
<p>I don't have a built Lean source tree on hand but if you want to install into <code>/usr/bin</code> then probably <code>make install</code> will do that</p>

#### [ Jean Lo (Jan 24 2019 at 17:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156784989):
<p>I think that's done it. (except i'm a goof and now i have one copy of lean in <code>/usr/bin</code> and another in <code>/usr/local/bin</code> D: )</p>
<p>I'll go &amp; see if everything works now. thanks so much for the help</p>

#### [ Bryan Gin-ge Chen (Jan 24 2019 at 17:23)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156785151):
<p>Glad everything is working. I would recommend using elan in the long term, but it might be a pain to go and delete all the random copies of lean and fix paths etc. to get it working properly.</p>

#### [ Sebastian Ullrich (Jan 24 2019 at 17:25)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156785294):
<div class="codehilite"><pre><span></span><span class="k">while</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="k">$(</span>which lean<span class="k">)</span><span class="s2">&quot;</span> -ne ~/.elan/bin/lean <span class="o">]</span><span class="p">;</span> <span class="k">do</span> sudo rm -f <span class="s2">&quot;</span><span class="k">$(</span>which lean<span class="k">)</span><span class="s2">&quot;</span><span class="p">;</span> <span class="k">done</span>  <span class="c1"># please don&#39;t sue me</span>
</pre></div>

#### [ Kevin Buzzard (Jan 24 2019 at 17:27)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156785419):
<p>I thought elan had all sorts of versions of Lean lying around, so it could use my 3.4.1 and 3.4.2 repos all at the same time?</p>

#### [ Sebastian Ullrich (Jan 24 2019 at 17:30)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156785624):
<p>It does, but those are not in your PATH variable. elan actually refuses to install if you have an existing <code>lean</code> in your PATH to avoid this situation.</p>

#### [ Scott Morrison (Jan 24 2019 at 22:20)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/156807313):
<p><span class="user-mention" data-user-id="132889">@Jean Lo</span>, if tail end of this conversation didn't make sense: it's advised that you don't download, compile, and manage individual versions of Lean yourself anymore. Instead, you install <a href="https://github.com/leanprover/mathlib/blob/master/docs/elan.md" target="_blank" title="https://github.com/leanprover/mathlib/blob/master/docs/elan.md">elan</a> and have it do all the work for you.</p>

#### [ Kenny Lau (Jan 29 2019 at 21:57)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/157137310):
<p>hmm... there are still occasional unnecessary recompiling on my windows surface pro vscode</p>

#### [ Kenny Lau (Jan 29 2019 at 21:58)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/157137399):
<p>it is faster to close and open vscode again...</p>

#### [ Joseph Corneli (Jan 30 2019 at 13:24)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/157183097):
<p>I'm also finding it quite slow under Emacs on Mac OS, and a bit flaky (e.g., it won't finish compiling a file). It seems faster and more stable on my Linux laptop, however.</p>

#### [ Kevin Buzzard (Jan 30 2019 at 13:39)](https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/Lean%203.4.2/near/157183865):
<p>I've seen no difference -- it used to work great, it still works great -- with VS Code and Ubuntu. I have seen some problems recently with random red areas appearing in VS Code corresponding to errors which have been fixed -- but I suspect this is a VS Code phenomenon rather than a Lean one.</p>


{% endraw %}
