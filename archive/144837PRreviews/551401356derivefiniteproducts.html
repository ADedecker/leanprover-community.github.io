---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/144837PRreviews/551401356derivefiniteproducts.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/144837PRreviews/index.html">PR reviews</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html">#1356 derive finite_products</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="174565393"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174565393" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174565393">Simon Hudon (Aug 30 2019 at 17:28)</a>:</h4>
<p><span class="user-mention" data-user-id="110032">@Reid Barton</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="110087">@Scott Morrison</span> I'd love some feedback on this PR</p>

<a name="174568273"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568273" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568273">Simon Hudon (Aug 30 2019 at 18:01)</a>:</h4>
<p>Yeah, me too. I debated it with <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> . It kind of sounds like something from computability theory. We just need a name that says a bit more than that a type is finite. <code>has_equiv_to_fin</code> is not exactly catchy. I feel like there are a lot of bad options here.</p>

<a name="174568368"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568368" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568368">Johan Commelin (Aug 30 2019 at 18:02)</a>:</h4>
<p>Hmm... so does <a href="https://github.com/leanprover-community/mathlib/issues/1356" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1356">#1356</a> (finite products) depend on <a href="https://github.com/leanprover-community/mathlib/issues/1368" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1368">#1368</a> (enum)?</p>

<a name="174568400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568400">Johan Commelin (Aug 30 2019 at 18:02)</a>:</h4>
<p>If so, it would be good to point that out on the PR page (and preferably in the title).</p>

<a name="174568437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568437">Johan Commelin (Aug 30 2019 at 18:03)</a>:</h4>
<p><code>finumerable</code>?</p>

<a name="174568443"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568443" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568443">Johan Commelin (Aug 30 2019 at 18:03)</a>:</h4>
<p>kidding</p>

<a name="174568602"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568602" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568602">Simon Hudon (Aug 30 2019 at 18:05)</a>:</h4>
<p>Good point. Done :)</p>

<a name="174568608"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568608" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568608">Johan Commelin (Aug 30 2019 at 18:05)</a>:</h4>
<p>So <code>fintype</code> is a property, and <code>enumerable</code> has data. I see. I'm now reading <a href="https://github.com/leanprover-community/mathlib/issues/1368" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1368">#1368</a>...</p>

<a name="174568617"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568617" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568617">Simon Hudon (Aug 30 2019 at 18:05)</a>:</h4>
<p><code>finumerable</code></p>

<a name="174568637"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568637" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568637">Simon Hudon (Aug 30 2019 at 18:05)</a>:</h4>
<p>Well, <code>fintype</code> also has data</p>

<a name="174568723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568723">Johan Commelin (Aug 30 2019 at 18:06)</a>:</h4>
<p>Huh, does it?</p>

<a name="174568742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568742">Johan Commelin (Aug 30 2019 at 18:06)</a>:</h4>
<p>Oh, you're right</p>

<a name="174568760"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568760" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568760">Johan Commelin (Aug 30 2019 at 18:06)</a>:</h4>
<p>So should I just stop using <code>fintype</code> alltogether?</p>

<a name="174568849"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568849" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568849">Mario Carneiro (Aug 30 2019 at 18:08)</a>:</h4>
<p>I would characterize it more as <code>fintype_with_order</code></p>

<a name="174568936"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174568936" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174568936">Johan Commelin (Aug 30 2019 at 18:08)</a>:</h4>
<p>Thanks, that makes sense.</p>

<a name="174569092"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174569092" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174569092">Reid Barton (Aug 30 2019 at 18:10)</a>:</h4>
<p>I probably won't have time to look at PRs until Tuesday, but for a mathematician "finite products" means products indexed by a finite type and not products indexed by a finite-type-with-order, and I think it's pretty important.</p>

<a name="174569164"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174569164" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174569164">Reid Barton (Aug 30 2019 at 18:11)</a>:</h4>
<p>Using <code>choice</code> to choose an order to reduce finite products to binary ones should be fine, as that order should not be visible in the API anyways</p>

<a name="174569836"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174569836" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174569836">Simon Hudon (Aug 30 2019 at 18:19)</a>:</h4>
<p>It was pointed out to me that taking different permutations of the same type might not produce limits that are equal, rather, it would produce limits that are equivalent. I wonder if that wouldn't justify making the order more explicit rather than less explicit</p>

<a name="174569928"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174569928" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174569928">Simon Hudon (Aug 30 2019 at 18:20)</a>:</h4>
<p>I mean "... limits that are isomorphic"</p>

<a name="174570363"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174570363" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174570363">Johan Commelin (Aug 30 2019 at 18:25)</a>:</h4>
<p>Hmm... I'm not so sure.</p>

<a name="174570436"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174570436" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174570436">Johan Commelin (Aug 30 2019 at 18:26)</a>:</h4>
<p>If you want a different permutation, you should change the diagram (i.e. functor) not the enumeration of the type.</p>

<a name="174571041"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174571041" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174571041">Simon Hudon (Aug 30 2019 at 18:33)</a>:</h4>
<p>That makes sense. Alright! I'll go back to making things non-constructive.</p>

<a name="174571207"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174571207" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174571207">Johan Commelin (Aug 30 2019 at 18:35)</a>:</h4>
<p>I still think <code>enumerable</code> is a nice type. But maybe not so much for this application )-;</p>

<a name="174571745"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174571745" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174571745">Simon Hudon (Aug 30 2019 at 18:41)</a>:</h4>
<p>This actually makes me doubt the usefulness of <code>enumerable</code>. <code>fintype</code> has this function:</p>
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">equiv_fin</span> <span class="o">(</span><span class="n">α</span><span class="o">)</span> <span class="o">[</span><span class="n">fintype</span> <span class="n">α</span><span class="o">]</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="n">trunc</span> <span class="o">(</span><span class="n">α</span> <span class="err">≃</span> <span class="n">fin</span> <span class="o">(</span><span class="n">card</span> <span class="n">α</span><span class="o">))</span> <span class="o">:=</span> <span class="bp">...</span>
</pre></div>


<p>which means that you can use a bijection as long as you can prove that any bijection will do. The reason I couldn't use it for finite products is that the result are the same only up to isomorphism, not equality. I'm wondering if it's a signal that destroying the symmetry between the elements of an empty type is not such a good idea.</p>

<a name="174571927"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174571927" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174571927">Johan Commelin (Aug 30 2019 at 18:43)</a>:</h4>
<p>Huh, which empty type are you talking about?</p>

<a name="174572005"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174572005" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174572005">Simon Hudon (Aug 30 2019 at 18:44)</a>:</h4>
<p>"finite type" is what I meant</p>

<a name="174572027"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174572027" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174572027">Johan Commelin (Aug 30 2019 at 18:44)</a>:</h4>
<p>Aha...</p>

<a name="174572089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174572089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174572089">Johan Commelin (Aug 30 2019 at 18:45)</a>:</h4>
<p>Maybe <code>def enum [fintype X] [linear_order X] : fin (card X) → X</code>is sufficient for all purposes?</p>

<a name="174572181"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174572181" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174572181">Johan Commelin (Aug 30 2019 at 18:46)</a>:</h4>
<p>Especially if you also have decidable equality... than you might even be able to make that definition constructive(?)</p>

<a name="174572215"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231356%20derive%20finite_products/near/174572215" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/551401356derivefiniteproducts.html#174572215">Simon Hudon (Aug 30 2019 at 18:46)</a>:</h4>
<p>You would need a decidable linear order. Then the problem is the same as sorting</p>


{% endraw %}

{% include archive_update.html %}