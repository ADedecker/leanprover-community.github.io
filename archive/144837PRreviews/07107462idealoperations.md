---
layout: page
title: Lean Prover Zulip Chat Archive 
permalink: archive/144837PRreviews/07107462idealoperations.html
---

## Stream: [PR reviews](index.html)
### Topic: [#462 ideal operations](07107462idealoperations.html)

---


{% raw %}
#### [ Kenny Lau (Nov 07 2018 at 13:29)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146936148):
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span class="user-mention" data-user-id="110049">@Mario Carneiro</span> <code>pow</code> comes for free after I've proved semiring! :D</p>

#### [ Kenny Lau (Nov 07 2018 at 13:30)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146936223):
<p>and about <code>map</code>: I don't really see how useful it would be <span class="user-mention" data-user-id="112680">@Johan Commelin</span></p>

#### [ Kenny Lau (Nov 07 2018 at 13:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146936726):
<p><span class="user-mention" data-user-id="110049">@Mario Carneiro</span> why don't we prove that <code>submodule.map</code> and <code>submodule.comap</code> form a galois connection?</p>

#### [ Mario Carneiro (Nov 07 2018 at 13:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146936749):
<p>sure, it's one line</p>

#### [ Kenny Lau (Nov 07 2018 at 13:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146936755):
<p>I mean, why didn't we?</p>

#### [ Kenny Lau (Nov 07 2018 at 13:41)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146936763):
<p>you could derive some other theorems from this galois connection, right?</p>

#### [ Johan Commelin (Nov 07 2018 at 13:52)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146937375):
<p><span class="user-mention" data-user-id="110064">@Kenny Lau</span> I think <code>map</code> will be very useful. If <code>I : ideal R</code> and <code>f : R → S</code> you see mathematicians writing <code>I.S</code> all the time for the ideal generated by <code>I</code> in <code>S</code>.</p>

#### [ Kevin Buzzard (Nov 07 2018 at 13:53)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146937400):
<p><code>comap</code> is used to show that <code>Spec</code> is a functor.</p>

#### [ Johan Commelin (Nov 07 2018 at 13:53)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146937405):
<p>And implicitly we are using all the time that it behaves well in certain ways. Which are exactly the little lemmas in the beginning of A–MD.</p>

#### [ Kenny Lau (Nov 07 2018 at 14:40)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146940064):
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> <span class="user-mention" data-user-id="112680">@Johan Commelin</span> added <code>map</code>. this might be the only time I use <code>ge</code> instead of <code>le</code>.</p>

#### [ Kenny Lau (Nov 07 2018 at 14:46)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146940426):
<p>my laptop now has 27% battery</p>

#### [ Patrick Massot (Nov 07 2018 at 14:47)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146940454):
<p>why did you use <code>ge</code>?</p>

#### [ Kenny Lau (Nov 07 2018 at 14:55)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146940909):
<p>because the right hand side was simpler</p>

#### [ Kenny Lau (Nov 07 2018 at 15:19)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146942312):
<p>I guess I’ll switch it back</p>

#### [ Kenny Lau (Nov 07 2018 at 15:19)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146942314):
<p>I guess I’ll switch it back</p>

#### [ Kenny Lau (Nov 07 2018 at 16:15)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146964872):
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> do you have any other requests?</p>

#### [ Kenny Lau (Nov 07 2018 at 16:16)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146964942):
<p>i have 2 hours of train</p>

#### [ Kevin Buzzard (Nov 07 2018 at 16:16)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146964974):
<p>Nullstellensatz?</p>

#### [ Kevin Buzzard (Nov 07 2018 at 16:17)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146964983):
<p>Not that I ever use it</p>

#### [ Kevin Buzzard (Nov 07 2018 at 16:17)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965009):
<p>Completion of a ring WRT an ideal</p>

#### [ Patrick Massot (Nov 07 2018 at 16:17)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965014):
<p>Integral elements!</p>

#### [ Kevin Buzzard (Nov 07 2018 at 16:17)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965017):
<p>oh wait Patrick might have done that</p>

#### [ Kevin Buzzard (Nov 07 2018 at 16:17)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965034):
<p>Integral elements , as Patrick says</p>

#### [ Johan Commelin (Nov 07 2018 at 16:18)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965101):
<p>Right, I think integral closure would be a reasonable next step.</p>

#### [ Kenny Lau (Nov 07 2018 at 16:21)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965271):
<p>I mean, regarding this PR</p>

#### [ Kenny Lau (Nov 07 2018 at 16:21)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965276):
<p>also, how should I call (M:N)?</p>

#### [ Johan Commelin (Nov 07 2018 at 16:21)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965296):
<p>What is it?</p>

#### [ Kenny Lau (Nov 07 2018 at 16:21)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965303):
<p>x such that xN &lt;= M</p>

#### [ Johan Commelin (Nov 07 2018 at 16:22)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965365):
<p>Ok, so it is not some sort of index of a submodule.</p>

#### [ Kenny Lau (Nov 07 2018 at 16:22)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965377):
<p>that would be []</p>

#### [ Johan Commelin (Nov 07 2018 at 16:22)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965384):
<p>Aah, of course.</p>

#### [ Patrick Massot (Nov 07 2018 at 16:23)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965443):
<p>Ok, Kenny. We need to be able to write the I^n\cdots D that is at the very bottom of Page 73  of <a href="https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf" target="_blank" title="https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf">https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf</a></p>

#### [ Johan Commelin (Nov 07 2018 at 16:24)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965491):
<p>So, this looks like the fractional quotient, but it isn't exactly that, right?</p>

#### [ Johan Commelin (Nov 07 2018 at 16:24)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965543):
<blockquote>
<p>Ok, Kenny. We need to be able to write the I^n\cdots D that is at the very bottom of Page 73  of <a href="https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf" target="_blank" title="https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf">https://www2.math.uni-paderborn.de/fileadmin/Mathematik/People/wedhorn/Lehre/AdicSpaces.pdf</a></p>
</blockquote>
<p>Hmmm, there quite a lot of abuse of notation going on there...</p>

#### [ Patrick Massot (Nov 07 2018 at 16:25)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965564):
<p>Yes, we want abuse of notations</p>

#### [ Kenny Lau (Nov 07 2018 at 16:25)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965565):
<p><span class="user-mention" data-user-id="110031">@Patrick Massot</span> I think we can already write that</p>

#### [ Patrick Massot (Nov 07 2018 at 16:25)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965584):
<p>I is an ideal and D is a subring (except that I is an ideal not in the same ring as D)</p>

#### [ Kenny Lau (Nov 07 2018 at 16:25)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965587):
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> AM calls it quotient, but I don’t think we want this name in Lean</p>

#### [ Patrick Massot (Nov 07 2018 at 16:25)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965603):
<p>because D is in the localization</p>

#### [ Kenny Lau (Nov 07 2018 at 16:25)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965604):
<p>then what is I^n • D supposed to mean?</p>

#### [ Johan Commelin (Nov 07 2018 at 16:26)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965631):
<p>I don't think it is actually used.</p>

#### [ Johan Commelin (Nov 07 2018 at 16:26)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965658):
<p>Sorry, we are having to discussions interleaved...</p>

#### [ Patrick Massot (Nov 07 2018 at 16:26)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965660):
<p>Crap, I'm getting to Offenburg. I'll lose wifi</p>

#### [ Kenny Lau (Nov 07 2018 at 16:26)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965669):
<p>well the annihilator is used</p>

#### [ Patrick Massot (Nov 07 2018 at 16:26)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965672):
<p>I'll let Johan explain the abuse of notation</p>

#### [ Kenny Lau (Nov 07 2018 at 16:26)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965675):
<p>and this quotient is a generalisation</p>

#### [ Johan Commelin (Nov 07 2018 at 16:27)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965701):
<p>Sure, annihilators are used.</p>

#### [ Johan Commelin (Nov 07 2018 at 16:28)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965776):
<p>Speaking of localisations: <span class="user-mention" data-user-id="110064">@Kenny Lau</span> we couldn't find the fact that <code>s : S</code> becomes a unit in the localisation.</p>

#### [ Kevin Buzzard (Nov 07 2018 at 16:28)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965798):
<p>Maybe localisation was written before units</p>

#### [ Kenny Lau (Nov 07 2018 at 16:28)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146965804):
<p>so how should I name (M:N)?</p>

#### [ Johan Commelin (Nov 07 2018 at 16:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146966120):
<p>I don't have a good idea...</p>

#### [ Reid Barton (Nov 07 2018 at 16:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146966129):
<p>If no one has a better idea, I suggest <code>colon</code></p>

#### [ Reid Barton (Nov 07 2018 at 16:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146966140):
<p><code>M.colon N</code></p>

#### [ Kenny Lau (Nov 07 2018 at 16:33)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146966142):
<p>and what is I^n • D?</p>

#### [ Johan Commelin (Nov 07 2018 at 16:35)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146966302):
<p><code>I</code> is an ideal in a subring <code>A₀</code> of a ring <code>A</code>. We localise at an element <code>s : A</code> so we get <code>A → A_s</code>. Inside this, we look at <code>D</code> which is the subring generated by the image of <code>A₀</code> and some elements we don't care about.</p>

#### [ Kevin Buzzard (Nov 07 2018 at 16:35)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146966331):
<blockquote>
<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> do you have any other requests?</p>
</blockquote>
<p>I just looked through it all and you have got everything I can think of (including comap of prime is prime).</p>

#### [ Johan Commelin (Nov 07 2018 at 16:36)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/146966374):
<p>With this information, the reader is supposed to figure out what <code>I^n • D</code> is. I would be surprised if Lean could do so as well.</p>

#### [ Kenny Lau (Nov 07 2018 at 20:43)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/147249919):
<p>oh no, (analysis) limit stuffs use ideals</p>

#### [ Kenny Lau (Nov 07 2018 at 20:43)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/147249925):
<p>so all those need to be compiled</p>

#### [ Kenny Lau (Nov 07 2018 at 23:51)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/147262554):
<p>Should we have a notation for <code>r • linear_map.id</code>?</p>

#### [ Kenny Lau (Nov 08 2018 at 00:38)](https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%23462%20ideal%20operations/near/147264938):
<div class="codehilite"><pre><span></span><span class="n">def</span> <span class="n">annihilator</span> <span class="o">(</span><span class="n">N</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">linear_map</span><span class="bp">.</span><span class="n">lsmul</span> <span class="n">R</span> <span class="n">N</span><span class="o">)</span><span class="bp">.</span><span class="n">ker</span>

<span class="n">def</span> <span class="n">colon</span> <span class="o">(</span><span class="n">N</span> <span class="n">P</span> <span class="o">:</span> <span class="n">submodule</span> <span class="n">R</span> <span class="n">M</span><span class="o">)</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span> <span class="o">:=</span>
<span class="n">annihilator</span> <span class="o">(</span><span class="n">P</span><span class="bp">.</span><span class="n">map</span> <span class="n">N</span><span class="bp">.</span><span class="n">mkq</span><span class="o">)</span>
</pre></div>


{% endraw %}
