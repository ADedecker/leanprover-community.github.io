---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/144837PRreviews/035751295archive.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/144837PRreviews/index.html">PR reviews</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html">#1295 archive</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="172386562"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172386562" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172386562">Floris van Doorn (Aug 03 2019 at 02:06)</a>:</h4>
<p>In <a href="https://github.com/leanprover-community/mathlib/issues/1295" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1295">#1295</a> I added a folder where we can put one-off formalization projects. I called it <code>archive/</code>, following the archive of formal proofs. If this gets accepted, it would be nice to get <span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> and/or <span class="user-mention" data-user-id="110032">@Reid Barton</span>'s formalization of IMO 2019-1, and <span class="user-mention" data-user-id="110865">@Jeremy Avigad</span>'s formalization of the mutilated checkerboard. And of course for all other projects which I don't know on the top of my head.</p>

<a name="172386794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172386794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172386794">Floris van Doorn (Aug 03 2019 at 02:14)</a>:</h4>
<p>We can probably add more information to the README, but we should first make some organizational decisions:</p>
<ul>
<li>Do we want to have a size limit? I would say we shouldn't put the perfectoid space project in here. I'm also don't think we want to have things like Flypitch in here (but maybe some of the basic logic files are fine?). Something with the size of the cap set problem (2k-3k LOC) should be fine though (although presumably <span class="user-mention" data-user-id="110596">@Rob Lewis</span> wants that in its own repository)</li>
<li>We might want to specifically say that we don't want anything that is under active development?</li>
</ul>
<p>What else should be added to the README?</p>

<a name="172387180"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172387180" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172387180">Scott Morrison (Aug 03 2019 at 02:27)</a>:</h4>
<p>Can we also have a requirement that all general use lemmas have already been factored into <code>src/</code>? We really don't want this to be a "shortcut", that results in people not putting in the effort to polish up generally useful material for wide consumption.</p>

<a name="172387197"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172387197" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172387197">Floris van Doorn (Aug 03 2019 at 02:28)</a>:</h4>
<p>Yes, I added that to the README:</p>
<blockquote>
<p>When you make a pull request, do make sure that you put all lemmas which should be in mathlib in the right place (in mathlib).</p>
</blockquote>

<a name="172387416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172387416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172387416">Floris van Doorn (Aug 03 2019 at 02:35)</a>:</h4>
<p>Now reformulated to</p>
<blockquote>
<p>When you make a pull request, do make sure that you put all lemmas which are generally useful in right place in mathlib (in the <code>src/</code> directory).</p>
</blockquote>

<a name="172390291"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172390291" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172390291">Johan Commelin (Aug 03 2019 at 04:13)</a>:</h4>
<p>I think it is fine to put the perfectoid project there. It just means that its folder will be empty because 100% of it is generally useful and belongs in mathlib...</p>

<a name="172391006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172391006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172391006">Johan Commelin (Aug 03 2019 at 04:38)</a>:</h4>
<p>When we run <code>leanpkg build</code> locally, will that only compile <code>src/</code> or also <code>archive/</code>?</p>

<a name="172391012"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172391012" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172391012">Johan Commelin (Aug 03 2019 at 04:38)</a>:</h4>
<p>Because I fear that we will get lots of confusion if the local build passes, but it turns out it didn't test <code>archive/</code></p>

<a name="172392357"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172392357" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172392357">Floris van Doorn (Aug 03 2019 at 05:27)</a>:</h4>
<p><code>leanpkg build</code> will only compile <code>src/</code>.</p>
<blockquote>
<p>Because I fear that we will get lots of confusion if the local build passes, but it turns out it didn't test archive/</p>
</blockquote>
<p>If you run <code>leanpkg build</code> you are currently already building less than Travis, since Travis runs <code>leanpkg test</code>, which also builds the test folder.</p>

<a name="172392807"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172392807" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172392807">Johan Commelin (Aug 03 2019 at 05:43)</a>:</h4>
<p>Sure, but I guess that will cause less confusion</p>

<a name="172392809"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172392809" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172392809">Johan Commelin (Aug 03 2019 at 05:43)</a>:</h4>
<p>The test are less likely to break</p>

<a name="172414742"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172414742" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172414742">Simon Hudon (Aug 03 2019 at 17:39)</a>:</h4>
<p>Any chance we could put <code>archive</code> under <code>test</code>?</p>

<a name="172623314"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172623314" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172623314">Floris van Doorn (Aug 06 2019 at 19:58)</a>:</h4>
<blockquote>
<p>Any chance we could put <code>archive</code> under <code>test</code>?</p>
</blockquote>
<p>It feels a bit out of place to me, but if people feel strongly about <code>leanpkg test</code> also compiling the archive, I can move <code>archive</code> there.</p>

<a name="172623345"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172623345" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172623345">Johan Commelin (Aug 06 2019 at 19:58)</a>:</h4>
<p>I agree. I think <code>archive</code> and <code>test</code> serve very different purposes.</p>

<a name="172626359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/172626359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#172626359">Simon Hudon (Aug 06 2019 at 20:39)</a>:</h4>
<p>Alternatively, we can add a bash script <code>build_all</code> to build the library, the tests and the archive</p>

<a name="173784224"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/173784224" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#173784224">Patrick Massot (Aug 21 2019 at 11:21)</a>:</h4>
<p>As an extra data point about this archive idea, as well as automation vs maintainability: I'm back to my office, trying to catch up with things, and I just tried to open <span class="user-mention" data-user-id="110865">@Jeremy Avigad</span> <a href="https://gist.github.com/avigad/1080e327ad6806884c9c5091f5c449bd" target="_blank" title="https://gist.github.com/avigad/1080e327ad6806884c9c5091f5c449bd">https://gist.github.com/avigad/1080e327ad6806884c9c5091f5c449bd</a>. And it doesn't compile with current mathlib (lean-3.4.2 branch). Of course the issue is <code>simp</code> invocations.</p>

<a name="173784335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/173784335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#173784335">Patrick Massot (Aug 21 2019 at 11:22)</a>:</h4>
<p>I also noticed <a href="http://www.andrew.cmu.edu/user/avigad/Papers/mutilated.pdf" target="_blank" title="http://www.andrew.cmu.edu/user/avigad/Papers/mutilated.pdf">www.andrew.cmu.edu/user/avigad/Papers/mutilated.pdf</a> suffers from the usual Lean + LaTeX glitches (see the place of the reverse rewrite arrow on line 144 in the pdf).</p>

<a name="173784358"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/173784358" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#173784358">Patrick Massot (Aug 21 2019 at 11:23)</a>:</h4>
<p><span class="user-mention" data-user-id="110038">@Kevin Buzzard</span> Do you remember how we solved that arrow issue in your LMS paper?</p>

<a name="173784437"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/173784437" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#173784437">Patrick Massot (Aug 21 2019 at 11:24)</a>:</h4>
<p>Jeremy: in <a href="https://gist.github.com/avigad/1080e327ad6806884c9c5091f5c449bd#file-mutilated-lean-L134" target="_blank" title="https://gist.github.com/avigad/1080e327ad6806884c9c5091f5c449bd#file-mutilated-lean-L134">https://gist.github.com/avigad/1080e327ad6806884c9c5091f5c449bd#file-mutilated-lean-L134</a> you should learn about <code>conv_lhs</code> which is a convenient little shortcut</p>

<a name="173784796"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/144837-PR%20reviews/topic/%231295%20archive/near/173784796" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/144837PRreviews/035751295archive.html#173784796">Kevin Buzzard (Aug 21 2019 at 11:31)</a>:</h4>
<p>We solved it by <span class="user-mention" data-user-id="110596">@Rob Lewis</span> saying "which version of the Lean LaTeX thing we you using? The publicly available one in the GitHub repo? Don't use that, use this one which is much newer and circulates informally"</p>


{% endraw %}

{% include archive_update.html %}